var a;window.raptor={};if(!window.exports)window.exports={};if(!window.config)window.config={};if(!Array.prototype.invert)Array.prototype.invert=function(){for(var b={},d=0,e=this.length;d<e;++d)b[this[d]]=d;return b};
function decode_location_params(){var b=window.location.href.slice(window.location.href.indexOf("?")+1,window.location.href.length);if(b.indexOf("#")!=-1)b=b.slice(0,b.indexOf("#"));b=b.split("&");for(var d={},e=0;e<b.length;e++){var h=b[e].split("=");d[h[0]]=decodeURIComponent(h[1])}return d}var window_urlparams=decode_location_params();
function getfiles_enabled(){if(window.utweb&&utweb.current_client()&&utweb.current_client().plus_features("proxy_files"))return true;return config.local_discovery||config.debug||config.webui||config.experimental||config.dev_mode};(function(){var b=this,d=b._,e=typeof StopIteration!=="undefined"?StopIteration:"__break__",h=Array.prototype,n=Object.prototype,o=h.slice,v=h.unshift,u=n.toString,D=n.hasOwnProperty,L=h.forEach,N=h.map,Q=h.reduce,P=h.reduceRight,U=h.filter,W=h.every,da=h.some,fa=h.indexOf,ha=h.lastIndexOf;n=Array.isArray;var oa=Object.keys,I=function(q){return new x(q)};if(typeof exports!=="undefined")exports._=I;b._=I;I.VERSION="1.1.2";var ka=I.each=I.forEach=function(q,s,B){try{if(L&&q.forEach===L)q.forEach(s,
B);else if(I.isNumber(q.length))for(var E=0,S=q.length;E<S;E++)s.call(B,q[E],E,q);else for(E in q)D.call(q,E)&&s.call(B,q[E],E,q)}catch(Y){if(Y!=e)throw Y;}return q};I.map=function(q,s,B){if(N&&q.map===N)return q.map(s,B);var E=[];ka(q,function(S,Y,ba){E[E.length]=s.call(B,S,Y,ba)});return E};I.reduce=I.foldl=I.inject=function(q,s,B,E){if(typeof B=="function"){var S=B;B=s;s=S}if(Q&&q.reduce===Q){if(E)s=I.bind(s,E);return q.reduce(s,B)}ka(q,function(Y,ba,V){B=s.call(E,B,Y,ba,V)});return B};I.reduceRight=
I.foldr=function(q,s,B,E){if(P&&q.reduceRight===P){if(E)s=I.bind(s,E);return q.reduceRight(s,B)}q=(I.isArray(q)?q.slice():I.toArray(q)).reverse();return I.reduce(q,s,B,E)};I.find=I.detect=function(q,s,B){var E;ka(q,function(S,Y,ba){if(s.call(B,S,Y,ba)){E=S;I.breakLoop()}});return E};I.filter=I.select=function(q,s,B){if(U&&q.filter===U)return q.filter(s,B);var E=[];ka(q,function(S,Y,ba){if(s.call(B,S,Y,ba))E[E.length]=S});return E};I.reject=function(q,s,B){var E=[];ka(q,function(S,Y,ba){s.call(B,S,
Y,ba)||(E[E.length]=S)});return E};I.every=I.all=function(q,s,B){s=s||I.identity;if(W&&q.every===W)return q.every(s,B);var E=true;ka(q,function(S,Y,ba){(E=E&&s.call(B,S,Y,ba))||I.breakLoop()});return E};I.some=I.any=function(q,s,B){s=s||I.identity;if(da&&q.some===da)return q.some(s,B);var E=false;ka(q,function(S,Y,ba){if(E=s.call(B,S,Y,ba))I.breakLoop()});return E};I.include=I.contains=function(q,s){if(fa&&q.indexOf===fa)return q.indexOf(s)!=-1;var B=false;ka(q,function(E){if(B=E===s)I.breakLoop()});
return B};I.invoke=function(q,s){var B=o.call(arguments,2);return I.map(q,function(E){return(s?E[s]:E).apply(E,B)})};I.pluck=function(q,s){return I.map(q,function(B){return B[s]})};I.max=function(q,s,B){if(!s&&I.isArray(q))return Math.max.apply(Math,q);var E={computed:-Infinity};ka(q,function(S,Y,ba){Y=s?s.call(B,S,Y,ba):S;Y>=E.computed&&(E={value:S,computed:Y})});return E.value};I.min=function(q,s,B){if(!s&&I.isArray(q))return Math.min.apply(Math,q);var E={computed:Infinity};ka(q,function(S,Y,ba){Y=
s?s.call(B,S,Y,ba):S;Y<E.computed&&(E={value:S,computed:Y})});return E.value};I.sortBy=function(q,s,B){return I.pluck(I.map(q,function(E,S,Y){return{value:E,criteria:s.call(B,E,S,Y)}}).sort(function(E,S){E=E.criteria;S=S.criteria;return E<S?-1:E>S?1:0}),"value")};I.sortedIndex=function(q,s,B){B=B||I.identity;for(var E=0,S=q.length;E<S;){var Y=E+S>>1;B(q[Y])<B(s)?(E=Y+1):(S=Y)}return E};I.toArray=function(q){if(!q)return[];if(q.toArray)return q.toArray();if(I.isArray(q))return q;if(I.isArguments(q))return o.call(q);
return I.values(q)};I.size=function(q){return I.toArray(q).length};I.first=I.head=function(q,s,B){return s&&!B?o.call(q,0,s):q[0]};I.rest=I.tail=function(q,s,B){return o.call(q,I.isUndefined(s)||B?1:s)};I.last=function(q){return q[q.length-1]};I.compact=function(q){return I.filter(q,function(s){return!!s})};I.flatten=function(q){return I.reduce(q,function(s,B){if(I.isArray(B))return s.concat(I.flatten(B));s[s.length]=B;return s},[])};I.without=function(q){var s=o.call(arguments,1);return I.filter(q,
function(B){return!I.include(s,B)})};I.uniq=I.unique=function(q,s){return I.reduce(q,function(B,E,S){if(0==S||(s===true?I.last(B)!=E:!I.include(B,E)))B[B.length]=E;return B},[])};I.intersect=function(q){var s=o.call(arguments,1);return I.filter(I.uniq(q),function(B){return I.every(s,function(E){return I.indexOf(E,B)>=0})})};I.zip=function(){for(var q=o.call(arguments),s=I.max(I.pluck(q,"length")),B=new Array(s),E=0;E<s;E++)B[E]=I.pluck(q,""+E);return B};I.indexOf=function(q,s){if(fa&&q.indexOf===
fa)return q.indexOf(s);for(var B=0,E=q.length;B<E;B++)if(q[B]===s)return B;return-1};I.lastIndexOf=function(q,s){if(ha&&q.lastIndexOf===ha)return q.lastIndexOf(s);for(var B=q.length;B--;)if(q[B]===s)return B;return-1};I.range=function(q,s,B){var E=o.call(arguments),S=E.length<=1;q=S?0:E[0];s=S?E[0]:E[1];B=E[2]||1;E=Math.max(Math.ceil((s-q)/B),0);S=0;for(var Y=new Array(E);S<E;){Y[S++]=q;q+=B}return Y};I.bind=function(q,s){var B=o.call(arguments,2);return function(){return q.apply(s||{},B.concat(o.call(arguments)))}};
I.bindAll=function(q){var s=o.call(arguments,1);if(s.length==0)s=I.functions(q);ka(s,function(B){q[B]=I.bind(q[B],q)});return q};I.memoize=function(q,s){var B={};s=s||I.identity;return function(){var E=s.apply(this,arguments);return E in B?B[E]:(B[E]=q.apply(this,arguments))}};I.delay=function(q,s){var B=o.call(arguments,2);return setTimeout(function(){return q.apply(q,B)},s)};I.defer=function(q){return I.delay.apply(I,[q,1].concat(o.call(arguments,1)))};I.wrap=function(q,s){return function(){var B=
[q].concat(o.call(arguments));return s.apply(s,B)}};I.compose=function(){var q=o.call(arguments);return function(){for(var s=o.call(arguments),B=q.length-1;B>=0;B--)s=[q[B].apply(this,s)];return s[0]}};I.keys=oa||function(q){if(I.isArray(q))return I.range(0,q.length);var s=[];for(var B in q)if(D.call(q,B))s[s.length]=B;return s};I.values=function(q){return I.map(q,I.identity)};I.functions=I.methods=function(q){return I.filter(I.keys(q),function(s){return I.isFunction(q[s])}).sort()};I.extend=function(q){ka(o.call(arguments,
1),function(s){for(var B in s)q[B]=s[B]});return q};I.clone=function(q){return I.isArray(q)?q.slice():I.extend({},q)};I.tap=function(q,s){s(q);return q};I.isEqual=function(q,s){if(q===s)return true;var B=typeof q;if(B!=typeof s)return false;if(q==s)return true;if(!q&&s||q&&!s)return false;if(q.isEqual)return q.isEqual(s);if(I.isDate(q)&&I.isDate(s))return q.getTime()===s.getTime();if(I.isNaN(q)&&I.isNaN(s))return false;if(I.isRegExp(q)&&I.isRegExp(s))return q.source===s.source&&q.global===s.global&&
q.ignoreCase===s.ignoreCase&&q.multiline===s.multiline;if(B!=="object")return false;if(q.length&&q.length!==s.length)return false;B=I.keys(q);var E=I.keys(s);if(B.length!=E.length)return false;for(var S in q)if(!(S in s)||!I.isEqual(q[S],s[S]))return false;return true};I.isEmpty=function(q){if(I.isArray(q)||I.isString(q))return q.length===0;for(var s in q)if(D.call(q,s))return false;return true};I.isElement=function(q){return!!(q&&q.nodeType==1)};I.isArray=n||function(q){return!!(q&&q.concat&&q.unshift&&
!q.callee)};I.isArguments=function(q){return!!(q&&q.callee)};I.isFunction=function(q){return!!(q&&q.constructor&&q.call&&q.apply)};I.isString=function(q){return!!(q===""||q&&q.charCodeAt&&q.substr)};I.isNumber=function(q){return q===+q||u.call(q)==="[object Number]"};I.isBoolean=function(q){return q===true||q===false};I.isDate=function(q){return!!(q&&q.getTimezoneOffset&&q.setUTCFullYear)};I.isRegExp=function(q){return!!(q&&q.test&&q.exec&&(q.ignoreCase||q.ignoreCase===false))};I.isNaN=function(q){return I.isNumber(q)&&
isNaN(q)};I.isNull=function(q){return q===null};I.isUndefined=function(q){return typeof q=="undefined"};I.noConflict=function(){b._=d;return this};I.identity=function(q){return q};I.times=function(q,s,B){for(var E=0;E<q;E++)s.call(B,E)};I.breakLoop=function(){throw e;};I.mixin=function(q){ka(I.functions(q),function(s){z(s,I[s]=q[s])})};var va=0;I.uniqueId=function(q){var s=va++;return q?q+s:s};I.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};I.template=function(q,s){var B=
I.templateSettings;q="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+q.replace(/'/g,"\\'").replace(B.interpolate,function(E,S){return"',"+S.replace(/\\'/g,"'")+",'"}).replace(B.evaluate||null,function(E,S){return"');"+S.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";q=new Function("obj",q);return s?q(s):q};var x=function(q){this._wrapped=q};I.prototype=x.prototype;
var y=function(q,s){return s?I(q).chain():q},z=function(q,s){x.prototype[q]=function(){var B=o.call(arguments);v.call(B,this._wrapped);return y(s.apply(I,B),this._chain)}};I.mixin(I);ka(["pop","push","reverse","shift","sort","splice","unshift"],function(q){var s=h[q];x.prototype[q]=function(){s.apply(this._wrapped,arguments);return y(this._wrapped,this._chain)}});ka(["concat","join","slice"],function(q){var s=h[q];x.prototype[q]=function(){return y(s.apply(this._wrapped,arguments),this._chain)}});
x.prototype.chain=function(){this._chain=true;return this};x.prototype.value=function(){return this._wrapped}})();(function(b,d){function e(c,g,l){if(l===d&&c.nodeType===1){l="data-"+g.replace(wb,"$1-$2").toLowerCase();l=c.getAttribute(l);if(typeof l==="string"){try{l=l==="true"?true:l==="false"?false:l==="null"?null:!i.isNaN(l)?parseFloat(l):xb.test(l)?i.parseJSON(l):l}catch(m){}i.data(c,g,l)}else l=d}return l}function h(c){for(var g in c)if(g!=="toJSON")return false;return true}function n(c,g,l){var m=g+"defer",p=g+"queue",r=g+"mark",w=i.data(c,m,d,true);if(w&&(l==="queue"||!i.data(c,p,d,true))&&(l==="mark"||
!i.data(c,r,d,true)))setTimeout(function(){if(!i.data(c,p,d,true)&&!i.data(c,r,d,true)){i.removeData(c,m,true);w.resolve()}},0)}function o(){return false}function v(){return true}function u(c,g,l){var m=i.extend({},l[0]);m.type=c;m.originalEvent={};m.liveFired=d;i.event.handle.call(g,m);m.isDefaultPrevented()&&l[0].preventDefault()}function D(c){var g,l,m,p,r,w,F,G,H,O,ea,ga=[];p=[];r=i._data(this,"events");if(!(c.liveFired===this||!r||!r.live||c.target.disabled||c.button&&c.type==="click")){if(c.namespace)ea=
new RegExp("(^|\\.)"+c.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)");c.liveFired=this;var ia=r.live.slice(0);for(F=0;F<ia.length;F++){r=ia[F];r.origType.replace(Oa,"")===c.type?p.push(r.selector):ia.splice(F--,1)}p=i(c.target).closest(p,c.currentTarget);G=0;for(H=p.length;G<H;G++){O=p[G];for(F=0;F<ia.length;F++){r=ia[F];if(O.selector===r.selector&&(!ea||ea.test(r.namespace))&&!O.elem.disabled){w=O.elem;m=null;if(r.preType==="mouseenter"||r.preType==="mouseleave"){c.type=r.preType;if((m=i(c.relatedTarget).closest(r.selector)[0])&&
i.contains(w,m))m=w}if(!m||m!==w)ga.push({elem:w,handleObj:r,level:O.level})}}}G=0;for(H=ga.length;G<H;G++){p=ga[G];if(l&&p.level>l)break;c.currentTarget=p.elem;c.data=p.handleObj.data;c.handleObj=p.handleObj;ea=p.handleObj.origHandler.apply(p.elem,arguments);if(ea===false||c.isPropagationStopped()){l=p.level;if(ea===false)g=false;if(c.isImmediatePropagationStopped())break}}return g}}function L(c,g){return(c&&c!=="*"?c+".":"")+g.replace(yb,"`").replace(zb,"&")}function N(c){return!c||!c.parentNode||
c.parentNode.nodeType===11}function Q(c,g,l){g=g||0;if(i.isFunction(g))return i.grep(c,function(p,r){return!!g.call(p,r,p)===l});else if(g.nodeType)return i.grep(c,function(p){return p===g===l});else if(typeof g==="string"){var m=i.grep(c,function(p){return p.nodeType===1});if(Ab.test(g))return i.filter(g,m,!l);else g=i.filter(g,m)}return i.grep(c,function(p){return i.inArray(p,g)>=0===l})}function P(c){return i.nodeName(c,"table")?c.getElementsByTagName("tbody")[0]||c.appendChild(c.ownerDocument.createElement("tbody")):
c}function U(c,g){if(!(g.nodeType!==1||!i.hasData(c))){var l=i.expando,m=i.data(c),p=i.data(g,m);if(m=m[l]){c=m.events;p=p[l]=i.extend({},m);if(c){delete p.handle;p.events={};for(var r in c){l=0;for(m=c[r].length;l<m;l++)i.event.add(g,r+(c[r][l].namespace?".":"")+c[r][l].namespace,c[r][l],c[r][l].data)}}}}}function W(c,g){var l;if(g.nodeType===1){g.clearAttributes&&g.clearAttributes();g.mergeAttributes&&g.mergeAttributes(c);l=g.nodeName.toLowerCase();if(l==="object")g.outerHTML=c.outerHTML;else if(l===
"input"&&(c.type==="checkbox"||c.type==="radio")){if(c.checked)g.defaultChecked=g.checked=c.checked;if(g.value!==c.value)g.value=c.value}else if(l==="option")g.selected=c.defaultSelected;else if(l==="input"||l==="textarea")g.defaultValue=c.defaultValue;g.removeAttribute(i.expando)}}function da(c){return"getElementsByTagName"in c?c.getElementsByTagName("*"):"querySelectorAll"in c?c.querySelectorAll("*"):[]}function fa(c){if(c.type==="checkbox"||c.type==="radio")c.defaultChecked=c.checked}function ha(c){if(i.nodeName(c,
"input"))fa(c);else"getElementsByTagName"in c&&i.grep(c.getElementsByTagName("input"),fa)}function oa(c,g){g.src?i.ajax({url:g.src,async:false,dataType:"script"}):i.globalEval((g.text||g.textContent||g.innerHTML||"").replace(Bb,"/*$0*/"));g.parentNode&&g.parentNode.removeChild(g)}function I(c,g,l){var m=g==="width"?c.offsetWidth:c.offsetHeight,p=g==="width"?Cb:Db;if(m>0){l!=="border"&&i.each(p,function(){l||(m-=parseFloat(i.css(c,"padding"+this))||0);if(l==="margin")m+=parseFloat(i.css(c,l+this))||
0;else m-=parseFloat(i.css(c,"border"+this+"Width"))||0});return m+"px"}m=Fa(c,g,g);if(m<0||m==null)m=c.style[g]||0;m=parseFloat(m)||0;l&&i.each(p,function(){m+=parseFloat(i.css(c,"padding"+this))||0;if(l!=="padding")m+=parseFloat(i.css(c,"border"+this+"Width"))||0;if(l==="margin")m+=parseFloat(i.css(c,l+this))||0});return m+"px"}function ka(c){return function(g,l){if(typeof g!=="string"){l=g;g="*"}if(i.isFunction(l)){g=g.toLowerCase().split(Za);for(var m=0,p=g.length,r,w;m<p;m++){r=g[m];if(w=/^\+/.test(r))r=
r.substr(1)||"*";r=c[r]=c[r]||[];r[w?"unshift":"push"](l)}}}}function va(c,g,l,m,p,r){p=p||g.dataTypes[0];r=r||{};r[p]=true;p=c[p];for(var w=0,F=p?p.length:0,G=c===Pa,H;w<F&&(G||!H);w++){H=p[w](g,l,m);if(typeof H==="string")if(!G||r[H])H=d;else{g.dataTypes.unshift(H);H=va(c,g,l,m,H,r)}}if((G||!H)&&!r["*"])H=va(c,g,l,m,"*",r);return H}function x(c,g,l,m){if(i.isArray(g))i.each(g,function(r,w){l||Eb.test(c)?m(c,w):x(c+"["+(typeof w==="object"||i.isArray(w)?r:"")+"]",w,l,m)});else if(!l&&g!=null&&typeof g===
"object")for(var p in g)x(c+"["+p+"]",g[p],l,m);else m(c,g)}function y(c,g,l){var m=c.contents,p=c.dataTypes,r=c.responseFields,w,F,G,H;for(F in r)if(F in l)g[r[F]]=l[F];for(;p[0]==="*";){p.shift();if(w===d)w=c.mimeType||g.getResponseHeader("content-type")}if(w)for(F in m)if(m[F].test(w)){p.unshift(F);break}if(p[0]in l)G=p[0];else{for(F in l){if(!p[0]||c.converters[F+" "+p[0]]){G=F;break}H||(H=F)}G=G||H}if(G){G!==p[0]&&p.unshift(G);return l[G]}}function z(c,g){if(c.dataFilter)g=c.dataFilter(g,c.dataType);
var l=c.dataTypes,m={},p,r,w=l.length,F,G=l[0],H,O,ea,ga,ia;for(p=1;p<w;p++){if(p===1)for(r in c.converters)if(typeof r==="string")m[r.toLowerCase()]=c.converters[r];H=G;G=l[p];if(G==="*")G=H;else if(H!=="*"&&H!==G){O=H+" "+G;ea=m[O]||m["* "+G];if(!ea){ia=d;for(ga in m){F=ga.split(" ");if(F[0]===H||F[0]==="*")if(ia=m[F[1]+" "+G]){ga=m[ga];if(ga===true)ea=ia;else if(ia===true)ea=ga;break}}}ea||ia||i.error("No conversion from "+O.replace(" "," to "));if(ea!==true)g=ea?ea(g):ia(ga(g))}}return g}function q(){try{return new b.XMLHttpRequest}catch(c){}}
function s(){try{return new b.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}function B(){setTimeout(E,0);return Ka=i.now()}function E(){Ka=d}function S(c,g){var l={};i.each($a.concat.apply([],$a.slice(0,g)),function(){l[this]=c});return l}function Y(c){if(!Qa[c]){var g=V.body,l=i("<"+c+">").appendTo(g),m=l.css("display");l.remove();if(m==="none"||m===""){if(!za){za=V.createElement("iframe");za.frameBorder=za.width=za.height=0}g.appendChild(za);if(!Ga||!za.createElement){Ga=(za.contentWindow||za.contentDocument).document;
Ga.write((V.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Ga.close()}l=Ga.createElement(c);Ga.body.appendChild(l);m=i.css(l,"display");g.removeChild(za)}Qa[c]=m}return Qa[c]}function ba(c){return i.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var V=b.document,La=b.navigator,Aa=b.location,i=function(){function c(){if(!g.isReady){try{V.documentElement.doScroll("left")}catch(A){setTimeout(c,1);return}g.ready()}}var g=function(A,T){return new g.fn.init(A,T,p)},l=
b.jQuery,m=b.$,p,r=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,w=/\S/,F=/^\s+/,G=/\s+$/,H=/\d/,O=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,ea=/^[\],:{}\s]*$/,ga=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,ia=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ma=/(?:^|:|,)(?:\s*\[)+/g,Ba=/(webkit)[ \/]([\w.]+)/,pa=/(opera)(?:.*version)?[ \/]([\w.]+)/,wa=/(msie) ([\w.]+)/,ya=/(mozilla)(?:.*? rv:([\w.]+))?/,t=/-([a-z])/ig,C=function(A,T){return T.toUpperCase()},J=La.userAgent,K,M,R=Object.prototype.toString,
aa=Object.prototype.hasOwnProperty,X=Array.prototype.push,ja=Array.prototype.slice,ta=String.prototype.trim,sa=Array.prototype.indexOf,ua={};g.fn=g.prototype={constructor:g,init:function(A,T,Z){var ca;if(!A)return this;if(A.nodeType){this.context=this[0]=A;this.length=1;return this}if(A==="body"&&!T&&V.body){this.context=V;this[0]=V.body;this.selector=A;this.length=1;return this}if(typeof A==="string")if((ca=A.charAt(0)==="<"&&A.charAt(A.length-1)===">"&&A.length>=3?[null,A,null]:r.exec(A))&&(ca[1]||
!T))if(ca[1]){Z=(T=T instanceof g?T[0]:T)?T.ownerDocument||T:V;if(A=O.exec(A))if(g.isPlainObject(T)){A=[V.createElement(A[1])];g.fn.attr.call(A,T,true)}else A=[Z.createElement(A[1])];else{A=g.buildFragment([ca[1]],[Z]);A=(A.cacheable?g.clone(A.fragment):A.fragment).childNodes}return g.merge(this,A)}else{if((T=V.getElementById(ca[2]))&&T.parentNode){if(T.id!==ca[2])return Z.find(A);this.length=1;this[0]=T}this.context=V;this.selector=A;return this}else return!T||T.jquery?(T||Z).find(A):this.constructor(T).find(A);
else if(g.isFunction(A))return Z.ready(A);if(A.selector!==d){this.selector=A.selector;this.context=A.context}return g.makeArray(A,this)},selector:"",jquery:"1.6.2pre",length:0,size:function(){return this.length},toArray:function(){return ja.call(this,0)},get:function(A){return A==null?this.toArray():A<0?this[this.length+A]:this[A]},pushStack:function(A,T,Z){var ca=this.constructor();g.isArray(A)?X.apply(ca,A):g.merge(ca,A);ca.prevObject=this;ca.context=this.context;if(T==="find")ca.selector=this.selector+
(this.selector?" ":"")+Z;else if(T)ca.selector=this.selector+"."+T+"("+Z+")";return ca},each:function(A,T){return g.each(this,A,T)},ready:function(A){g.bindReady();K.done(A);return this},eq:function(A){return A===-1?this.slice(A):this.slice(A,+A+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ja.apply(this,arguments),"slice",ja.call(arguments).join(","))},map:function(A){return this.pushStack(g.map(this,function(T,Z){return A.call(T,
Z,T)}))},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:[].sort,splice:[].splice};g.fn.init.prototype=g.fn;g.extend=g.fn.extend=function(){var A,T,Z,ca,na,la=arguments[0]||{},qa=1,ra=arguments.length,Ra=false;if(typeof la==="boolean"){Ra=la;la=arguments[1]||{};qa=2}if(typeof la!=="object"&&!g.isFunction(la))la={};if(ra===qa){la=this;--qa}for(;qa<ra;qa++)if((A=arguments[qa])!=null)for(T in A){Z=la[T];ca=A[T];if(la!==ca)if(Ra&&ca&&(g.isPlainObject(ca)||(na=g.isArray(ca)))){if(na){na=
false;Z=Z&&g.isArray(Z)?Z:[]}else Z=Z&&g.isPlainObject(Z)?Z:{};la[T]=g.extend(Ra,Z,ca)}else if(ca!==d)la[T]=ca}return la};g.extend({noConflict:function(A){if(b.$===g)b.$=m;if(A&&b.jQuery===g)b.jQuery=l;return g},isReady:false,readyWait:1,holdReady:function(A){if(A)g.readyWait++;else g.ready(true)},ready:function(A){if(A===true&&!--g.readyWait||A!==true&&!g.isReady){if(!V.body)return setTimeout(g.ready,1);g.isReady=true;if(!(A!==true&&--g.readyWait>0)){K.resolveWith(V,[g]);g.fn.trigger&&g(V).trigger("ready").unbind("ready")}}},
bindReady:function(){if(!K){K=g._Deferred();if(V.readyState==="complete")return setTimeout(g.ready,1);if(V.addEventListener){V.addEventListener("DOMContentLoaded",M,false);b.addEventListener("load",g.ready,false)}else if(V.attachEvent){V.attachEvent("onreadystatechange",M);b.attachEvent("onload",g.ready);var A=false;try{A=b.frameElement==null}catch(T){}V.documentElement.doScroll&&A&&c()}}},isFunction:function(A){return g.type(A)==="function"},isArray:Array.isArray||function(A){return g.type(A)===
"array"},isWindow:function(A){return A&&typeof A==="object"&&"setInterval"in A},isNaN:function(A){return A==null||!H.test(A)||isNaN(A)},type:function(A){return A==null?String(A):ua[R.call(A)]||"object"},isPlainObject:function(A){if(!A||g.type(A)!=="object"||A.nodeType||g.isWindow(A))return false;if(A.constructor&&!aa.call(A,"constructor")&&!aa.call(A.constructor.prototype,"isPrototypeOf"))return false;var T;for(T in A);return T===d||aa.call(A,T)},isEmptyObject:function(A){for(var T in A)return false;
return true},error:function(A){throw A;},parseJSON:function(A){if(typeof A!=="string"||!A)return null;A=g.trim(A);if(b.JSON&&b.JSON.parse)return b.JSON.parse(A);if(ea.test(A.replace(ga,"@").replace(ia,"]").replace(ma,"")))return(new Function("return "+A))();g.error("Invalid JSON: "+A)},parseXML:function(A,T,Z){if(b.DOMParser){Z=new DOMParser;T=Z.parseFromString(A,"text/xml")}else{T=new ActiveXObject("Microsoft.XMLDOM");T.async="false";T.loadXML(A)}Z=T.documentElement;if(!Z||!Z.nodeName||Z.nodeName===
"parsererror")g.error("Invalid XML: "+A);return T},noop:function(){},globalEval:function(A){if(A&&w.test(A))(b.execScript||function(T){b.eval.call(b,T)})(A)},camelCase:function(A){return A.replace(t,C)},nodeName:function(A,T){return A.nodeName&&A.nodeName.toUpperCase()===T.toUpperCase()},each:function(A,T,Z){var ca,na=0,la=A.length,qa=la===d||g.isFunction(A);if(Z)if(qa)for(ca in A){if(T.apply(A[ca],Z)===false)break}else for(;na<la;){if(T.apply(A[na++],Z)===false)break}else if(qa)for(ca in A){if(T.call(A[ca],
ca,A[ca])===false)break}else for(;na<la;)if(T.call(A[na],na,A[na++])===false)break;return A},trim:ta?function(A){return A==null?"":ta.call(A)}:function(A){return A==null?"":A.toString().replace(F,"").replace(G,"")},makeArray:function(A,T){T=T||[];if(A!=null){var Z=g.type(A);A.length==null||Z==="string"||Z==="function"||Z==="regexp"||g.isWindow(A)?X.call(T,A):g.merge(T,A)}return T},inArray:function(A,T){if(sa)return sa.call(T,A);for(var Z=0,ca=T.length;Z<ca;Z++)if(T[Z]===A)return Z;return-1},merge:function(A,
T){var Z=A.length,ca=0;if(typeof T.length==="number")for(var na=T.length;ca<na;ca++)A[Z++]=T[ca];else for(;T[ca]!==d;)A[Z++]=T[ca++];A.length=Z;return A},grep:function(A,T,Z){var ca=[],na;Z=!!Z;for(var la=0,qa=A.length;la<qa;la++){na=!!T(A[la],la);Z!==na&&ca.push(A[la])}return ca},map:function(A,T,Z){var ca,na,la=[],qa=0,ra=A.length;if(A instanceof g||ra!==d&&typeof ra==="number"&&(ra>0&&A[0]&&A[ra-1]||ra===0||g.isArray(A)))for(;qa<ra;qa++){ca=T(A[qa],qa,Z);if(ca!=null)la[la.length]=ca}else for(na in A){ca=
T(A[na],na,Z);if(ca!=null)la[la.length]=ca}return la.concat.apply([],la)},guid:1,proxy:function(A,T){if(typeof T==="string"){var Z=A[T];T=A;A=Z}if(!g.isFunction(A))return d;var ca=ja.call(arguments,2);Z=function(){return A.apply(T,ca.concat(ja.call(arguments)))};Z.guid=A.guid=A.guid||Z.guid||g.guid++;return Z},access:function(A,T,Z,ca,na,la){var qa=A.length;if(typeof T==="object"){for(var ra in T)g.access(A,ra,T[ra],ca,na,Z);return A}if(Z!==d){ca=!la&&ca&&g.isFunction(Z);for(ra=0;ra<qa;ra++)na(A[ra],
T,ca?Z.call(A[ra],ra,na(A[ra],T)):Z,la);return A}return qa?na(A[0],T):d},now:function(){return(new Date).getTime()},uaMatch:function(A){A=A.toLowerCase();A=Ba.exec(A)||pa.exec(A)||wa.exec(A)||A.indexOf("compatible")<0&&ya.exec(A)||[];return{browser:A[1]||"",version:A[2]||"0"}},sub:function(){function A(Z,ca){return new A.fn.init(Z,ca)}g.extend(true,A,this);A.superclass=this;A.fn=A.prototype=this();A.fn.constructor=A;A.sub=this.sub;A.fn.init=function(Z,ca){if(ca&&ca instanceof g&&!(ca instanceof A))ca=
A(ca);return g.fn.init.call(this,Z,ca,T)};A.fn.init.prototype=A.fn;var T=A(V);return A},browser:{}});g.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(A,T){ua["[object "+T+"]"]=T.toLowerCase()});J=g.uaMatch(J);if(J.browser){g.browser[J.browser]=true;g.browser.version=J.version}if(g.browser.webkit)g.browser.safari=true;if(w.test("\u00a0")){F=/^[\s\xA0]+/;G=/[\s\xA0]+$/}p=g(V);if(V.addEventListener)M=function(){V.removeEventListener("DOMContentLoaded",M,false);g.ready()};
else if(V.attachEvent)M=function(){if(V.readyState==="complete"){V.detachEvent("onreadystatechange",M);g.ready()}};return g}(),Sa="done fail isResolved isRejected promise then always pipe".split(" "),ab=[].slice;i.extend({_Deferred:function(){var c=[],g,l,m,p={done:function(){if(!m){var r=arguments,w,F,G,H,O;if(g){O=g;g=0}w=0;for(F=r.length;w<F;w++){G=r[w];H=i.type(G);if(H==="array")p.done.apply(p,G);else H==="function"&&c.push(G)}O&&p.resolveWith(O[0],O[1])}return this},resolveWith:function(r,w){if(!m&&
!g&&!l){w=w||[];l=1;try{for(;c[0];)c.shift().apply(r,w)}finally{g=[r,w];l=0}}return this},resolve:function(){p.resolveWith(this,arguments);return this},isResolved:function(){return!!(l||g)},cancel:function(){m=1;c=[];return this}};return p},Deferred:function(c){var g=i._Deferred(),l=i._Deferred(),m;i.extend(g,{then:function(p,r){g.done(p).fail(r);return this},always:function(){return g.done.apply(g,arguments).fail.apply(this,arguments)},fail:l.done,rejectWith:l.resolveWith,reject:l.resolve,isRejected:l.isResolved,
pipe:function(p,r){return i.Deferred(function(w){i.each({done:[p,"resolve"],fail:[r,"reject"]},function(F,G){var H=G[0],O=G[1],ea;i.isFunction(H)?g[F](function(){(ea=H.apply(this,arguments))&&i.isFunction(ea.promise)?ea.promise().then(w.resolve,w.reject):w[O](ea)}):g[F](w[O])})}).promise()},promise:function(p){if(p==null){if(m)return m;m=p={}}for(var r=Sa.length;r--;)p[Sa[r]]=g[Sa[r]];return p}});g.done(l.cancel).fail(g.cancel);delete g.cancel;c&&c.call(g,g);return g},when:function(c){function g(F){return function(G){l[F]=
arguments.length>1?ab.call(arguments,0):G;--r||w.resolveWith(w,ab.call(l,0))}}var l=arguments,m=0,p=l.length,r=p,w=p<=1&&c&&i.isFunction(c.promise)?c:i.Deferred();if(p>1){for(;m<p;m++)if(l[m]&&i.isFunction(l[m].promise))l[m].promise().then(g(m),w.reject);else--r;r||w.resolveWith(w,l)}else if(w!==c)w.resolveWith(w,p?[c]:[]);return w.promise()}});i.support=function(){var c=V.createElement("div"),g=V.documentElement,l,m,p,r,w,F;c.setAttribute("className","t");c.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
l=c.getElementsByTagName("*");m=c.getElementsByTagName("a")[0];if(!l||!l.length||!m)return{};p=V.createElement("select");r=p.appendChild(V.createElement("option"));l=c.getElementsByTagName("input")[0];w={leadingWhitespace:c.firstChild.nodeType===3,tbody:!c.getElementsByTagName("tbody").length,htmlSerialize:!!c.getElementsByTagName("link").length,style:/top/.test(m.getAttribute("style")),hrefNormalized:m.getAttribute("href")==="/a",opacity:/^0.55$/.test(m.style.opacity),cssFloat:!!m.style.cssFloat,
checkOn:l.value==="on",optSelected:r.selected,getSetAttribute:c.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};l.checked=true;w.noCloneChecked=l.cloneNode(true).checked;p.disabled=true;w.optDisabled=!r.disabled;try{delete c.test}catch(G){w.deleteExpando=false}if(!c.addEventListener&&c.attachEvent&&c.fireEvent){c.attachEvent("onclick",function(){w.noCloneEvent=
false});c.cloneNode(true).fireEvent("onclick")}l=V.createElement("input");l.value="t";l.setAttribute("type","radio");w.radioValue=l.value==="t";l.setAttribute("checked","checked");c.appendChild(l);m=V.createDocumentFragment();m.appendChild(c.firstChild);w.checkClone=m.cloneNode(true).cloneNode(true).lastChild.checked;c.innerHTML="";c.style.width=c.style.paddingLeft="1px";p=V.getElementsByTagName("body")[0];m=V.createElement(p?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0};
p&&i.extend(r,{position:"absolute",left:-1000,top:-1000});for(F in r)m.style[F]=r[F];m.appendChild(c);g=p||g;g.insertBefore(m,g.firstChild);w.appendChecked=l.checked;w.boxModel=c.offsetWidth===2;if("zoom"in c.style){c.style.display="inline";c.style.zoom=1;w.inlineBlockNeedsLayout=c.offsetWidth===2;c.style.display="";c.innerHTML="<div style='width:4px;'></div>";w.shrinkWrapBlocks=c.offsetWidth!==2}c.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";p=c.getElementsByTagName("td");
l=p[0].offsetHeight===0;p[0].style.display="";p[1].style.display="none";w.reliableHiddenOffsets=l&&p[0].offsetHeight===0;c.innerHTML="";if(V.defaultView&&V.defaultView.getComputedStyle){l=V.createElement("div");l.style.width="0";l.style.marginRight="0";c.appendChild(l);w.reliableMarginRight=(parseInt((V.defaultView.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0}m.innerHTML="";g.removeChild(m);if(c.attachEvent)for(F in{submit:1,change:1,focusin:1}){g="on"+F;l=g in c;if(!l){c.setAttribute(g,
"return;");l=typeof c[g]==="function"}w[F+"Bubbles"]=l}m=m=p=r=p=l=c=l=null;return w}();i.boxModel=i.support.boxModel;var xb=/^(?:\{.*\}|\[.*\])$/,wb=/([a-z])([A-Z])/g;i.extend({cache:{},uuid:0,expando:"jQuery"+(i.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(c){c=c.nodeType?i.cache[c[i.expando]]:c[i.expando];return!!c&&!h(c)},data:function(c,g,l,m){if(i.acceptData(c)){var p=i.expando,r=typeof g==="string",
w=c.nodeType,F=w?i.cache:c,G=w?c[i.expando]:c[i.expando]&&i.expando;if(!((!G||m&&G&&!F[G][p])&&r&&l===d)){if(!G)if(w)c[i.expando]=G=++i.uuid;else G=i.expando;if(!F[G]){F[G]={};if(!w)F[G].toJSON=i.noop}if(typeof g==="object"||typeof g==="function")if(m)F[G][p]=i.extend(F[G][p],g);else F[G]=i.extend(F[G],g);c=F[G];if(m){c[p]||(c[p]={});c=c[p]}if(l!==d)c[i.camelCase(g)]=l;if(g==="events"&&!c[g])return c[p]&&c[p].events;return r?c[i.camelCase(g)]||c[g]:c}}},removeData:function(c,g,l){if(i.acceptData(c)){var m=
i.expando,p=c.nodeType,r=p?i.cache:c,w=p?c[i.expando]:i.expando;if(r[w]){if(g){var F=l?r[w][m]:r[w];if(F){delete F[g];if(!h(F))return}}if(l){delete r[w][m];if(!h(r[w]))return}g=r[w][m];if(i.support.deleteExpando||r!=b)delete r[w];else r[w]=null;if(g){r[w]={};if(!p)r[w].toJSON=i.noop;r[w][m]=g}else if(p)if(i.support.deleteExpando)delete c[i.expando];else if(c.removeAttribute)c.removeAttribute(i.expando);else c[i.expando]=null}}},_data:function(c,g,l){return i.data(c,g,l,true)},acceptData:function(c){if(c.nodeName){var g=
i.noData[c.nodeName.toLowerCase()];if(g)return!(g===true||c.getAttribute("classid")!==g)}return true}});i.fn.extend({data:function(c,g){var l=null;if(typeof c==="undefined"){if(this.length){l=i.data(this[0]);if(this[0].nodeType===1)for(var m=this[0].attributes,p,r=0,w=m.length;r<w;r++){p=m[r].name;if(p.indexOf("data-")===0){p=i.camelCase(p.substring(5));e(this[0],p,l[p])}}}return l}else if(typeof c==="object")return this.each(function(){i.data(this,c)});var F=c.split(".");F[1]=F[1]?"."+F[1]:"";if(g===
d){l=this.triggerHandler("getData"+F[1]+"!",[F[0]]);if(l===d&&this.length){l=i.data(this[0],c);l=e(this[0],c,l)}return l===d&&F[1]?this.data(F[0]):l}else return this.each(function(){var G=i(this),H=[F[0],g];G.triggerHandler("setData"+F[1]+"!",H);i.data(this,c,g);G.triggerHandler("changeData"+F[1]+"!",H)})},removeData:function(c){return this.each(function(){i.removeData(this,c)})}});i.extend({_mark:function(c,g){if(c){g=(g||"fx")+"mark";i.data(c,g,(i.data(c,g,d,true)||0)+1,true)}},_unmark:function(c,
g,l){if(c!==true){l=g;g=c;c=false}if(g){l=l||"fx";var m=l+"mark";if(c=c?0:(i.data(g,m,d,true)||1)-1)i.data(g,m,c,true);else{i.removeData(g,m,true);n(g,l,"mark")}}},queue:function(c,g,l){if(c){g=(g||"fx")+"queue";var m=i.data(c,g,d,true);if(l)if(!m||i.isArray(l))m=i.data(c,g,i.makeArray(l),true);else m.push(l);return m||[]}},dequeue:function(c,g){g=g||"fx";var l=i.queue(c,g),m=l.shift();if(m==="inprogress")m=l.shift();if(m){g==="fx"&&l.unshift("inprogress");m.call(c,function(){i.dequeue(c,g)})}if(!l.length){i.removeData(c,
g+"queue",true);n(c,g,"queue")}}});i.fn.extend({queue:function(c,g){if(typeof c!=="string"){g=c;c="fx"}if(g===d)return i.queue(this[0],c);return this.each(function(){var l=i.queue(this,c,g);c==="fx"&&l[0]!=="inprogress"&&i.dequeue(this,c)})},dequeue:function(c){return this.each(function(){i.dequeue(this,c)})},delay:function(c,g){c=i.fx?i.fx.speeds[c]||c:c;g=g||"fx";return this.queue(g,function(){var l=this;setTimeout(function(){i.dequeue(l,g)},c)})},clearQueue:function(c){return this.queue(c||"fx",
[])},promise:function(c,g){function l(){--r||m.resolveWith(p,[p])}if(typeof c!=="string"){g=c;c=d}c=c||"fx";var m=i.Deferred(),p=this;g=p.length;var r=1,w=c+"defer",F=c+"queue";c=c+"mark";for(var G;g--;)if(G=i.data(p[g],w,d,true)||(i.data(p[g],F,d,true)||i.data(p[g],c,d,true))&&i.data(p[g],w,i._Deferred(),true)){r++;G.done(l)}l();return m.promise()}});var bb=/[\n\t\r]/g,Ta=/\s+/,Fb=/\r/g,Gb=/^(?:button|input)$/i,Hb=/^(?:button|input|object|select|textarea)$/i,Ib=/^a(?:rea)?$/i,cb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
Jb=/\:|^on/,Ca,db;i.fn.extend({attr:function(c,g){return i.access(this,c,g,true,i.attr)},removeAttr:function(c){return this.each(function(){i.removeAttr(this,c)})},prop:function(c,g){return i.access(this,c,g,true,i.prop)},removeProp:function(c){c=i.propFix[c]||c;return this.each(function(){try{this[c]=d;delete this[c]}catch(g){}})},addClass:function(c){var g,l,m,p,r,w,F;if(i.isFunction(c))return this.each(function(G){i(this).addClass(c.call(this,G,this.className))});if(c&&typeof c==="string"){g=c.split(Ta);
l=0;for(m=this.length;l<m;l++){p=this[l];if(p.nodeType===1)if(!p.className&&g.length===1)p.className=c;else{r=" "+p.className+" ";w=0;for(F=g.length;w<F;w++)~r.indexOf(" "+g[w]+" ")||(r+=g[w]+" ");p.className=i.trim(r)}}}return this},removeClass:function(c){var g,l,m,p,r,w,F;if(i.isFunction(c))return this.each(function(G){i(this).removeClass(c.call(this,G,this.className))});if(c&&typeof c==="string"||c===d){g=(c||"").split(Ta);l=0;for(m=this.length;l<m;l++){p=this[l];if(p.nodeType===1&&p.className)if(c){r=
(" "+p.className+" ").replace(bb," ");w=0;for(F=g.length;w<F;w++)r=r.replace(" "+g[w]+" "," ");p.className=i.trim(r)}else p.className=""}}return this},toggleClass:function(c,g){var l=typeof c,m=typeof g==="boolean";if(i.isFunction(c))return this.each(function(p){i(this).toggleClass(c.call(this,p,this.className,g),g)});return this.each(function(){if(l==="string")for(var p,r=0,w=i(this),F=g,G=c.split(Ta);p=G[r++];){F=m?F:!w.hasClass(p);w[F?"addClass":"removeClass"](p)}else if(l==="undefined"||l==="boolean"){this.className&&
i._data(this,"__className__",this.className);this.className=this.className||c===false?"":i._data(this,"__className__")||""}})},hasClass:function(c){c=" "+c+" ";for(var g=0,l=this.length;g<l;g++)if((" "+this[g].className+" ").replace(bb," ").indexOf(c)>-1)return true;return false},val:function(c){var g,l,m=this[0];if(!arguments.length){if(m){if((g=i.valHooks[m.nodeName.toLowerCase()]||i.valHooks[m.type])&&"get"in g&&(l=g.get(m,"value"))!==d)return l;l=m.value;return typeof l==="string"?l.replace(Fb,
""):l==null?"":l}return d}var p=i.isFunction(c);return this.each(function(r){var w=i(this);if(this.nodeType===1){r=p?c.call(this,r,w.val()):c;if(r==null)r="";else if(typeof r==="number")r+="";else if(i.isArray(r))r=i.map(r,function(F){return F==null?"":F+""});g=i.valHooks[this.nodeName.toLowerCase()]||i.valHooks[this.type];if(!g||!("set"in g)||g.set(this,r,"value")===d)this.value=r}})}});i.extend({valHooks:{option:{get:function(c){var g=c.attributes.value;return!g||g.specified?c.value:c.text}},select:{get:function(c){var g,
l=c.selectedIndex,m=[],p=c.options;c=c.type==="select-one";if(l<0)return null;for(var r=c?l:0,w=c?l+1:p.length;r<w;r++){g=p[r];if(g.selected&&(i.support.optDisabled?!g.disabled:g.getAttribute("disabled")===null)&&(!g.parentNode.disabled||!i.nodeName(g.parentNode,"optgroup"))){g=i(g).val();if(c)return g;m.push(g)}}if(c&&!m.length&&p.length)return i(p[l]).val();return m},set:function(c,g){var l=i.makeArray(g);i(c).find("option").each(function(){this.selected=i.inArray(i(this).val(),l)>=0});if(!l.length)c.selectedIndex=
-1;return l}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(c,g,l,m){var p=c.nodeType;if(!c||p===3||p===8||p===2)return d;if(m&&g in i.attrFn)return i(c)[g](l);if(!("getAttribute"in c))return i.prop(c,g,l);var r,w;if(m=p!==1||!i.isXMLDoc(c)){g=i.attrFix[g]||g;w=i.attrHooks[g];if(!w)if(cb.test(g))w=db;else if(Ca&&g!=="className"&&(i.nodeName(c,"form")||Jb.test(g)))w=Ca}if(l!==d)if(l===null){i.removeAttr(c,g);
return d}else if(w&&"set"in w&&m&&(r=w.set(c,l,g))!==d)return r;else{c.setAttribute(g,""+l);return l}else if(w&&"get"in w&&m&&(r=w.get(c,g))!==null)return r;else{r=c.getAttribute(g);return r===null?d:r}},removeAttr:function(c,g){var l;if(c.nodeType===1){g=i.attrFix[g]||g;if(i.support.getSetAttribute)c.removeAttribute(g);else{i.attr(c,g,"");c.removeAttributeNode(c.getAttributeNode(g))}if(cb.test(g)&&(l=i.propFix[g]||g)in c)c[l]=false}},attrHooks:{type:{set:function(c,g){if(Gb.test(c.nodeName)&&c.parentNode)i.error("type property can't be changed");
else if(!i.support.radioValue&&g==="radio"&&i.nodeName(c,"input")){var l=c.value;c.setAttribute("type",g);if(l)c.value=l;return g}}},tabIndex:{get:function(c){var g=c.getAttributeNode("tabIndex");return g&&g.specified?parseInt(g.value,10):Hb.test(c.nodeName)||Ib.test(c.nodeName)&&c.href?0:d}},value:{get:function(c,g){if(Ca&&i.nodeName(c,"button"))return Ca.get(c,g);return g in c?c.value:null},set:function(c,g,l){if(Ca&&i.nodeName(c,"button"))return Ca.set(c,g,l);c.value=g}}},propFix:{tabindex:"tabIndex",
readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(c,g,l){var m=c.nodeType;if(!c||m===3||m===8||m===2)return d;var p,r;if(m!==1||!i.isXMLDoc(c)){g=i.propFix[g]||g;r=i.propHooks[g]}return l!==d?r&&"set"in r&&(p=r.set(c,l,g))!==d?p:(c[g]=l):r&&"get"in r&&(p=r.get(c,g))!==d?p:c[g]},propHooks:{}});
db={get:function(c,g){return i.prop(c,g)?g.toLowerCase():d},set:function(c,g,l){if(g===false)i.removeAttr(c,l);else{g=i.propFix[l]||l;if(g in c)c[g]=true;c.setAttribute(l,l.toLowerCase())}return l}};if(!i.support.getSetAttribute){i.attrFix=i.propFix;Ca=i.attrHooks.name=i.attrHooks.title=i.valHooks.button={get:function(c,g){return(c=c.getAttributeNode(g))&&c.nodeValue!==""?c.nodeValue:d},set:function(c,g,l){if(c=c.getAttributeNode(l))return c.nodeValue=g}};i.each(["width","height"],function(c,g){i.attrHooks[g]=
i.extend(i.attrHooks[g],{set:function(l,m){if(m===""){l.setAttribute(g,"auto");return m}}})})}i.support.hrefNormalized||i.each(["href","src","width","height"],function(c,g){i.attrHooks[g]=i.extend(i.attrHooks[g],{get:function(l){l=l.getAttribute(g,2);return l===null?d:l}})});if(!i.support.style)i.attrHooks.style={get:function(c){return c.style.cssText.toLowerCase()||d},set:function(c,g){return c.style.cssText=""+g}};if(!i.support.optSelected)i.propHooks.selected=i.extend(i.propHooks.selected,{get:function(){}});
i.support.checkOn||i.each(["radio","checkbox"],function(){i.valHooks[this]={get:function(c){return c.getAttribute("value")===null?"on":c.value}}});i.each(["radio","checkbox"],function(){i.valHooks[this]=i.extend(i.valHooks[this],{set:function(c,g){if(i.isArray(g))return c.checked=i.inArray(i(c).val(),g)>=0}})});var Oa=/\.(.*)$/,Ua=/^(?:textarea|input|select)$/i,yb=/\./g,zb=/ /g,Kb=/[^\w\s.|`]/g,Lb=function(c){return c.replace(Kb,"\\$&")};i.event={add:function(c,g,l,m){if(!(c.nodeType===3||c.nodeType===
8)){if(l===false)l=o;else if(!l)return;var p,r;if(l.handler){p=l;l=p.handler}if(!l.guid)l.guid=i.guid++;if(r=i._data(c)){var w=r.events,F=r.handle;if(!w)r.events=w={};if(!F)r.handle=F=function(ia){return typeof i!=="undefined"&&(!ia||i.event.triggered!==ia.type)?i.event.handle.apply(F.elem,arguments):d};F.elem=c;g=g.split(" ");for(var G,H=0,O;G=g[H++];){r=p?i.extend({},p):{handler:l,data:m};if(G.indexOf(".")>-1){O=G.split(".");G=O.shift();r.namespace=O.slice(0).sort().join(".")}else{O=[];r.namespace=
""}r.type=G;if(!r.guid)r.guid=l.guid;var ea=w[G],ga=i.event.special[G]||{};if(!ea){ea=w[G]=[];if(!ga.setup||ga.setup.call(c,m,O,F)===false)if(c.addEventListener)c.addEventListener(G,F,false);else c.attachEvent&&c.attachEvent("on"+G,F)}if(ga.add){ga.add.call(c,r);if(!r.handler.guid)r.handler.guid=l.guid}ea.push(r);i.event.global[G]=true}c=null}}},global:{},remove:function(c,g,l,m){if(!(c.nodeType===3||c.nodeType===8)){if(l===false)l=o;var p,r,w=0,F,G,H,O,ea,ga,ia=i.hasData(c)&&i._data(c),ma=ia&&ia.events;
if(ia&&ma){if(g&&g.type){l=g.handler;g=g.type}if(!g||typeof g==="string"&&g.charAt(0)==="."){g=g||"";for(p in ma)i.event.remove(c,p+g)}else{for(g=g.split(" ");p=g[w++];){O=p;F=p.indexOf(".")<0;G=[];if(!F){G=p.split(".");p=G.shift();H=new RegExp("(^|\\.)"+i.map(G.slice(0).sort(),Lb).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(ea=ma[p])if(l){O=i.event.special[p]||{};for(r=m||0;r<ea.length;r++){ga=ea[r];if(l.guid===ga.guid){if(F||H.test(ga.namespace)){m==null&&ea.splice(r--,1);O.remove&&O.remove.call(c,ga)}if(m!=
null)break}}if(ea.length===0||m!=null&&ea.length===1){if(!O.teardown||O.teardown.call(c,G)===false)i.removeEvent(c,p,ia.handle);delete ma[p]}}else for(r=0;r<ea.length;r++){ga=ea[r];if(F||H.test(ga.namespace)){i.event.remove(c,O,ga.handler,r);ea.splice(r--,1)}}}if(i.isEmptyObject(ma)){if(g=ia.handle)g.elem=null;delete ia.events;delete ia.handle;i.isEmptyObject(ia)&&i.removeData(c,d,true)}}}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(c,g,l,m){var p=c.type||c,r=[],w;if(p.indexOf("!")>=
0){p=p.slice(0,-1);w=true}if(p.indexOf(".")>=0){r=p.split(".");p=r.shift();r.sort()}if(!((!l||i.event.customEvent[p])&&!i.event.global[p])){c=typeof c==="object"?c[i.expando]?c:new i.Event(p,c):new i.Event(p);c.type=p;c.exclusive=w;c.namespace=r.join(".");c.namespace_re=new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.)?")+"(\\.|$)");if(m||!l){c.preventDefault();c.stopPropagation()}if(l){if(!(l.nodeType===3||l.nodeType===8)){c.result=d;c.target=l;g=g!=null?i.makeArray(g):[];g.unshift(c);r=l;m=p.indexOf(":")<
0?"on"+p:"";do{w=i._data(r,"handle");c.currentTarget=r;w&&w.apply(r,g);if(m&&i.acceptData(r)&&r[m]&&r[m].apply(r,g)===false){c.result=false;c.preventDefault()}r=r.parentNode||r.ownerDocument||r===c.target.ownerDocument&&b}while(r&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var F;r=i.event.special[p]||{};if((!r._default||r._default.call(l.ownerDocument,c)===false)&&!(p==="click"&&i.nodeName(l,"a"))&&i.acceptData(l)){try{if(m&&l[p]){if(F=l[m])l[m]=null;i.event.triggered=p;l[p]()}}catch(G){}if(F)l[m]=
F;i.event.triggered=d}}return c.result}}else i.each(i.cache,function(){var H=this[i.expando];H&&H.events&&H.events[p]&&i.event.trigger(c,g,H.handle.elem)})}},handle:function(c){c=i.event.fix(c||b.event);var g=((i._data(this,"events")||{})[c.type]||[]).slice(0),l=!c.exclusive&&!c.namespace,m=Array.prototype.slice.call(arguments,0);m[0]=c;c.currentTarget=this;for(var p=0,r=g.length;p<r;p++){var w=g[p];if(l||c.namespace_re.test(w.namespace)){c.handler=w.handler;c.data=w.data;c.handleObj=w;w=w.handler.apply(this,
m);if(w!==d){c.result=w;if(w===false){c.preventDefault();c.stopPropagation()}}if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(c){if(c[i.expando])return c;
var g=c;c=i.Event(g);for(var l=this.props.length,m;l;){m=this.props[--l];c[m]=g[m]}if(!c.target)c.target=c.srcElement||V;if(c.target.nodeType===3)c.target=c.target.parentNode;if(!c.relatedTarget&&c.fromElement)c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement;if(c.pageX==null&&c.clientX!=null){l=c.target.ownerDocument||V;g=l.documentElement;l=l.body;c.pageX=c.clientX+(g&&g.scrollLeft||l&&l.scrollLeft||0)-(g&&g.clientLeft||l&&l.clientLeft||0);c.pageY=c.clientY+(g&&g.scrollTop||l&&
l.scrollTop||0)-(g&&g.clientTop||l&&l.clientTop||0)}if(c.which==null&&(c.charCode!=null||c.keyCode!=null))c.which=c.charCode!=null?c.charCode:c.keyCode;if(!c.metaKey&&c.ctrlKey)c.metaKey=c.ctrlKey;if(!c.which&&c.button!==d)c.which=c.button&1?1:c.button&2?3:c.button&4?2:0;return c},guid:1E8,proxy:i.proxy,special:{ready:{setup:i.bindReady,teardown:i.noop},live:{add:function(c){i.event.add(this,L(c.origType,c.selector),i.extend({},c,{handler:D,guid:c.handler.guid}))},remove:function(c){i.event.remove(this,
L(c.origType,c.selector),c)}},beforeunload:{setup:function(c,g,l){if(i.isWindow(this))this.onbeforeunload=l},teardown:function(c,g){if(this.onbeforeunload===g)this.onbeforeunload=null}}}};i.removeEvent=V.removeEventListener?function(c,g,l){c.removeEventListener&&c.removeEventListener(g,l,false)}:function(c,g,l){c.detachEvent&&c.detachEvent("on"+g,l)};i.Event=function(c,g){if(!this.preventDefault)return new i.Event(c,g);if(c&&c.type){this.originalEvent=c;this.type=c.type;this.isDefaultPrevented=c.defaultPrevented||
c.returnValue===false||c.getPreventDefault&&c.getPreventDefault()?v:o}else this.type=c;g&&i.extend(this,g);this.timeStamp=i.now();this[i.expando]=true};i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=v;var c=this.originalEvent;if(c)if(c.preventDefault)c.preventDefault();else c.returnValue=false},stopPropagation:function(){this.isPropagationStopped=v;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=
v;this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o};var eb=function(c){var g=c.relatedTarget,l=false,m=c.type;c.type=c.data;if(g!==this){if(g)l=i.contains(this,g);if(!l){i.event.handle.apply(this,arguments);c.type=m}}},fb=function(c){c.type=c.data;i.event.handle.apply(this,arguments)};i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(c,g){i.event.special[c]={setup:function(l){i.event.add(this,g,l&&l.selector?fb:eb,c)},teardown:function(l){i.event.remove(this,
g,l&&l.selector?fb:eb)}}});if(!i.support.submitBubbles)i.event.special.submit={setup:function(){if(i.nodeName(this,"form"))return false;else{i.event.add(this,"click.specialSubmit",function(c){var g=c.target,l=g.type;if((l==="submit"||l==="image")&&i(g).closest("form").length)u("submit",this,arguments)});i.event.add(this,"keypress.specialSubmit",function(c){var g=c.target,l=g.type;if((l==="text"||l==="password")&&i(g).closest("form").length&&c.keyCode===13)u("submit",this,arguments)})}},teardown:function(){i.event.remove(this,
".specialSubmit")}};if(!i.support.changeBubbles){var Ja,gb=function(c){var g=c.type,l=c.value;if(g==="radio"||g==="checkbox")l=c.checked;else if(g==="select-multiple")l=c.selectedIndex>-1?i.map(c.options,function(m){return m.selected}).join("-"):"";else if(i.nodeName(c,"select"))l=c.selectedIndex;return l},Ma=function(c,g){var l=c.target,m,p;if(!(!Ua.test(l.nodeName)||l.readOnly)){m=i._data(l,"_change_data");p=gb(l);if(c.type!=="focusout"||l.type!=="radio")i._data(l,"_change_data",p);if(!(m===d||
p===m))if(m!=null||p){c.type="change";c.liveFired=d;i.event.trigger(c,g,l)}}};i.event.special.change={filters:{focusout:Ma,beforedeactivate:Ma,click:function(c){var g=c.target,l=i.nodeName(g,"input")?g.type:"";if(l==="radio"||l==="checkbox"||i.nodeName(g,"select"))Ma.call(this,c)},keydown:function(c){var g=c.target,l=i.nodeName(g,"input")?g.type:"";if(c.keyCode===13&&!i.nodeName(g,"textarea")||c.keyCode===32&&(l==="checkbox"||l==="radio")||l==="select-multiple")Ma.call(this,c)},beforeactivate:function(c){c=
c.target;i._data(c,"_change_data",gb(c))}},setup:function(){if(this.type==="file")return false;for(var c in Ja)i.event.add(this,c+".specialChange",Ja[c]);return Ua.test(this.nodeName)},teardown:function(){i.event.remove(this,".specialChange");return Ua.test(this.nodeName)}};Ja=i.event.special.change.filters;Ja.focus=Ja.beforeactivate}i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(c,g){function l(p){var r=i.event.fix(p);r.type=g;r.originalEvent={};i.event.trigger(r,null,
r.target);r.isDefaultPrevented()&&p.preventDefault()}var m=0;i.event.special[g]={setup:function(){m++===0&&V.addEventListener(c,l,true)},teardown:function(){--m===0&&V.removeEventListener(c,l,true)}}});i.each(["bind","one"],function(c,g){i.fn[g]=function(l,m,p){var r;if(typeof l==="object"){for(var w in l)this[g](w,m,l[w],p);return this}if(arguments.length===2||m===false){p=m;m=d}if(g==="one"){r=function(G){i(this).unbind(G,r);return p.apply(this,arguments)};r.guid=p.guid||i.guid++}else r=p;if(l===
"unload"&&g!=="one")this.one(l,m,p);else{w=0;for(var F=this.length;w<F;w++)i.event.add(this[w],l,r,m)}return this}});i.fn.extend({unbind:function(c,g){if(typeof c==="object"&&!c.preventDefault)for(var l in c)this.unbind(l,c[l]);else{l=0;for(var m=this.length;l<m;l++)i.event.remove(this[l],c,g)}return this},delegate:function(c,g,l,m){return this.live(g,l,m,c)},undelegate:function(c,g,l){return arguments.length===0?this.unbind("live"):this.die(g,null,l,c)},trigger:function(c,g){return this.each(function(){i.event.trigger(c,
g,this)})},triggerHandler:function(c,g){if(this[0])return i.event.trigger(c,g,this[0],true)},toggle:function(c){var g=arguments,l=c.guid||i.guid++,m=0,p=function(r){var w=(i.data(this,"lastToggle"+c.guid)||0)%m;i.data(this,"lastToggle"+c.guid,w+1);r.preventDefault();return g[w].apply(this,arguments)||false};for(p.guid=l;m<g.length;)g[m++].guid=l;return this.click(p)},hover:function(c,g){return this.mouseenter(c).mouseleave(g||c)}});var Va={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};
i.each(["live","die"],function(c,g){i.fn[g]=function(l,m,p,r){var w=0,F,G,H=r||this.selector,O=r?this:i(this.context);if(typeof l==="object"&&!l.preventDefault){for(F in l)O[g](F,m,l[F],H);return this}if(g==="die"&&!l&&r&&r.charAt(0)==="."){O.unbind(r);return this}if(m===false||i.isFunction(m)){p=m||o;m=d}for(l=(l||"").split(" ");(r=l[w++])!=null;){F=Oa.exec(r);G="";if(F){G=F[0];r=r.replace(Oa,"")}if(r==="hover")l.push("mouseenter"+G,"mouseleave"+G);else{F=r;if(Va[r]){l.push(Va[r]+G);r+=G}else r=
(Va[r]||r)+G;if(g==="live"){G=0;for(var ea=O.length;G<ea;G++)i.event.add(O[G],"live."+L(r,H),{data:m,selector:H,handler:p,origType:r,origHandler:p,preType:F})}else O.unbind("live."+L(r,H),p)}}return this}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(c,g){i.fn[g]=function(l,m){if(m==null){m=l;l=null}return arguments.length>0?this.bind(g,
l,m):this.trigger(g)};if(i.attrFn)i.attrFn[g]=true});(function(){function c(t,C,J,K,M,R){M=0;for(var aa=K.length;M<aa;M++){var X=K[M];if(X){var ja=false;for(X=X[t];X;){if(X.sizcache===J){ja=K[X.sizset];break}if(X.nodeType===1&&!R){X.sizcache=J;X.sizset=M}if(X.nodeName.toLowerCase()===C){ja=X;break}X=X[t]}K[M]=ja}}}function g(t,C,J,K,M,R){M=0;for(var aa=K.length;M<aa;M++){var X=K[M];if(X){var ja=false;for(X=X[t];X;){if(X.sizcache===J){ja=K[X.sizset];break}if(X.nodeType===1){if(!R){X.sizcache=J;X.sizset=
M}if(typeof C!=="string"){if(X===C){ja=true;break}}else if(H.filter(C,[X]).length>0){ja=X;break}}X=X[t]}K[M]=ja}}}var l=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,m=0,p=Object.prototype.toString,r=false,w=true,F=/\\/g,G=/\W/;[0,0].sort(function(){w=false;return 0});var H=function(t,C,J,K){J=J||[];var M=C=C||V;if(C.nodeType!==1&&C.nodeType!==9)return[];if(!t||typeof t!=="string")return J;var R,aa,X,ja,ta,sa=
true,ua=H.isXML(C),A=[],T=t;do{l.exec("");if(R=l.exec(T)){T=R[3];A.push(R[1]);if(R[2]){ja=R[3];break}}}while(R);if(A.length>1&&ea.exec(t))if(A.length===2&&O.relative[A[0]])aa=ya(A[0]+A[1],C);else for(aa=O.relative[A[0]]?[C]:H(A.shift(),C);A.length;){t=A.shift();if(O.relative[t])t+=A.shift();aa=ya(t,aa)}else{if(!K&&A.length>1&&C.nodeType===9&&!ua&&O.match.ID.test(A[0])&&!O.match.ID.test(A[A.length-1])){R=H.find(A.shift(),C,ua);C=R.expr?H.filter(R.expr,R.set)[0]:R.set[0]}if(C){R=K?{expr:A.pop(),set:ma(K)}:
H.find(A.pop(),A.length===1&&(A[0]==="~"||A[0]==="+")&&C.parentNode?C.parentNode:C,ua);aa=R.expr?H.filter(R.expr,R.set):R.set;if(A.length>0)X=ma(aa);else sa=false;for(;A.length;){R=ta=A.pop();if(O.relative[ta])R=A.pop();else ta="";if(R==null)R=C;O.relative[ta](X,R,ua)}}else X=[]}X||(X=aa);X||H.error(ta||t);if(p.call(X)==="[object Array]")if(sa)if(C&&C.nodeType===1)for(t=0;X[t]!=null;t++){if(X[t]&&(X[t]===true||X[t].nodeType===1&&H.contains(C,X[t])))J.push(aa[t])}else for(t=0;X[t]!=null;t++)X[t]&&
X[t].nodeType===1&&J.push(aa[t]);else J.push.apply(J,X);else ma(X,J);if(ja){H(ja,M,J,K);H.uniqueSort(J)}return J};H.uniqueSort=function(t){if(pa){r=w;t.sort(pa);if(r)for(var C=1;C<t.length;C++)t[C]===t[C-1]&&t.splice(C--,1)}return t};H.matches=function(t,C){return H(t,null,null,C)};H.matchesSelector=function(t,C){return H(C,null,null,[t]).length>0};H.find=function(t,C,J){var K;if(!t)return[];for(var M=0,R=O.order.length;M<R;M++){var aa,X=O.order[M];if(aa=O.leftMatch[X].exec(t)){var ja=aa[1];aa.splice(1,
1);if(ja.substr(ja.length-1)!=="\\"){aa[1]=(aa[1]||"").replace(F,"");K=O.find[X](aa,C,J);if(K!=null){t=t.replace(O.match[X],"");break}}}}K||(K=typeof C.getElementsByTagName!=="undefined"?C.getElementsByTagName("*"):[]);return{set:K,expr:t}};H.filter=function(t,C,J,K){for(var M,R,aa=t,X=[],ja=C,ta=C&&C[0]&&H.isXML(C[0]);t&&C.length;){for(var sa in O.filter)if((M=O.leftMatch[sa].exec(t))!=null&&M[2]){var ua,A,T=O.filter[sa];A=M[1];R=false;M.splice(1,1);if(A.substr(A.length-1)!=="\\"){if(ja===X)X=[];
if(O.preFilter[sa])if(M=O.preFilter[sa](M,ja,J,X,K,ta)){if(M===true)continue}else R=ua=true;if(M)for(var Z=0;(A=ja[Z])!=null;Z++)if(A){ua=T(A,M,Z,ja);var ca=K^!!ua;if(J&&ua!=null)if(ca)R=true;else ja[Z]=false;else if(ca){X.push(A);R=true}}if(ua!==d){J||(ja=X);t=t.replace(O.match[sa],"");if(!R)return[];break}}}if(t===aa)if(R==null)H.error(t);else break;aa=t}return ja};H.error=function(t){throw"Syntax error, unrecognized expression: "+t;};var O=H.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")},type:function(t){return t.getAttribute("type")}},relative:{"+":function(t,C){var J=typeof C==="string",K=J&&!G.test(C);J=J&&!K;if(K)C=C.toLowerCase();K=0;for(var M=t.length,R;K<M;K++)if(R=t[K]){for(;(R=R.previousSibling)&&R.nodeType!==1;);t[K]=J||R&&R.nodeName.toLowerCase()===C?R||false:R===C}J&&H.filter(C,t,true)},">":function(t,C){var J,K=typeof C==="string",M=0,R=t.length;if(K&&
!G.test(C))for(C=C.toLowerCase();M<R;M++){if(J=t[M]){J=J.parentNode;t[M]=J.nodeName.toLowerCase()===C?J:false}}else{for(;M<R;M++)if(J=t[M])t[M]=K?J.parentNode:J.parentNode===C;K&&H.filter(C,t,true)}},"":function(t,C,J){var K,M=m++,R=g;if(typeof C==="string"&&!G.test(C)){K=C=C.toLowerCase();R=c}R("parentNode",C,M,t,K,J)},"~":function(t,C,J){var K,M=m++,R=g;if(typeof C==="string"&&!G.test(C)){K=C=C.toLowerCase();R=c}R("previousSibling",C,M,t,K,J)}},find:{ID:function(t,C,J){if(typeof C.getElementById!==
"undefined"&&!J)return(t=C.getElementById(t[1]))&&t.parentNode?[t]:[]},NAME:function(t,C){if(typeof C.getElementsByName!=="undefined"){var J=[];C=C.getElementsByName(t[1]);for(var K=0,M=C.length;K<M;K++)C[K].getAttribute("name")===t[1]&&J.push(C[K]);return J.length===0?null:J}},TAG:function(t,C){if(typeof C.getElementsByTagName!=="undefined")return C.getElementsByTagName(t[1])}},preFilter:{CLASS:function(t,C,J,K,M,R){t=" "+t[1].replace(F,"")+" ";if(R)return t;R=0;for(var aa;(aa=C[R])!=null;R++)if(aa)if(M^
(aa.className&&(" "+aa.className+" ").replace(/[\t\n\r]/g," ").indexOf(t)>=0))J||K.push(aa);else if(J)C[R]=false;return false},ID:function(t){return t[1].replace(F,"")},TAG:function(t){return t[1].replace(F,"").toLowerCase()},CHILD:function(t){if(t[1]==="nth"){t[2]||H.error(t[0]);t[2]=t[2].replace(/^\+|\s*/g,"");var C=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(t[2]==="even"&&"2n"||t[2]==="odd"&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=C[1]+(C[2]||1)-0;t[3]=C[3]-0}else t[2]&&H.error(t[0]);t[0]=m++;
return t},ATTR:function(t,C,J,K,M,R){C=t[1]=t[1].replace(F,"");if(!R&&O.attrMap[C])t[1]=O.attrMap[C];t[4]=(t[4]||t[5]||"").replace(F,"");if(t[2]==="~=")t[4]=" "+t[4]+" ";return t},PSEUDO:function(t,C,J,K,M){if(t[1]==="not")if((l.exec(t[3])||"").length>1||/^\w/.test(t[3]))t[3]=H(t[3],null,null,C);else{t=H.filter(t[3],C,J,true^M);J||K.push.apply(K,t);return false}else if(O.match.POS.test(t[0])||O.match.CHILD.test(t[0]))return true;return t},POS:function(t){t.unshift(true);return t}},filters:{enabled:function(t){return t.disabled===
false&&t.type!=="hidden"},disabled:function(t){return t.disabled===true},checked:function(t){return t.checked===true},selected:function(t){return t.selected===true},parent:function(t){return!!t.firstChild},empty:function(t){return!t.firstChild},has:function(t,C,J){return!!H(J[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){var C=t.getAttribute("type"),J=t.type;return t.nodeName.toLowerCase()==="input"&&"text"===J&&(C===J||C===null)},radio:function(t){return t.nodeName.toLowerCase()===
"input"&&"radio"===t.type},checkbox:function(t){return t.nodeName.toLowerCase()==="input"&&"checkbox"===t.type},file:function(t){return t.nodeName.toLowerCase()==="input"&&"file"===t.type},password:function(t){return t.nodeName.toLowerCase()==="input"&&"password"===t.type},submit:function(t){var C=t.nodeName.toLowerCase();return(C==="input"||C==="button")&&"submit"===t.type},image:function(t){return t.nodeName.toLowerCase()==="input"&&"image"===t.type},reset:function(t){var C=t.nodeName.toLowerCase();
return(C==="input"||C==="button")&&"reset"===t.type},button:function(t){var C=t.nodeName.toLowerCase();return C==="input"&&"button"===t.type||C==="button"},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)},focus:function(t){return t===t.ownerDocument.activeElement}},setFilters:{first:function(t,C){return C===0},last:function(t,C,J,K){return C===K.length-1},even:function(t,C){return C%2===0},odd:function(t,C){return C%2===1},lt:function(t,C,J){return C<J[3]-0},gt:function(t,
C,J){return C>J[3]-0},nth:function(t,C,J){return J[3]-0===C},eq:function(t,C,J){return J[3]-0===C}},filter:{PSEUDO:function(t,C,J,K){var M=C[1],R=O.filters[M];if(R)return R(t,J,C,K);else if(M==="contains")return(t.textContent||t.innerText||H.getText([t])||"").indexOf(C[3])>=0;else if(M==="not"){C=C[3];J=0;for(K=C.length;J<K;J++)if(C[J]===t)return false;return true}else H.error(M)},CHILD:function(t,C){var J=C[1],K=t;switch(J){case "only":case "first":for(;K=K.previousSibling;)if(K.nodeType===1)return false;
if(J==="first")return true;K=t;case "last":for(;K=K.nextSibling;)if(K.nodeType===1)return false;return true;case "nth":J=C[2];var M=C[3];if(J===1&&M===0)return true;C=C[0];var R=t.parentNode;if(R&&(R.sizcache!==C||!t.nodeIndex)){var aa=0;for(K=R.firstChild;K;K=K.nextSibling)if(K.nodeType===1)K.nodeIndex=++aa;R.sizcache=C}t=t.nodeIndex-M;return J===0?t===0:t%J===0&&t/J>=0}},ID:function(t,C){return t.nodeType===1&&t.getAttribute("id")===C},TAG:function(t,C){return C==="*"&&t.nodeType===1||t.nodeName.toLowerCase()===
C},CLASS:function(t,C){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(C)>-1},ATTR:function(t,C){var J=C[1];t=O.attrHandle[J]?O.attrHandle[J](t):t[J]!=null?t[J]:t.getAttribute(J);J=t+"";var K=C[2];C=C[4];return t==null?K==="!=":K==="="?J===C:K==="*="?J.indexOf(C)>=0:K==="~="?(" "+J+" ").indexOf(C)>=0:!C?J&&t!==false:K==="!="?J!==C:K==="^="?J.indexOf(C)===0:K==="$="?J.substr(J.length-C.length)===C:K==="|="?J===C||J.substr(0,C.length+1)===C+"-":false},POS:function(t,C,J,K){var M=O.setFilters[C[2]];
if(M)return M(t,J,C,K)}}},ea=O.match.POS,ga=function(t,C){return"\\"+(C-0+1)};for(var ia in O.match){O.match[ia]=new RegExp(O.match[ia].source+/(?![^\[]*\])(?![^\(]*\))/.source);O.leftMatch[ia]=new RegExp(/(^(?:.|\r|\n)*?)/.source+O.match[ia].source.replace(/\\(\d+)/g,ga))}var ma=function(t,C){t=Array.prototype.slice.call(t,0);if(C){C.push.apply(C,t);return C}return t};try{Array.prototype.slice.call(V.documentElement.childNodes,0)}catch(Ba){ma=function(t,C){var J=0;C=C||[];if(p.call(t)==="[object Array]")Array.prototype.push.apply(C,
t);else if(typeof t.length==="number")for(var K=t.length;J<K;J++)C.push(t[J]);else for(;t[J];J++)C.push(t[J]);return C}}var pa,wa;if(V.documentElement.compareDocumentPosition)pa=function(t,C){if(t===C){r=true;return 0}if(!t.compareDocumentPosition||!C.compareDocumentPosition)return t.compareDocumentPosition?-1:1;return t.compareDocumentPosition(C)&4?-1:1};else{pa=function(t,C){if(t===C){r=true;return 0}else if(t.sourceIndex&&C.sourceIndex)return t.sourceIndex-C.sourceIndex;var J,K,M=[],R=[];J=t.parentNode;
K=C.parentNode;var aa=J;if(J===K)return wa(t,C);else if(J){if(!K)return 1}else return-1;for(;aa;){M.unshift(aa);aa=aa.parentNode}for(aa=K;aa;){R.unshift(aa);aa=aa.parentNode}J=M.length;K=R.length;for(aa=0;aa<J&&aa<K;aa++)if(M[aa]!==R[aa])return wa(M[aa],R[aa]);return aa===J?wa(t,R[aa],-1):wa(M[aa],C,1)};wa=function(t,C,J){if(t===C)return J;for(t=t.nextSibling;t;){if(t===C)return-1;t=t.nextSibling}return 1}}H.getText=function(t){for(var C="",J,K=0;t[K];K++){J=t[K];if(J.nodeType===3||J.nodeType===4)C+=
J.nodeValue;else if(J.nodeType!==8)C+=H.getText(J.childNodes)}return C};(function(){var t=V.createElement("div"),C="script"+(new Date).getTime(),J=V.documentElement;t.innerHTML="<a name='"+C+"'/>";J.insertBefore(t,J.firstChild);if(V.getElementById(C)){O.find.ID=function(K,M,R){if(typeof M.getElementById!=="undefined"&&!R)return(M=M.getElementById(K[1]))?M.id===K[1]||typeof M.getAttributeNode!=="undefined"&&M.getAttributeNode("id").nodeValue===K[1]?[M]:d:[]};O.filter.ID=function(K,M){var R=typeof K.getAttributeNode!==
"undefined"&&K.getAttributeNode("id");return K.nodeType===1&&R&&R.nodeValue===M}}J.removeChild(t);J=t=null})();(function(){var t=V.createElement("div");t.appendChild(V.createComment(""));if(t.getElementsByTagName("*").length>0)O.find.TAG=function(C,J){J=J.getElementsByTagName(C[1]);if(C[1]==="*"){C=[];for(var K=0;J[K];K++)J[K].nodeType===1&&C.push(J[K]);J=C}return J};t.innerHTML="<a href='#'></a>";if(t.firstChild&&typeof t.firstChild.getAttribute!=="undefined"&&t.firstChild.getAttribute("href")!==
"#")O.attrHandle.href=function(C){return C.getAttribute("href",2)};t=null})();V.querySelectorAll&&function(){var t=H,C=V.createElement("div");C.innerHTML="<p class='TEST'></p>";if(!(C.querySelectorAll&&C.querySelectorAll(".TEST").length===0)){H=function(K,M,R,aa){M=M||V;if(!aa&&!H.isXML(M)){var X=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(K);if(X&&(M.nodeType===1||M.nodeType===9))if(X[1])return ma(M.getElementsByTagName(K),R);else if(X[2]&&O.find.CLASS&&M.getElementsByClassName)return ma(M.getElementsByClassName(X[2]),
R);if(M.nodeType===9){if(K==="body"&&M.body)return ma([M.body],R);else if(X&&X[3]){var ja=M.getElementById(X[3]);if(ja&&ja.parentNode){if(ja.id===X[3])return ma([ja],R)}else return ma([],R)}try{return ma(M.querySelectorAll(K),R)}catch(ta){}}else if(M.nodeType===1&&M.nodeName.toLowerCase()!=="object"){X=M;var sa=(ja=M.getAttribute("id"))||"__sizzle__",ua=M.parentNode,A=/^\s*[+~]/.test(K);if(ja)sa=sa.replace(/'/g,"\\$&");else M.setAttribute("id",sa);if(A&&ua)M=M.parentNode;try{if(!A||ua)return ma(M.querySelectorAll("[id='"+
sa+"'] "+K),R)}catch(T){}finally{ja||X.removeAttribute("id")}}}return t(K,M,R,aa)};for(var J in t)H[J]=t[J];C=null}}();(function(){var t=V.documentElement,C=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector;if(C){var J=!C.call(V.createElement("div"),"div"),K=false;try{C.call(V.documentElement,"[test!='']:sizzle")}catch(M){K=true}H.matchesSelector=function(R,aa){aa=aa.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!H.isXML(R))try{if(K||!O.match.PSEUDO.test(aa)&&!/!=/.test(aa)){var X=
C.call(R,aa);if(X||!J||R.document&&R.document.nodeType!==11)return X}}catch(ja){}return H(aa,null,null,[R]).length>0}}})();(function(){var t=V.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!t.getElementsByClassName||t.getElementsByClassName("e").length===0)){t.lastChild.className="e";if(t.getElementsByClassName("e").length!==1){O.order.splice(1,0,"CLASS");O.find.CLASS=function(C,J,K){if(typeof J.getElementsByClassName!=="undefined"&&!K)return J.getElementsByClassName(C[1])};
t=null}}})();H.contains=V.documentElement.contains?function(t,C){return t!==C&&(t.contains?t.contains(C):true)}:V.documentElement.compareDocumentPosition?function(t,C){return!!(t.compareDocumentPosition(C)&16)}:function(){return false};H.isXML=function(t){return(t=(t?t.ownerDocument||t:0).documentElement)?t.nodeName!=="HTML":false};var ya=function(t,C){var J,K=[],M="";for(C=C.nodeType?[C]:C;J=O.match.PSEUDO.exec(t);){M+=J[0];t=t.replace(O.match.PSEUDO,"")}t=O.relative[t]?t+"*":t;J=0;for(var R=C.length;J<
R;J++)H(t,C[J],K);return H.filter(M,K)};i.find=H;i.expr=H.selectors;i.expr[":"]=i.expr.filters;i.unique=H.uniqueSort;i.text=H.getText;i.isXMLDoc=H.isXML;i.contains=H.contains})();var Mb=/Until$/,Nb=/^(?:parents|prevUntil|prevAll)/,Ob=/,/,Ab=/^.[^:#\[\.,]*$/,Pb=Array.prototype.slice,hb=i.expr.match.POS,Qb={children:true,contents:true,next:true,prev:true};i.fn.extend({find:function(c){var g=this,l,m;if(typeof c!=="string")return i(c).filter(function(){l=0;for(m=g.length;l<m;l++)if(i.contains(g[l],this))return true});
var p=this.pushStack("","find",c),r,w,F;l=0;for(m=this.length;l<m;l++){r=p.length;i.find(c,this[l],p);if(l>0)for(w=r;w<p.length;w++)for(F=0;F<r;F++)if(p[F]===p[w]){p.splice(w--,1);break}}return p},has:function(c){var g=i(c);return this.filter(function(){for(var l=0,m=g.length;l<m;l++)if(i.contains(this,g[l]))return true})},not:function(c){return this.pushStack(Q(this,c,false),"not",c)},filter:function(c){return this.pushStack(Q(this,c,true),"filter",c)},is:function(c){return!!c&&(typeof c==="string"?
i.filter(c,this).length>0:this.filter(c).length>0)},closest:function(c,g){var l=[],m,p,r=this[0];if(i.isArray(c)){var w,F={},G=1;if(r&&c.length){m=0;for(p=c.length;m<p;m++){w=c[m];F[w]||(F[w]=hb.test(w)?i(w,g||this.context):w)}for(;r&&r.ownerDocument&&r!==g;){for(w in F){c=F[w];if(c.jquery?c.index(r)>-1:i(r).is(c))l.push({selector:w,elem:r,level:G})}r=r.parentNode;G++}}return l}w=hb.test(c)||typeof c!=="string"?i(c,g||this.context):0;m=0;for(p=this.length;m<p;m++)for(r=this[m];r;)if(w?w.index(r)>
-1:i.find.matchesSelector(r,c)){l.push(r);break}else{r=r.parentNode;if(!r||!r.ownerDocument||r===g||r.nodeType===11)break}l=l.length>1?i.unique(l):l;return this.pushStack(l,"closest",c)},index:function(c){if(!c||typeof c==="string")return i.inArray(this[0],c?i(c):this.parent().children());return i.inArray(c.jquery?c[0]:c,this)},add:function(c,g){c=typeof c==="string"?i(c,g):i.makeArray(c&&c.nodeType?[c]:c);g=i.merge(this.get(),c);return this.pushStack(N(c[0])||N(g[0])?g:i.unique(g))},andSelf:function(){return this.add(this.prevObject)}});
i.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return i.dir(c,"parentNode")},parentsUntil:function(c,g,l){return i.dir(c,"parentNode",l)},next:function(c){return i.nth(c,2,"nextSibling")},prev:function(c){return i.nth(c,2,"previousSibling")},nextAll:function(c){return i.dir(c,"nextSibling")},prevAll:function(c){return i.dir(c,"previousSibling")},nextUntil:function(c,g,l){return i.dir(c,"nextSibling",l)},prevUntil:function(c,g,l){return i.dir(c,"previousSibling",
l)},siblings:function(c){return i.sibling(c.parentNode.firstChild,c)},children:function(c){return i.sibling(c.firstChild)},contents:function(c){return i.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:i.makeArray(c.childNodes)}},function(c,g){i.fn[c]=function(l,m){var p=i.map(this,g,l),r=Pb.call(arguments);Mb.test(c)||(m=l);if(m&&typeof m==="string")p=i.filter(m,p);p=this.length>1&&!Qb[c]?i.unique(p):p;if((this.length>1||Ob.test(m))&&Nb.test(c))p=p.reverse();return this.pushStack(p,
c,r.join(","))}});i.extend({filter:function(c,g,l){if(l)c=":not("+c+")";return g.length===1?i.find.matchesSelector(g[0],c)?[g[0]]:[]:i.find.matches(c,g)},dir:function(c,g,l){var m=[];for(c=c[g];c&&c.nodeType!==9&&(l===d||c.nodeType!==1||!i(c).is(l));){c.nodeType===1&&m.push(c);c=c[g]}return m},nth:function(c,g,l){g=g||1;for(var m=0;c;c=c[l])if(c.nodeType===1&&++m===g)break;return c},sibling:function(c,g){for(var l=[];c;c=c.nextSibling)c.nodeType===1&&c!==g&&l.push(c);return l}});var Rb=/ jQuery\d+="(?:\d+|null)"/g,
Wa=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,jb=/<([\w:]+)/,Sb=/<tbody/i,Tb=/<|&#?\w+;/,kb=/<(?:script|object|embed|option|style)/i,lb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ub=/\/(java|ecma)script/i,Bb=/^\s*<!(?:\[CDATA\[|\-\-)/,xa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>",
"</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};xa.optgroup=xa.option;xa.tbody=xa.tfoot=xa.colgroup=xa.caption=xa.thead;xa.th=xa.td;if(!i.support.htmlSerialize)xa._default=[1,"div<div>","</div>"];i.fn.extend({text:function(c){if(i.isFunction(c))return this.each(function(g){var l=i(this);l.text(c.call(this,g,l.text()))});if(typeof c!=="object"&&c!==d)return this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(c));return i.text(this)},wrapAll:function(c){if(i.isFunction(c))return this.each(function(l){i(this).wrapAll(c.call(this,
l))});if(this[0]){var g=i(c,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&g.insertBefore(this[0]);g.map(function(){for(var l=this;l.firstChild&&l.firstChild.nodeType===1;)l=l.firstChild;return l}).append(this)}return this},wrapInner:function(c){if(i.isFunction(c))return this.each(function(g){i(this).wrapInner(c.call(this,g))});return this.each(function(){var g=i(this),l=g.contents();l.length?l.wrapAll(c):g.append(c)})},wrap:function(c){return this.each(function(){i(this).wrapAll(c)})},
unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(g){this.parentNode.insertBefore(g,this)});else if(arguments.length){var c=
i(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(g){this.parentNode.insertBefore(g,this.nextSibling)});else if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,i(arguments[0]).toArray());return c}},remove:function(c,g){for(var l=0,m;(m=this[l])!=null;l++)if(!c||i.filter(c,[m]).length){if(!g&&m.nodeType===1){i.cleanData(m.getElementsByTagName("*"));
i.cleanData([m])}m.parentNode&&m.parentNode.removeChild(m)}return this},empty:function(){for(var c=0,g;(g=this[c])!=null;c++)for(g.nodeType===1&&i.cleanData(g.getElementsByTagName("*"));g.firstChild;)g.removeChild(g.firstChild);return this},clone:function(c,g){c=c==null?false:c;g=g==null?c:g;return this.map(function(){return i.clone(this,c,g)})},html:function(c){if(c===d)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Rb,""):null;else if(typeof c==="string"&&!kb.test(c)&&(i.support.leadingWhitespace||
!Wa.test(c))&&!xa[(jb.exec(c)||["",""])[1].toLowerCase()]){c=c.replace(ib,"<$1></$2>");try{for(var g=0,l=this.length;g<l;g++)if(this[g].nodeType===1){i.cleanData(this[g].getElementsByTagName("*"));this[g].innerHTML=c}}catch(m){this.empty().append(c)}}else i.isFunction(c)?this.each(function(p){var r=i(this);r.html(c.call(this,p,r.html()))}):this.empty().append(c);return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(i.isFunction(c))return this.each(function(g){var l=i(this),m=l.html();
l.replaceWith(c.call(this,g,m))});if(typeof c!=="string")c=i(c).detach();return this.each(function(){var g=this.nextSibling,l=this.parentNode;i(this).remove();g?i(g).before(c):i(l).append(c)})}else return this.length?this.pushStack(i(i.isFunction(c)?c():c),"replaceWith",c):this},detach:function(c){return this.remove(c,true)},domManip:function(c,g,l){var m,p,r,w=c[0],F=[];if(!i.support.checkClone&&arguments.length===3&&typeof w==="string"&&lb.test(w))return this.each(function(){i(this).domManip(c,
g,l,true)});if(i.isFunction(w))return this.each(function(ea){var ga=i(this);c[0]=w.call(this,ea,g?ga.html():d);ga.domManip(c,g,l)});if(this[0]){m=w&&w.parentNode;m=i.support.parentNode&&m&&m.nodeType===11&&m.childNodes.length===this.length?{fragment:m}:i.buildFragment(c,this,F);r=m.fragment;if(p=r.childNodes.length===1?(r=r.firstChild):r.firstChild){g=g&&i.nodeName(p,"tr");for(var G=0,H=this.length,O=H-1;G<H;G++)l.call(g?P(this[G],p):this[G],m.cacheable||H>1&&G<O?i.clone(r,true,true):r)}F.length&&
i.each(F,oa)}return this}});i.buildFragment=function(c,g,l){var m,p,r,w;if(g&&g[0])w=g[0].ownerDocument||g[0];w.createDocumentFragment||(w=V);if(c.length===1&&typeof c[0]==="string"&&c[0].length<512&&w===V&&c[0].charAt(0)==="<"&&!kb.test(c[0])&&(i.support.checkClone||!lb.test(c[0]))){p=true;if((r=i.fragments[c[0]])&&r!==1)m=r}if(!m){m=w.createDocumentFragment();i.clean(c,w,m,l)}if(p)i.fragments[c[0]]=r?m:1;return{fragment:m,cacheable:p}};i.fragments={};i.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,g){i.fn[c]=function(l){var m=[];l=i(l);var p=this.length===1&&this[0].parentNode;if(p&&p.nodeType===11&&p.childNodes.length===1&&l.length===1){l[g](this[0]);return this}else{p=0;for(var r=l.length;p<r;p++){var w=(p>0?this.clone(true):this).get();i(l[p])[g](w);m=m.concat(w)}return this.pushStack(m,c,l.selector)}}});i.extend({clone:function(c,g,l){var m=c.cloneNode(true),p,r,w;if((!i.support.noCloneEvent||!i.support.noCloneChecked)&&
(c.nodeType===1||c.nodeType===11)&&!i.isXMLDoc(c)){W(c,m);p=da(c);r=da(m);for(w=0;p[w];++w)W(p[w],r[w])}if(g){U(c,m);if(l){p=da(c);r=da(m);for(w=0;p[w];++w)U(p[w],r[w])}}return m},clean:function(c,g,l,m){g=g||V;if(typeof g.createElement==="undefined")g=g.ownerDocument||g[0]&&g[0].ownerDocument||V;for(var p=[],r,w=0,F;(F=c[w])!=null;w++){if(typeof F==="number")F+="";if(F){if(typeof F==="string")if(Tb.test(F)){F=F.replace(ib,"<$1></$2>");r=(jb.exec(F)||["",""])[1].toLowerCase();var G=xa[r]||xa._default,
H=G[0],O=g.createElement("div");for(O.innerHTML=G[1]+F+G[2];H--;)O=O.lastChild;if(!i.support.tbody){H=Sb.test(F);G=r==="table"&&!H?O.firstChild&&O.firstChild.childNodes:G[1]==="<table>"&&!H?O.childNodes:[];for(r=G.length-1;r>=0;--r)i.nodeName(G[r],"tbody")&&!G[r].childNodes.length&&G[r].parentNode.removeChild(G[r])}!i.support.leadingWhitespace&&Wa.test(F)&&O.insertBefore(g.createTextNode(Wa.exec(F)[0]),O.firstChild);F=O.childNodes}else F=g.createTextNode(F);var ea;if(!i.support.appendChecked)if(F[0]&&
typeof(ea=F.length)==="number")for(r=0;r<ea;r++)ha(F[r]);else ha(F);if(F.nodeType)p.push(F);else p=i.merge(p,F)}}if(l){c=function(ga){return!ga.type||Ub.test(ga.type)};for(w=0;p[w];w++)if(m&&i.nodeName(p[w],"script")&&(!p[w].type||p[w].type.toLowerCase()==="text/javascript"))m.push(p[w].parentNode?p[w].parentNode.removeChild(p[w]):p[w]);else{if(p[w].nodeType===1){g=i.grep(p[w].getElementsByTagName("script"),c);p.splice.apply(p,[w+1,0].concat(g))}l.appendChild(p[w])}}return p},cleanData:function(c){for(var g,
l,m=i.cache,p=i.expando,r=i.event.special,w=i.support.deleteExpando,F=0,G;(G=c[F])!=null;F++)if(!(G.nodeName&&i.noData[G.nodeName.toLowerCase()]))if(l=G[i.expando]){if((g=m[l]&&m[l][p])&&g.events){for(var H in g.events)r[H]?i.event.remove(G,H):i.removeEvent(G,H,g.handle);if(g.handle)g.handle.elem=null}if(w)delete G[i.expando];else G.removeAttribute&&G.removeAttribute(i.expando);delete m[l]}}});var mb=/alpha\([^)]*\)/i,Vb=/opacity=([^)]*)/,Wb=/([A-Z]|^ms)/g,nb=/^-?\d+(?:px)?$/i,Xb=/^-?\d/,Yb=/^[+\-]=/,
Zb=/[^+\-\.\de]+/g,$b={position:"absolute",visibility:"hidden",display:"block"},Cb=["Left","Right"],Db=["Top","Bottom"],Fa,ob,pb;i.fn.css=function(c,g){if(arguments.length===2&&g===d)return this;return i.access(this,c,g,true,function(l,m,p){return p!==d?i.style(l,m,p):i.css(l,m)})};i.extend({cssHooks:{opacity:{get:function(c,g){if(g){c=Fa(c,"opacity","opacity");return c===""?"1":c}else return c.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,
widows:true,zIndex:true,zoom:true},cssProps:{"float":i.support.cssFloat?"cssFloat":"styleFloat"},style:function(c,g,l,m){if(!(!c||c.nodeType===3||c.nodeType===8||!c.style)){var p,r=i.camelCase(g),w=c.style,F=i.cssHooks[r];g=i.cssProps[r]||r;if(l!==d){m=typeof l;if(!(m==="number"&&isNaN(l)||l==null)){if(m==="string"&&Yb.test(l)){l=+l.replace(Zb,"")+parseFloat(i.css(c,g));m="number"}if(m==="number"&&!i.cssNumber[r])l+="px";if(!F||!("set"in F)||(l=F.set(c,l))!==d)try{w[g]=l}catch(G){}}}else{if(F&&"get"in
F&&(p=F.get(c,false,m))!==d)return p;return w[g]}}},css:function(c,g,l){var m,p;g=i.camelCase(g);p=i.cssHooks[g];g=i.cssProps[g]||g;if(g==="cssFloat")g="float";if(p&&"get"in p&&(m=p.get(c,true,l))!==d)return m;else if(Fa)return Fa(c,g)},swap:function(c,g,l){var m={};for(var p in g){m[p]=c.style[p];c.style[p]=g[p]}l.call(c);for(p in g)c.style[p]=m[p]}});i.curCSS=i.css;i.each(["height","width"],function(c,g){i.cssHooks[g]={get:function(l,m,p){var r;if(m){if(l.offsetWidth!==0)return I(l,g,p);else i.swap(l,
$b,function(){r=I(l,g,p)});return r}},set:function(l,m){if(nb.test(m)){m=parseFloat(m);if(m>=0)return m+"px"}else return m}}});if(!i.support.opacity)i.cssHooks.opacity={get:function(c,g){return Vb.test((g&&c.currentStyle?c.currentStyle.filter:c.style.filter)||"")?parseFloat(RegExp.$1)/100+"":g?"1":""},set:function(c,g){var l=c.style;c=c.currentStyle;l.zoom=1;g=i.isNaN(g)?"":"alpha(opacity="+g*100+")";c=c&&c.filter||l.filter||"";l.filter=mb.test(c)?c.replace(mb,g):c+" "+g}};i(function(){if(!i.support.reliableMarginRight)i.cssHooks.marginRight=
{get:function(c,g){var l;i.swap(c,{display:"inline-block"},function(){l=g?Fa(c,"margin-right","marginRight"):c.style.marginRight});return l}}});if(V.defaultView&&V.defaultView.getComputedStyle)ob=function(c,g){var l,m;g=g.replace(Wb,"-$1").toLowerCase();if(!(m=c.ownerDocument.defaultView))return d;if(m=m.getComputedStyle(c,null)){l=m.getPropertyValue(g);if(l===""&&!i.contains(c.ownerDocument.documentElement,c))l=i.style(c,g)}return l};if(V.documentElement.currentStyle)pb=function(c,g){var l,m=c.currentStyle&&
c.currentStyle[g],p=c.runtimeStyle&&c.runtimeStyle[g],r=c.style;if(!nb.test(m)&&Xb.test(m)){l=r.left;if(p)c.runtimeStyle.left=c.currentStyle.left;r.left=g==="fontSize"?"1em":m||0;m=r.pixelLeft+"px";r.left=l;if(p)c.runtimeStyle.left=p}return m===""?"auto":m};Fa=ob||pb;if(i.expr&&i.expr.filters){i.expr.filters.hidden=function(c){var g=c.offsetHeight;return c.offsetWidth===0&&g===0||!i.support.reliableHiddenOffsets&&(c.style.display||i.css(c,"display"))==="none"};i.expr.filters.visible=function(c){return!i.expr.filters.hidden(c)}}var ac=
/%20/g,Eb=/\[\]$/,qb=/\r?\n/g,bc=/#.*$/,cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dc=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ec=/^(?:GET|HEAD)$/,fc=/^\/\//,rb=/\?/,gc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,hc=/^(?:select|textarea)/i,Za=/\s+/,ic=/([?&])_=[^&]*/,sb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,tb=i.fn.load,Pa={},ub={},Da,Ea;try{Da=Aa.href}catch(oc){Da=V.createElement("a");Da.href="";Da=Da.href}Ea=sb.exec(Da.toLowerCase())||
[];i.fn.extend({load:function(c,g,l){if(typeof c!=="string"&&tb)return tb.apply(this,arguments);else if(!this.length)return this;var m=c.indexOf(" ");if(m>=0){var p=c.slice(m,c.length);c=c.slice(0,m)}m="GET";if(g)if(i.isFunction(g)){l=g;g=d}else if(typeof g==="object"){g=i.param(g,i.ajaxSettings.traditional);m="POST"}var r=this;i.ajax({url:c,type:m,dataType:"html",data:g,complete:function(w,F,G){G=w.responseText;if(w.isResolved()){w.done(function(H){G=H});r.html(p?i("<div>").append(G.replace(gc,"")).find(p):
G)}l&&r.each(l,[G,F,w])}});return this},serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?i.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||hc.test(this.nodeName)||dc.test(this.type))}).map(function(c,g){c=i(this).val();return c==null?null:i.isArray(c)?i.map(c,function(l){return{name:g.name,value:l.replace(qb,"\r\n")}}):{name:g.name,value:c.replace(qb,"\r\n")}}).get()}});
i.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(c,g){i.fn[g]=function(l){return this.bind(g,l)}});i.each(["get","post"],function(c,g){i[g]=function(l,m,p,r){if(i.isFunction(m)){r=r||p;p=m;m=d}return i.ajax({type:g,url:l,data:m,success:p,dataType:r})}});i.extend({getScript:function(c,g){return i.get(c,d,g,"script")},getJSON:function(c,g,l){return i.get(c,g,l,"json")},ajaxSetup:function(c,g){if(g)i.extend(true,c,i.ajaxSettings,g);else{g=c;c=i.extend(true,
i.ajaxSettings,g)}for(var l in{context:1,url:1})if(l in g)c[l]=g[l];else if(l in i.ajaxSettings)c[l]=i.ajaxSettings[l];return c},ajaxSettings:{url:Da,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(Ea[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",
text:"responseText"},converters:{"* text":b.String,"text html":true,"text json":i.parseJSON,"text xml":i.parseXML}},ajaxPrefilter:ka(Pa),ajaxTransport:ka(ub),ajax:function(c,g){function l(K,M,R,aa){if(pa!==2){pa=2;Ba&&clearTimeout(Ba);ma=d;ga=aa||"";t.readyState=K?4:0;var X,ja,ta;R=R?y(m,t,R):d;if(K>=200&&K<300||K===304){if(m.ifModified){if(aa=t.getResponseHeader("Last-Modified"))i.lastModified[H]=aa;if(aa=t.getResponseHeader("Etag"))i.etag[H]=aa}if(K===304){M="notmodified";X=true}else try{ja=z(m,
R);M="success";X=true}catch(sa){M="parsererror";ta=sa}}else{ta=M;if(!M||K){M="error";if(K<0)K=0}}t.status=K;t.statusText=M;X?w.resolveWith(p,[ja,M,t]):w.rejectWith(p,[t,M,ta]);t.statusCode(G);G=d;if(wa)r.trigger("ajax"+(X?"Success":"Error"),[t,m,X?ja:ta]);F.resolveWith(p,[t,M]);if(wa){r.trigger("ajaxComplete",[t,m]);--i.active||i.event.trigger("ajaxStop")}}}if(typeof c==="object"){g=c;c=d}g=g||{};var m=i.ajaxSetup({},g),p=m.context||m,r=p!==m&&(p.nodeType||p instanceof i)?i(p):i.event,w=i.Deferred(),
F=i._Deferred(),G=m.statusCode||{},H,O={},ea={},ga,ia,ma,Ba,pa=0,wa,ya,t={readyState:0,setRequestHeader:function(K,M){if(!pa){var R=K.toLowerCase();K=ea[R]=ea[R]||K;O[K]=M}return this},getAllResponseHeaders:function(){return pa===2?ga:null},getResponseHeader:function(K){var M;if(pa===2){if(!ia)for(ia={};M=cc.exec(ga);)ia[M[1].toLowerCase()]=M[2];M=ia[K.toLowerCase()]}return M===d?null:M},overrideMimeType:function(K){if(!pa)m.mimeType=K;return this},abort:function(K){K=K||"abort";ma&&ma.abort(K);l(0,
K);return this}};w.promise(t);t.success=t.done;t.error=t.fail;t.complete=F.done;t.statusCode=function(K){if(K){var M;if(pa<2)for(M in K)G[M]=[G[M],K[M]];else{M=K[t.status];t.then(M,M)}}return this};m.url=((c||m.url)+"").replace(bc,"").replace(fc,Ea[1]+"//");m.dataTypes=i.trim(m.dataType||"*").toLowerCase().split(Za);if(m.crossDomain==null){c=sb.exec(m.url.toLowerCase());m.crossDomain=!!(c&&(c[1]!=Ea[1]||c[2]!=Ea[2]||(c[3]||(c[1]==="http:"?80:443))!=(Ea[3]||(Ea[1]==="http:"?80:443))))}if(m.data&&m.processData&&
typeof m.data!=="string")m.data=i.param(m.data,m.traditional);va(Pa,m,g,t);if(pa===2)return false;wa=m.global;m.type=m.type.toUpperCase();m.hasContent=!ec.test(m.type);wa&&i.active++===0&&i.event.trigger("ajaxStart");if(!m.hasContent){if(m.data)m.url+=(rb.test(m.url)?"&":"?")+m.data;H=m.url;if(m.cache===false){c=i.now();var C=m.url.replace(ic,"$1_="+c);m.url=C+(C===m.url?(rb.test(m.url)?"&":"?")+"_="+c:"")}}if(m.data&&m.hasContent&&m.contentType!==false||g.contentType)t.setRequestHeader("Content-Type",
m.contentType);if(m.ifModified){H=H||m.url;i.lastModified[H]&&t.setRequestHeader("If-Modified-Since",i.lastModified[H]);i.etag[H]&&t.setRequestHeader("If-None-Match",i.etag[H])}t.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+(m.dataTypes[0]!=="*"?", */*; q=0.01":""):m.accepts["*"]);for(ya in m.headers)t.setRequestHeader(ya,m.headers[ya]);if(m.beforeSend&&(m.beforeSend.call(p,t,m)===false||pa===2)){t.abort();return false}for(ya in{success:1,error:1,complete:1})t[ya](m[ya]);
if(ma=va(ub,m,g,t)){t.readyState=1;wa&&r.trigger("ajaxSend",[t,m]);if(m.async&&m.timeout>0)Ba=setTimeout(function(){t.abort("timeout")},m.timeout);try{pa=1;ma.send(O,l)}catch(J){status<2?l(-1,J):i.error(J)}}else l(-1,"No Transport");return t},param:function(c,g){var l=[],m=function(r,w){w=i.isFunction(w)?w():w;l[l.length]=encodeURIComponent(r)+"="+encodeURIComponent(w)};if(g===d)g=i.ajaxSettings.traditional;if(i.isArray(c)||c.jquery&&!i.isPlainObject(c))i.each(c,function(){m(this.name,this.value)});
else for(var p in c)x(p,c[p],g,m);return l.join("&").replace(ac,"+")}});i.extend({active:0,lastModified:{},etag:{}});var jc=i.now(),Na=/(\=)\?(&|$)|\?\?/i;i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return i.expando+"_"+jc++}});i.ajaxPrefilter("json jsonp",function(c,g,l){g=c.contentType==="application/x-www-form-urlencoded"&&typeof c.data==="string";if(c.dataTypes[0]==="jsonp"||c.jsonp!==false&&(Na.test(c.url)||g&&Na.test(c.data))){var m,p=c.jsonpCallback=i.isFunction(c.jsonpCallback)?
c.jsonpCallback():c.jsonpCallback,r=b[p],w=c.url,F=c.data,G="$1"+p+"$2";if(c.jsonp!==false){w=w.replace(Na,G);if(c.url===w){if(g)F=F.replace(Na,G);if(c.data===F)w+=(/\?/.test(w)?"&":"?")+c.jsonp+"="+p}}c.url=w;c.data=F;b[p]=function(H){m=[H]};l.always(function(){b[p]=r;m&&i.isFunction(r)&&b[p](m[0])});c.converters["script json"]=function(){m||i.error(p+" was not called");return m[0]};c.dataTypes[0]="json";return"script"}});i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(c){i.globalEval(c);return c}}});i.ajaxPrefilter("script",function(c){if(c.cache===d)c.cache=false;if(c.crossDomain){c.type="GET";c.global=false}});i.ajaxTransport("script",function(c){if(c.crossDomain){var g,l=V.head||V.getElementsByTagName("head")[0]||V.documentElement;return{send:function(m,p){function r(w,F){if(F||!g.readyState||/loaded|complete/.test(g.readyState)){g.onload=g.onreadystatechange=null;l&&g.parentNode&&
l.removeChild(g);g=d;F||p(200,"success")}}g=V.createElement("script");g.async="async";if(c.scriptCharset)g.charset=c.scriptCharset;g.src=c.url;g.onload=g.onreadystatechange=r;l.insertBefore(g,l.firstChild);b.config&&b.config.netfront&&setTimeout(function(){r()},1)},abort:function(){g&&g.onload(0,1)}}}});var Xa=b.ActiveXObject?function(){for(var c in Ha)Ha[c](0,1)}:false,kc=0,Ha;i.ajaxSettings.xhr=b.ActiveXObject?function(){return!this.isLocal&&q()||s()}:q;(function(c){i.extend(i.support,{ajax:!!c,
cors:!!c&&"withCredentials"in c})})(i.ajaxSettings.xhr());i.support.ajax&&i.ajaxTransport(function(c){if(!c.crossDomain||i.support.cors){var g;return{send:function(l,m){var p=c.xhr(),r,w;c.username?p.open(c.type,c.url,c.async,c.username,c.password):p.open(c.type,c.url,c.async);if(c.xhrFields)for(w in c.xhrFields)p[w]=c.xhrFields[w];c.mimeType&&p.overrideMimeType&&p.overrideMimeType(c.mimeType);if(!c.crossDomain&&!l["X-Requested-With"])l["X-Requested-With"]="XMLHttpRequest";try{for(w in l)p.setRequestHeader(w,
l[w])}catch(F){}p.send(c.hasContent&&c.data||null);g=function(G,H){var O,ea,ga,ia,ma;try{if(g&&(H||p.readyState===4)){g=d;if(r){p.onreadystatechange=i.noop;Xa&&delete Ha[r]}if(H)p.readyState!==4&&p.abort();else{O=p.status;ga=p.getAllResponseHeaders();ia={};if((ma=p.responseXML)&&ma.documentElement)ia.xml=ma;ia.text=p.responseText;try{ea=p.statusText}catch(Ba){ea=""}if(!O&&c.isLocal&&!c.crossDomain)O=ia.text?200:404;else if(O===1223)O=204}}}catch(pa){H||m(-1,pa)}ia&&m(O,ea,ia,ga)};if(!c.async||p.readyState===
4)g();else{r=++kc;if(Xa){if(!Ha){Ha={};i(b).unload(Xa)}Ha[r]=g}p.onreadystatechange=g}},abort:function(){g&&g(0,1)}}}});var Qa={},za,Ga,lc=/^(?:toggle|show|hide)$/,mc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Ia,$a=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Ka,Ya=b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame;i.fn.extend({show:function(c,g,l){if(c||c===0)return this.animate(S("show",
3),c,g,l);else{l=0;for(var m=this.length;l<m;l++){c=this[l];if(c.style){g=c.style.display;if(!i._data(c,"olddisplay")&&g==="none")g=c.style.display="";g===""&&i.css(c,"display")==="none"&&i._data(c,"olddisplay",Y(c.nodeName))}}for(l=0;l<m;l++){c=this[l];if(c.style){g=c.style.display;if(g===""||g==="none")c.style.display=i._data(c,"olddisplay")||""}}return this}},hide:function(c,g,l){if(c||c===0)return this.animate(S("hide",3),c,g,l);else{c=0;for(g=this.length;c<g;c++)if(this[c].style){l=i.css(this[c],
"display");l!=="none"&&!i._data(this[c],"olddisplay")&&i._data(this[c],"olddisplay",l)}for(c=0;c<g;c++)if(this[c].style)this[c].style.display="none";return this}},_toggle:i.fn.toggle,toggle:function(c,g,l){var m=typeof c==="boolean";if(i.isFunction(c)&&i.isFunction(g))this._toggle.apply(this,arguments);else c==null||m?this.each(function(){var p=m?c:i(this).is(":hidden");i(this)[p?"show":"hide"]()}):this.animate(S("toggle",3),c,g,l);return this},fadeTo:function(c,g,l,m){return this.filter(":hidden").css("opacity",
0).show().end().animate({opacity:g},c,l,m)},animate:function(c,g,l,m){var p=i.speed(g,l,m);if(i.isEmptyObject(c))return this.each(p.complete,[false]);c=i.extend({},c);return this[p.queue===false?"each":"queue"](function(){p.queue===false&&i._mark(this);var r=i.extend({},p),w=this.nodeType===1,F=w&&i(this).is(":hidden"),G,H,O,ea,ga;r.animatedProperties={};for(O in c){G=i.camelCase(O);if(O!==G){c[G]=c[O];delete c[O]}H=c[G];if(i.isArray(H)){r.animatedProperties[G]=H[1];H=c[G]=H[0]}else r.animatedProperties[G]=
r.specialEasing&&r.specialEasing[G]||r.easing||"swing";if(H==="hide"&&F||H==="show"&&!F)return r.complete.call(this);if(w&&(G==="height"||G==="width")){r.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(i.css(this,"display")==="inline"&&i.css(this,"float")==="none")if(i.support.inlineBlockNeedsLayout){H=Y(this.nodeName);if(H==="inline")this.style.display="inline-block";else{this.style.display="inline";this.style.zoom=1}}else this.style.display="inline-block"}}if(r.overflow!=
null)this.style.overflow="hidden";for(O in c){w=new i.fx(this,r,O);H=c[O];if(lc.test(H))w[H==="toggle"?F?"show":"hide":H]();else{G=mc.exec(H);ea=w.cur();if(G){H=parseFloat(G[2]);ga=G[3]||(i.cssNumber[O]?"":"px");if(ga!=="px"){i.style(this,O,(H||1)+ga);ea=(H||1)/w.cur()*ea;i.style(this,O,ea+ga)}if(G[1])H=(G[1]==="-="?-1:1)*H+ea;w.custom(ea,H,ga)}else w.custom(ea,H,"")}}return true})},stop:function(c,g){c&&this.queue([]);this.each(function(){var l=i.timers,m=l.length;for(g||i._unmark(true,this);m--;)if(l[m].elem===
this){g&&l[m](true);l.splice(m,1)}});g||this.dequeue();return this}});i.each({slideDown:S("show",1),slideUp:S("hide",1),slideToggle:S("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,g){i.fn[c]=function(l,m,p){return this.animate(g,l,m,p)}});i.extend({speed:function(c,g,l){var m=c&&typeof c==="object"?i.extend({},c):{complete:l||!l&&g||i.isFunction(c)&&c,duration:c,easing:l&&g||g&&!i.isFunction(g)&&g};m.duration=i.fx.off?0:typeof m.duration===
"number"?m.duration:m.duration in i.fx.speeds?i.fx.speeds[m.duration]:i.fx.speeds._default;m.old=m.complete;m.complete=function(p){i.isFunction(m.old)&&m.old.call(this);if(m.queue!==false)i.dequeue(this);else p!==false&&i._unmark(this)};return m},easing:{linear:function(c,g,l,m){return l+m*c},swing:function(c,g,l,m){return(-Math.cos(c*Math.PI)/2+0.5)*m+l}},timers:[],fx:function(c,g,l){this.options=g;this.elem=c;this.prop=l;g.orig=g.orig||{}}});i.fx.prototype={update:function(){this.options.step&&
this.options.step.call(this.elem,this.now,this);(i.fx.step[this.prop]||i.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var c,g=i.css(this.elem,this.prop);return isNaN(c=parseFloat(g))?!g||g==="auto"?0:g:c},custom:function(c,g,l){function m(F){return p.step(F)}var p=this,r=i.fx,w;this.startTime=Ka||B();this.start=c;this.end=g;this.unit=l||this.unit||(i.cssNumber[this.prop]?"":"px");this.now=this.start;
this.pos=this.state=0;m.elem=this.elem;if(m()&&i.timers.push(m)&&!Ia)if(Ya){Ia=1;w=function(){if(Ia){Ya(w);r.tick()}};Ya(w)}else Ia=setInterval(r.tick,r.interval)},show:function(){this.options.orig[this.prop]=i.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());i(this.elem).show()},hide:function(){this.options.orig[this.prop]=i.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(c){var g=Ka||
B(),l=true,m=this.elem,p=this.options,r;if(c||g>=p.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();p.animatedProperties[this.prop]=true;for(r in p.animatedProperties)if(p.animatedProperties[r]!==true)l=false;if(l){p.overflow!=null&&!i.support.shrinkWrapBlocks&&i.each(["","X","Y"],function(F,G){m.style["overflow"+G]=p.overflow[F]});p.hide&&i(m).hide();if(p.hide||p.show)for(var w in p.animatedProperties)i.style(m,w,p.orig[w]);p.complete.call(m)}return false}else{if(p.duration==
Infinity)this.now=g;else{c=g-this.startTime;this.state=c/p.duration;this.pos=i.easing[p.animatedProperties[this.prop]](this.state,c,0,1,p.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update()}return true}};i.extend(i.fx,{tick:function(){for(var c=i.timers,g=0;g<c.length;++g)c[g]()||c.splice(g--,1);c.length||i.fx.stop()},interval:13,stop:function(){clearInterval(Ia);Ia=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){i.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&
c.elem.style[c.prop]!=null)c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit;else c.elem[c.prop]=c.now}}});if(i.expr&&i.expr.filters)i.expr.filters.animated=function(c){return i.grep(i.timers,function(g){return c===g.elem}).length};var nc=/^t(?:able|d|h)$/i,vb=/^(?:body|html)$/i;i.fn.offset="getBoundingClientRect"in V.documentElement?function(c){var g=this[0],l;if(c)return this.each(function(w){i.offset.setOffset(this,c,w)});if(!g||!g.ownerDocument)return null;
if(g===g.ownerDocument.body)return i.offset.bodyOffset(g);try{l=g.getBoundingClientRect()}catch(m){}var p=g.ownerDocument,r=p.documentElement;if(!l||!i.contains(r,g))return l?{top:l.top,left:l.left}:{top:0,left:0};g=p.body;p=ba(p);return{top:l.top+(p.pageYOffset||i.support.boxModel&&r.scrollTop||g.scrollTop)-(r.clientTop||g.clientTop||0),left:l.left+(p.pageXOffset||i.support.boxModel&&r.scrollLeft||g.scrollLeft)-(r.clientLeft||g.clientLeft||0)}}:function(c){var g=this[0];if(c)return this.each(function(O){i.offset.setOffset(this,
c,O)});if(!g||!g.ownerDocument)return null;if(g===g.ownerDocument.body)return i.offset.bodyOffset(g);i.offset.initialize();var l,m=g.offsetParent,p=g,r=g.ownerDocument,w=r.documentElement,F=r.body;l=(r=r.defaultView)?r.getComputedStyle(g,null):g.currentStyle;for(var G=g.offsetTop,H=g.offsetLeft;(g=g.parentNode)&&g!==F&&g!==w;){if(i.offset.supportsFixedPosition&&l.position==="fixed")break;l=r?r.getComputedStyle(g,null):g.currentStyle;G-=g.scrollTop;H-=g.scrollLeft;if(g===m){G+=g.offsetTop;H+=g.offsetLeft;
if(i.offset.doesNotAddBorder&&!(i.offset.doesAddBorderForTableAndCells&&nc.test(g.nodeName))){G+=parseFloat(l.borderTopWidth)||0;H+=parseFloat(l.borderLeftWidth)||0}p=m;m=g.offsetParent}if(i.offset.subtractsBorderForOverflowNotVisible&&l.overflow!=="visible"){G+=parseFloat(l.borderTopWidth)||0;H+=parseFloat(l.borderLeftWidth)||0}l=l}if(l.position==="relative"||l.position==="static"){G+=F.offsetTop;H+=F.offsetLeft}if(i.offset.supportsFixedPosition&&l.position==="fixed"){G+=Math.max(w.scrollTop,F.scrollTop);
H+=Math.max(w.scrollLeft,F.scrollLeft)}return{top:G,left:H}};i.offset={initialize:function(){var c=V.body,g=V.createElement("div"),l,m,p,r=parseFloat(i.css(c,"marginTop"))||0;i.extend(g.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});g.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
c.insertBefore(g,c.firstChild);l=g.firstChild;m=l.firstChild;p=l.nextSibling.firstChild.firstChild;this.doesNotAddBorder=m.offsetTop!==5;this.doesAddBorderForTableAndCells=p.offsetTop===5;m.style.position="fixed";m.style.top="20px";this.supportsFixedPosition=m.offsetTop===20||m.offsetTop===15;m.style.position=m.style.top="";l.style.overflow="hidden";l.style.position="relative";this.subtractsBorderForOverflowNotVisible=m.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=c.offsetTop!==r;c.removeChild(g);
i.offset.initialize=i.noop},bodyOffset:function(c){var g=c.offsetTop,l=c.offsetLeft;i.offset.initialize();if(i.offset.doesNotIncludeMarginInBodyOffset){g+=parseFloat(i.css(c,"marginTop"))||0;l+=parseFloat(i.css(c,"marginLeft"))||0}return{top:g,left:l}},setOffset:function(c,g,l){var m=i.css(c,"position");if(m==="static")c.style.position="relative";var p=i(c),r=p.offset(),w=i.css(c,"top"),F=i.css(c,"left"),G={},H={};if((m==="absolute"||m==="fixed")&&i.inArray("auto",[w,F])>-1){H=p.position();m=H.top;
F=H.left}else{m=parseFloat(w)||0;F=parseFloat(F)||0}if(i.isFunction(g))g=g.call(c,l,r);if(g.top!=null)G.top=g.top-r.top+m;if(g.left!=null)G.left=g.left-r.left+F;"using"in g?g.using.call(c,G):p.css(G)}};i.fn.extend({position:function(){if(!this[0])return null;var c=this[0],g=this.offsetParent(),l=this.offset(),m=vb.test(g[0].nodeName)?{top:0,left:0}:g.offset();l.top-=parseFloat(i.css(c,"marginTop"))||0;l.left-=parseFloat(i.css(c,"marginLeft"))||0;m.top+=parseFloat(i.css(g[0],"borderTopWidth"))||0;
m.left+=parseFloat(i.css(g[0],"borderLeftWidth"))||0;return{top:l.top-m.top,left:l.left-m.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||V.body;c&&!vb.test(c.nodeName)&&i.css(c,"position")==="static";)c=c.offsetParent;return c})}});i.each(["Left","Top"],function(c,g){var l="scroll"+g;i.fn[l]=function(m){var p,r;if(m===d){p=this[0];if(!p)return null;return(r=ba(p))?"pageXOffset"in r?r[c?"pageYOffset":"pageXOffset"]:i.support.boxModel&&r.document.documentElement[l]||
r.document.body[l]:p[l]}return this.each(function(){if(r=ba(this))r.scrollTo(!c?m:i(r).scrollLeft(),c?m:i(r).scrollTop());else this[l]=m})}});i.each(["Height","Width"],function(c,g){var l=g.toLowerCase();i.fn["inner"+g]=function(){var m=this[0];return m&&m.style?parseFloat(i.css(m,l,"padding")):null};i.fn["outer"+g]=function(m){var p=this[0];return p&&p.style?parseFloat(i.css(p,l,m?"margin":"border")):null};i.fn[l]=function(m){var p=this[0];if(!p)return m==null?null:this;if(i.isFunction(m))return this.each(function(w){var F=
i(this);F[l](m.call(this,w,F[l]()))});if(i.isWindow(p)){var r=p.document.documentElement["client"+g];return p.document.compatMode==="CSS1Compat"&&r||p.document.body["client"+g]||r}else if(p.nodeType===9)return Math.max(p.documentElement["client"+g],p.body["scroll"+g],p.documentElement["scroll"+g],p.body["offset"+g],p.documentElement["offset"+g]);else if(m===d){p=i.css(p,l);r=parseFloat(p);return i.isNaN(r)?p:r}else return this.css(l,typeof m==="string"?m:m+"px")}});b.jQuery=b.$=i})(window);(function(b){b.toJSON=function(h){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(h);var n=typeof h;if(h===null)return"null";if(n!="undefined"){if(n=="number"||n=="boolean")return h+"";if(n=="string")return b.quoteString(h);if(n=="object"){if(typeof h.toJSON=="function")return b.toJSON(h.toJSON());if(h.constructor===Date){var o=h.getUTCMonth()+1;if(o<10)o="0"+o;var v=h.getUTCDate();if(v<10)v="0"+v;n=h.getUTCFullYear();var u=h.getUTCHours();if(u<10)u="0"+u;var D=h.getUTCMinutes();if(D<
10)D="0"+D;var L=h.getUTCSeconds();if(L<10)L="0"+L;h=h.getUTCMilliseconds();if(h<100)h="0"+h;if(h<10)h="0"+h;return'"'+n+"-"+o+"-"+v+"T"+u+":"+D+":"+L+"."+h+'Z"'}if(h.constructor===Array){o=[];for(v=0;v<h.length;v++)o.push(b.toJSON(h[v])||"null");return"["+o.join(",")+"]"}o=[];for(v in h){n=typeof v;if(n=="number")n='"'+v+'"';else if(n=="string")n=b.quoteString(v);else continue;if(typeof h[v]!="function"){u=b.toJSON(h[v]);o.push(n+":"+u)}}return"{"+o.join(", ")+"}"}}};b.evalJSON=function(h){if(typeof JSON==
"object"&&JSON.parse)return JSON.parse(h);return eval("("+h+")")};b.secureEvalJSON=function(h){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(h);var n=h;n=n.replace(/\\["\\\/bfnrtu]/g,"@");n=n.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");n=n.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(n))return eval("("+h+")");else throw new SyntaxError("Error parsing JSON, source is not valid.");};b.quoteString=function(h){if(h.match(d))return'"'+h.replace(d,
function(n){var o=e[n];if(typeof o==="string")return o;o=n.charCodeAt();return"\\u00"+Math.floor(o/16).toString(16)+(o%16).toString(16)})+'"';return'"'+h+'"'};var d=/["\\\x00-\x1f\x7f-\x9f]/g,e={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(jQuery);(function(b){if(!b||!(b.toJSON||Object.toJSON||window.JSON))throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");b.jStorage={version:"0.1.2",_storage:{},_storage_service:{jStorage:"{}"},_storage_elm:null,json_encode:b.toJSON||Object.toJSON||window.JSON&&JSON.encode,json_decode:b.evalJSON||window.JSON&&JSON.decode||function(d){return String(d).evalJSON()},_init:function(){var d;if("localStorage"in window)this._storage_service=window.localStorage;else if("globalStorage"in
window)this._storage_service=window.globalStorage[document.domain];else{this._storage_elm=document.createElement("link");if("addBehavior"in this._storage_elm){this._storage_elm.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(this._storage_elm);this._storage_elm.load("jStorage");try{d=this._storage_elm.getAttribute("jStorage")}catch(e){d="{}"}if(d&&d.length)this._storage_service.jStorage=d}else{this._storage_elm=null;return}}if("jStorage"in this._storage_service&&
this._storage_service.jStorage)try{this._storage=this.json_decode(this._storage_service.jStorage)}catch(h){this._storage_service.jStorage="{}"}else this._storage_service.jStorage="{}"},_save:function(){if(this._storage_service){try{this._storage_service.jStorage=this.json_encode(this._storage)}catch(d){}if(this._storage_elm)try{this._storage_elm.setAttribute("jStorage",this._storage_service.jStorage);this._storage_elm.save("jStorage")}catch(e){}}},_checkKey:function(d){if(!d||typeof d!="string"&&
typeof d!="number")throw new TypeError("Key name must be string or numeric");return true},set:function(d,e){this._checkKey(d);this._storage[d]=e;this._save();return e},get:function(d,e){this._checkKey(d);if(d in this._storage)return this._storage[d];return e?e:null},deleteKey:function(d){this._checkKey(d);if(d in this._storage){delete this._storage[d];this._save();return true}return false},flush:function(){this._storage={};this._save();return true}};b.jStorage._init()})(typeof jQuery!="undefined"&&
jQuery||$);jQuery.cookie=function(b,d,e){if(typeof d!="undefined"){e=e||{};if(d===null){d="";e.expires=-1}var h="";if(e.expires&&(typeof e.expires=="number"||e.expires.toUTCString)){if(typeof e.expires=="number"){h=new Date;h.setTime(h.getTime()+e.expires*24*60*60*1E3)}else h=e.expires;h="; expires="+h.toUTCString()}var n=e.path?"; path="+e.path:"",o=e.domain?"; domain="+e.domain:"";e=e.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(d),h,n,o,e].join("")}else{d=null;if(document.cookie&&document.cookie!=
""){e=document.cookie.split(";");for(h=0;h<e.length;h++){n=jQuery.trim(e[h]);if(n.substring(0,b.length+1)==b+"="){d=decodeURIComponent(n.substring(b.length+1));break}}}return d}};jQuery.fn.log=function(b){window.console&&window.console.log&&console.log("%s: %o",b,this);return this};(function(b){var d=function(){return(new Date).toString("HH:MM:ss")};b.extend({log:{error:function(e){window.console&&window.console.error&&console.error("%s-%o",d(),e)},debug:function(e){window.console&&window.console.debug&&console.log("%s-%o",d(),e)}},debug:function(e){b.log.debug(e)}})})(jQuery);var sjcl={cipher:{},hash:{},mode:{},misc:{},codec:{},exception:{corrupt:function(b){this.toString=function(){return"CORRUPT: "+this.message};this.message=b},invalid:function(b){this.toString=function(){return"INVALID: "+this.message};this.message=b},bug:function(b){this.toString=function(){return"BUG: "+this.message};this.message=b}}};
sjcl.cipher.aes=function(b){this._tables[0][0][0]||this._precompute();var d,e,h,n,o=this._tables[0][4],v=this._tables[1];d=b.length;var u=1;if(d!==4&&d!==6&&d!==8){jQuery.jStorage.set("falconStore.sessionKey",null);throw new sjcl.exception.invalid("invalid aes key size");}this._key=[h=b.slice(0),n=[]];for(b=d;b<4*d+28;b++){e=h[b-1];if(b%d===0||d===8&&b%d===4){e=o[e>>>24]<<24^o[e>>16&255]<<16^o[e>>8&255]<<8^o[e&255];if(b%d===0){e=e<<8^e>>>24^u<<24;u=u<<1^(u>>7)*283}}h[b]=h[b-d]^e}for(d=0;b;d++,b--){e=
h[d&3?b:b-4];n[d]=b<=4||d<4?e:v[0][o[e>>>24]]^v[1][o[e>>16&255]]^v[2][o[e>>8&255]]^v[3][o[e&255]]}};
sjcl.cipher.aes.prototype={encrypt:function(b){return this._crypt(b,0)},decrypt:function(b){return this._crypt(b,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var b=this._tables[0],d=this._tables[1],e=b[4],h=d[4],n,o,v,u=[],D=[],L,N,Q,P;for(n=0;n<256;n++)D[(u[n]=n<<1^(n>>7)*283)^n]=n;for(o=v=0;!e[o];o^=L||1,v=D[v]||1){Q=v^v<<1^v<<2^v<<3^v<<4;Q=Q>>8^Q&255^99;e[o]=Q;h[Q]=o;N=u[n=u[L=u[o]]];P=N*16843009^n*65537^L*257^o*16843008;N=u[Q]*257^Q*16843008;for(n=0;n<4;n++){b[n][o]=
N=N<<24^N>>>8;d[n][Q]=P=P<<24^P>>>8}}for(n=0;n<5;n++){b[n]=b[n].slice(0);d[n]=d[n].slice(0)}},_crypt:function(b,d){if(b.length!==4)throw new sjcl.exception.invalid("invalid aes block size");var e=this._key[d],h=b[0]^e[0],n=b[d?3:1]^e[1],o=b[2]^e[2];b=b[d?1:3]^e[3];var v,u,D,L=e.length/4-2,N,Q=4,P=[0,0,0,0];v=this._tables[d];var U=v[0],W=v[1],da=v[2],fa=v[3],ha=v[4];for(N=0;N<L;N++){v=U[h>>>24]^W[n>>16&255]^da[o>>8&255]^fa[b&255]^e[Q];u=U[n>>>24]^W[o>>16&255]^da[b>>8&255]^fa[h&255]^e[Q+1];D=U[o>>>
24]^W[b>>16&255]^da[h>>8&255]^fa[n&255]^e[Q+2];b=U[b>>>24]^W[h>>16&255]^da[n>>8&255]^fa[o&255]^e[Q+3];Q+=4;h=v;n=u;o=D}for(N=0;N<4;N++){P[d?3&-N:N]=ha[h>>>24]<<24^ha[n>>16&255]<<16^ha[o>>8&255]<<8^ha[b&255]^e[Q++];v=h;h=n;n=o;o=b;b=v}return P}};
sjcl.bitArray={bitSlice:function(b,d,e){b=sjcl.bitArray._shiftRight(b.slice(d/32),32-(d&31)).slice(1);return e===undefined?b:sjcl.bitArray.clamp(b,e-d)},concat:function(b,d){if(b.length===0||d.length===0)return b.concat(d);var e=b[b.length-1],h=sjcl.bitArray.getPartial(e);return h===32?b.concat(d):sjcl.bitArray._shiftRight(d,h,e|0,b.slice(0,b.length-1))},bitLength:function(b){var d=b.length;if(d===0)return 0;return(d-1)*32+sjcl.bitArray.getPartial(b[d-1])},clamp:function(b,d){if(b.length*32<d)return b;
b=b.slice(0,Math.ceil(d/32));var e=b.length;d&=31;if(e>0&&d)b[e-1]=sjcl.bitArray.partial(d,b[e-1]&2147483648>>d-1,1);return b},partial:function(b,d,e){if(b===32)return d;return(e?d|0:d<<32-b)+b*1099511627776},getPartial:function(b){return Math.round(b/1099511627776)||32},equal:function(b,d){if(sjcl.bitArray.bitLength(b)!==sjcl.bitArray.bitLength(d))return false;var e=0,h;for(h=0;h<b.length;h++)e|=b[h]^d[h];return e===0},_shiftRight:function(b,d,e,h){var n;n=0;if(h===undefined)h=[];for(;d>=32;d-=32){h.push(e);
e=0}if(d===0)return h.concat(b);for(n=0;n<b.length;n++){h.push(e|b[n]>>>d);e=b[n]<<32-d}n=b.length?b[b.length-1]:0;b=sjcl.bitArray.getPartial(n);h.push(sjcl.bitArray.partial(d+b&31,d+b>32?e:h.pop(),1));return h},_xor4:function(b,d){return[b[0]^d[0],b[1]^d[1],b[2]^d[2],b[3]^d[3]]}};
sjcl.codec.utf8String={fromBits:function(b){var d="",e=sjcl.bitArray.bitLength(b),h,n;for(h=0;h<e/8;h++){if((h&3)===0)n=b[h/4];d+=String.fromCharCode(n>>>24);n<<=8}return decodeURIComponent(escape(d))},toBits:function(b){b=unescape(encodeURIComponent(b));var d=[],e,h=0;for(e=0;e<b.length;e++){h=h<<8|b.charCodeAt(e);if((e&3)===3){d.push(h);h=0}}e&3&&d.push(sjcl.bitArray.partial(8*(e&3),h));return d}};
sjcl.codec.hex={fromBits:function(b){var d="",e;for(e=0;e<b.length;e++)d+=((b[e]|0)+263882790666240).toString(16).substr(4);return d.substr(0,sjcl.bitArray.bitLength(b)/4)},toBits:function(b){var d,e=[],h;b=b.replace(/\s|0x/g,"");h=b.length;b+="00000000";for(d=0;d<b.length;d+=8)e.push(parseInt(b.substr(d,8),16)^0);return sjcl.bitArray.clamp(e,h*4)}};
sjcl.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(b,d){var e="",h,n=0,o=sjcl.codec.base64._chars,v=0,u=sjcl.bitArray.bitLength(b);for(h=0;e.length*6<u;){e+=o.charAt((v^b[h]>>>n)>>>26);if(n<6){v=b[h]<<6-n;n+=26;h++}else{v<<=6;n-=6}}for(;e.length&3&&!d;)e+="=";return e},toBits:function(b){b=b.replace(/\s|=/g,"");var d=[],e,h=0,n=sjcl.codec.base64._chars,o=0,v;for(e=0;e<b.length;e++){v=n.indexOf(b.charAt(e));if(v<0)throw new sjcl.exception.invalid("this isn't base64!");
if(h>26){h-=26;d.push(o^v>>>h);o=v<<32-h}else{h+=6;o^=v<<32-h}}h&56&&d.push(sjcl.bitArray.partial(h&56,o,1));return d}};sjcl.codec.bytes={fromBits:function(b){var d=[],e=sjcl.bitArray.bitLength(b),h,n;for(h=0;h<e/8;h++){if((h&3)===0)n=b[h/4];d.push(n>>>24);n<<=8}return d},toBits:function(b){var d=[],e,h=0;for(e=0;e<b.length;e++){h=h<<8|b[e];if((e&3)===3){d.push(h);h=0}}e&3&&d.push(sjcl.bitArray.partial(8*(e&3),h));return d}};
sjcl.hash.sha256=function(b){this._key[0]||this._precompute();if(b){this._h=b._h.slice(0);this._buffer=b._buffer.slice(0);this._length=b._length}else this.reset()};sjcl.hash.sha256.hash=function(b){return(new sjcl.hash.sha256).update(b).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this._h=this._init.slice(0);this._buffer=[];this._length=0;return this},update:function(b){if(typeof b==="string")b=sjcl.codec.utf8String.toBits(b);var d,e=this._buffer=sjcl.bitArray.concat(this._buffer,b);d=this._length;b=this._length=d+sjcl.bitArray.bitLength(b);for(d=512+d&-512;d<=b;d+=512)this._block(e.splice(0,16));return this},finalize:function(){var b,d=this._buffer,e=this._h;d=sjcl.bitArray.concat(d,[sjcl.bitArray.partial(1,1)]);for(b=
d.length+2;b&15;b++)d.push(0);d.push(Math.floor(this._length/4294967296));for(d.push(this._length|0);d.length;)this._block(d.splice(0,16));this.reset();return e},_init:[],_key:[],_precompute:function(){function b(n){return(n-Math.floor(n))*4294967296|0}var d=0,e=2,h;a:for(;d<64;e++){for(h=2;h*h<=e;h++)if(e%h===0)continue a;if(d<8)this._init[d]=b(Math.pow(e,0.5));this._key[d]=b(Math.pow(e,1/3));d++}},_block:function(b){var d,e,h=b.slice(0),n=this._h,o=this._key,v=n[0],u=n[1],D=n[2],L=n[3],N=n[4],Q=
n[5],P=n[6],U=n[7];for(b=0;b<64;b++){if(b<16)d=h[b];else{d=h[b+1&15];e=h[b+14&15];d=h[b&15]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+h[b&15]+h[b+9&15]|0}d=d+U+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+(P^N&(Q^P))+o[b];U=P;P=Q;Q=N;N=L+d|0;L=D;D=u;u=v;v=d+(u&D^L&(u^D))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0}n[0]=n[0]+v|0;n[1]=n[1]+u|0;n[2]=n[2]+D|0;n[3]=n[3]+L|0;n[4]=n[4]+N|0;n[5]=n[5]+Q|0;n[6]=n[6]+P|0;n[7]=n[7]+U|0}};
sjcl.mode.ccm={name:"ccm",encrypt:function(b,d,e,h,n){var o,v=d.slice(0),u=sjcl.bitArray,D=u.bitLength(e)/8,L=u.bitLength(v)/8;n=n||64;h=h||[];if(D<7)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(o=2;o<4&&L>>>8*o;o++);if(o<15-D)o=15-D;e=u.clamp(e,8*(15-o));d=sjcl.mode.ccm._computeTag(b,d,e,h,n,o);v=sjcl.mode.ccm._ctrMode(b,v,e,d,n,o);return u.concat(v.data,v.tag)},decrypt:function(b,d,e,h,n){n=n||64;h=h||[];var o=sjcl.bitArray,v=o.bitLength(e)/8,u=o.bitLength(d),D=o.clamp(d,
u-n),L=o.bitSlice(d,u-n);u=(u-n)/8;if(v<7)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(d=2;d<4&&u>>>8*d;d++);if(d<15-v)d=15-v;e=o.clamp(e,8*(15-d));D=sjcl.mode.ccm._ctrMode(b,D,e,L,n,d);b=sjcl.mode.ccm._computeTag(b,D.data,e,h,n,d);if(!o.equal(D.tag,b))throw new sjcl.exception.corrupt("ccm: tag doesn't match");return D.data},_computeTag:function(b,d,e,h,n,o){var v=[],u=sjcl.bitArray,D=u._xor4;n/=8;if(n%2||n<4||n>16)throw new sjcl.exception.invalid("ccm: invalid tag length");
if(h.length>4294967295||d.length>4294967295)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");o=[u.partial(8,(h.length?64:0)|n-2<<2|o-1)];o=u.concat(o,e);o[3]|=u.bitLength(d)/8;o=b.encrypt(o);if(h.length){e=u.bitLength(h)/8;if(e<=65279)v=[u.partial(16,e)];else if(e<=4294967295)v=u.concat([u.partial(16,65534)],[e]);v=u.concat(v,h);for(h=0;h<v.length;h+=4)o=b.encrypt(D(o,v.slice(h,h+4).concat([0,0,0])))}for(h=0;h<d.length;h+=4)o=b.encrypt(D(o,d.slice(h,h+4).concat([0,0,0])));return u.clamp(o,
n*8)},_ctrMode:function(b,d,e,h,n,o){var v,u=sjcl.bitArray;v=u._xor4;var D=d.length,L=u.bitLength(d);e=u.concat([u.partial(8,o-1)],e).concat([0,0,0]).slice(0,4);h=u.bitSlice(v(h,b.encrypt(e)),0,n);if(!D)return{tag:h,data:[]};for(v=0;v<D;v+=4){e[3]++;n=b.encrypt(e);d[v]^=n[0];d[v+1]^=n[1];d[v+2]^=n[2];d[v+3]^=n[3]}return{tag:h,data:u.clamp(d,L)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(b,d,e,h,n,o){if(sjcl.bitArray.bitLength(e)!==128)throw new sjcl.exception.invalid("ocb iv must be 128 bits");var v,u=sjcl.mode.ocb2._times2,D=sjcl.bitArray,L=D._xor4,N=[0,0,0,0];e=u(b.encrypt(e));var Q,P=[];h=h||[];n=n||64;for(v=0;v+4<d.length;v+=4){Q=d.slice(v,v+4);N=L(N,Q);P=P.concat(L(e,b.encrypt(L(e,Q))));e=u(e)}Q=d.slice(v);d=D.bitLength(Q);v=b.encrypt(L(e,[0,0,0,d]));Q=D.clamp(L(Q.concat([0,0,0]),v),d);N=L(N,L(Q.concat([0,0,0]),v));N=b.encrypt(L(N,
L(e,u(e))));if(h.length)N=L(N,o?h:sjcl.mode.ocb2.pmac(b,h));return P.concat(D.concat(Q,D.clamp(N,n)))},decrypt:function(b,d,e,h,n,o){if(sjcl.bitArray.bitLength(e)!==128)throw new sjcl.exception.invalid("ocb iv must be 128 bits");n=n||64;var v=sjcl.mode.ocb2._times2,u=sjcl.bitArray,D=u._xor4,L=[0,0,0,0],N=v(b.encrypt(e)),Q,P,U=sjcl.bitArray.bitLength(d)-n,W=[];h=h||[];for(e=0;e+4<U/32;e+=4){Q=D(N,b.decrypt(D(N,d.slice(e,e+4))));L=D(L,Q);W=W.concat(Q);N=v(N)}P=U-e*32;Q=b.encrypt(D(N,[0,0,0,P]));Q=D(Q,
u.clamp(d.slice(e),P).concat([0,0,0]));L=D(L,Q);L=b.encrypt(D(L,D(N,v(N))));if(h.length)L=D(L,o?h:sjcl.mode.ocb2.pmac(b,h));if(!u.equal(u.clamp(L,n),u.bitSlice(d,U)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return W.concat(u.clamp(Q,P))},pmac:function(b,d){var e,h=sjcl.mode.ocb2._times2,n=sjcl.bitArray,o=n._xor4,v=[0,0,0,0],u=b.encrypt([0,0,0,0]);u=o(u,h(h(u)));for(e=0;e+4<d.length;e+=4){u=h(u);v=o(v,b.encrypt(o(u,d.slice(e,e+4))))}d=d.slice(e);if(n.bitLength(d)<128){u=o(u,h(u));
d=n.concat(d,[2147483648|0,0,0,0])}v=o(v,d);return b.encrypt(o(h(o(u,h(u))),v))},_times2:function(b){return[b[0]<<1^b[1]>>>31,b[1]<<1^b[2]>>>31,b[2]<<1^b[3]>>>31,b[3]<<1^(b[0]>>>31)*135]}};sjcl.misc.hmac=function(b,d){this._hash=d=d||sjcl.hash.sha256;var e=[[],[]],h=d.prototype.blockSize/32;this._baseHash=[new d,new d];if(b.length>h)b=d.hash(b);for(d=0;d<h;d++){e[0][d]=b[d]^909522486;e[1][d]=b[d]^1549556828}this._baseHash[0].update(e[0]);this._baseHash[1].update(e[1])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(b,d){b=(new this._hash(this._baseHash[0])).update(b,d).finalize();return(new this._hash(this._baseHash[1])).update(b).finalize()};
sjcl.misc.pbkdf2=function(b,d,e,h,n){e=e||1E3;if(h<0||e<0)throw sjcl.exception.invalid("invalid params to pbkdf2");if(typeof b==="string")b=sjcl.codec.utf8String.toBits(b);n=n||sjcl.misc.hmac;b=new n(b);var o,v,u,D,L=[],N=sjcl.bitArray;for(D=1;32*L.length<(h||1);D++){n=o=b.encrypt(N.concat(d,[D]));for(v=1;v<e;v++){o=b.encrypt(o);for(u=0;u<o.length;u++)n[u]^=o[u]}L=L.concat(n)}if(h)L=N.clamp(L,h);return L};
sjcl.random={randomWords:function(b,d){var e=[];d=this.isReady(d);var h;if(d===this._NOT_READY)throw new sjcl.exception.notready("generator isn't seeded");else d&this._REQUIRES_RESEED&&this._reseedFromPools(!(d&this._READY));for(d=0;d<b;d+=4){(d+1)%this._MAX_WORDS_PER_BURST===0&&this._gate();h=this._gen4words();e.push(h[0],h[1],h[2],h[3])}this._gate();return e.slice(0,b)},setDefaultParanoia:function(b){this._defaultParanoia=b},addEntropy:function(b,d,e){e=e||"user";var h,n,o=(new Date).valueOf(),
v=this._robins[e],u=this.isReady();h=this._collectorIds[e];if(h===undefined)h=this._collectorIds[e]=this._collectorIdNext++;if(v===undefined)v=this._robins[e]=0;this._robins[e]=(this._robins[e]+1)%this._pools.length;switch(typeof b){case "number":break;case "object":if(d===undefined)for(e=d=0;e<b.length;e++)for(n=b[e];n>0;){d++;n>>>=1}this._pools[v].update([h,this._eventId++,2,d,o,b.length].concat(b));break;case "string":if(d===undefined)d=b.length;this._pools[v].update([h,this._eventId++,3,d,o,b.length]);
this._pools[v].update(b);break;default:throw new sjcl.exception.bug("random: addEntropy only supports number, array or string");}this._poolEntropy[v]+=d;this._poolStrength+=d;if(u===this._NOT_READY){this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength));this._fireEvent("progress",this.getProgress())}},isReady:function(b){b=this._PARANOIA_LEVELS[b!==undefined?b:this._defaultParanoia];return this._strength&&this._strength>=b?this._poolEntropy[0]>this._BITS_PER_RESEED&&
(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=b?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(b){b=this._PARANOIA_LEVELS[b?b:this._defaultParanoia];return this._strength>=b?1:this._poolStrength>b?1:this._poolStrength/b},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener){window.addEventListener("load",this._loadTimeCollector,false);window.addEventListener("mousemove",this._mouseCollector,
false)}else if(document.attachEvent){document.attachEvent("onload",this._loadTimeCollector);document.attachEvent("onmousemove",this._mouseCollector)}else throw new sjcl.exception.bug("can't attach event");this._collectorsStarted=true}},stopCollectors:function(){if(this._collectorsStarted){if(window.removeEventListener){window.removeEventListener("load",this._loadTimeCollector);window.removeEventListener("mousemove",this._mouseCollector)}else if(window.detachEvent){window.detachEvent("onload",this._loadTimeCollector);
window.detachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=false}},addEventListener:function(b,d){this._callbacks[b][this._callbackI++]=d},removeEventListener:function(b,d){var e;b=this._callbacks[b];var h=[];for(e in b)b.hasOwnProperty[e]&&b[e]===d&&h.push(e);for(d=0;d<h.length;d++){e=h[d];delete b[e]}},_pools:[new sjcl.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,
0,0,0,0],_counter:[0,0,0,0],_cipher:undefined,_defaultParanoia:6,_collectorsStarted:false,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3E4,_BITS_PER_RESEED:80,_gen4words:function(){for(var b=0;b<4;b++){this._counter[b]=this._counter[b]+1|0;if(this._counter[b])break}return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words());
this._cipher=new sjcl.cipher.aes(this._key)},_reseed:function(b){this._key=sjcl.hash.sha256.hash(this._key.concat(b));this._cipher=new sjcl.cipher.aes(this._key);for(b=0;b<4;b++){this._counter[b]=this._counter[b]+1|0;if(this._counter[b])break}},_reseedFromPools:function(b){var d=[],e=0,h;this._nextReseed=d[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED;for(h=0;h<16;h++)d.push(Math.random()*4294967296|0);for(h=0;h<this._pools.length;h++){d=d.concat(this._pools[h].finalize());e+=this._poolEntropy[h];
this._poolEntropy[h]=0;if(!b&&this._reseedCount&1<<h)break}if(this._reseedCount>=1<<this._pools.length){this._pools.push(new sjcl.hash.sha256);this._poolEntropy.push(0)}this._poolStrength-=e;if(e>this._strength)this._strength=e;this._reseedCount++;this._reseed(d)},_mouseCollector:function(b){sjcl.random.addEntropy([b.x||b.clientX||b.offsetX,b.y||b.clientY||b.offsetY],2,"mouse")},_loadTimeCollector:function(){sjcl.random.addEntropy(new Date,2,"loadtime")},_fireEvent:function(b,d){var e;b=sjcl.random._callbacks[b];
var h=[];for(e in b)b.hasOwnProperty(e)&&h.push(b[e]);for(e=0;e<h.length;e++)h[e](d)}};
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(b,d,e,h){e=e||{};h=h||{};var n=sjcl.json,o=n._add({iv:sjcl.random.randomWords(4,0)},n.defaults);n._add(o,e);if(typeof o.salt==="string")o.salt=sjcl.codec.base64.toBits(o.salt);if(typeof o.iv==="string")o.iv=sjcl.codec.base64.toBits(o.iv);if(!sjcl.mode[o.mode]||!sjcl.cipher[o.cipher]||typeof b==="string"&&o.iter<=100||o.ts!==64&&o.ts!==96&&o.ts!==128||o.ks!==128&&o.ks!==192&&o.ks!==256||o.iv.length<2||
o.iv.length>4)throw new sjcl.exception.invalid("json encrypt: invalid parameters");if(typeof b==="string"){e=sjcl.misc.cachedPbkdf2(b,o);b=e.key.slice(0,o.ks/32);o.salt=e.salt}if(typeof d==="string")d=sjcl.codec.utf8String.toBits(d);e=new sjcl.cipher[o.cipher](b);n._add(h,o);h.key=b;o.ct=sjcl.mode[o.mode].encrypt(e,d,o.iv,o.adata,o.tag);return n.encode(n._subtract(o,n.defaults))},decrypt:function(b,d,e,h){e=e||{};h=h||{};var n=sjcl.json;d=n._add(n._add(n._add({},n.defaults),n.decode(d)),e,true);if(typeof d.salt===
"string")d.salt=sjcl.codec.base64.toBits(d.salt);if(typeof d.iv==="string")d.iv=sjcl.codec.base64.toBits(d.iv);if(!sjcl.mode[d.mode]||!sjcl.cipher[d.cipher]||typeof b==="string"&&d.iter<=100||d.ts!==64&&d.ts!==96&&d.ts!==128||d.ks!==128&&d.ks!==192&&d.ks!==256||!d.iv||d.iv.length<2||d.iv.length>4)throw new sjcl.exception.invalid("json decrypt: invalid parameters");if(typeof b==="string"){e=sjcl.misc.cachedPbkdf2(b,d);b=e.key.slice(0,d.ks/32);d.salt=e.salt}e=new sjcl.cipher[d.cipher](b);e=sjcl.mode[d.mode].decrypt(e,
d.ct,d.iv,d.adata,d.tag);n._add(h,d);h.key=b;return sjcl.codec.utf8String.fromBits(e)},encode:function(b){var d,e="{",h="";for(d in b)if(b.hasOwnProperty(d)){if(!d.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");e+=h+d+":";h=",";switch(typeof b[d]){case "number":case "boolean":e+=b[d];break;case "string":e+='"'+escape(b[d])+'"';break;case "object":e+='"'+sjcl.codec.base64.fromBits(b[d],1)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");
}}return e+"}"},decode:function(b){b=b.replace(/\s/g,"");if(!b.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");b=b.replace(/^\{|\}$/g,"").split(/,/);var d={},e,h;for(e=0;e<b.length;e++){if(!(h=b[e].match(/^([a-z][a-z0-9]*):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");d[h[1]]=h[2]?parseInt(h[2],10):h[1].match(/^(ct|salt|iv)$/)?sjcl.codec.base64.toBits(h[3]):unescape(h[3])}return d},_add:function(b,d,e){if(b===
undefined)b={};if(d===undefined)return b;var h;for(h in d)if(d.hasOwnProperty(h)){if(e&&b[h]!==undefined&&b[h]!==d[h])throw new sjcl.exception.invalid("required parameter overridden");b[h]=d[h]}return b},_subtract:function(b,d){var e={},h;for(h in b)if(b.hasOwnProperty(h)&&b[h]!==d[h])e[h]=b[h];return e},_filter:function(b,d){var e={},h;for(h=0;h<d.length;h++)if(b[d[h]]!==undefined)e[d[h]]=b[d[h]];return e}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc._pbkdf2Cache={};
sjcl.misc.cachedPbkdf2=function(b,d){var e=sjcl.misc._pbkdf2Cache,h;d=d||{};h=d.iter||1E3;e=e[b]=e[b]||{};h=e[h]=e[h]||{firstSalt:d.salt&&d.salt.length?d.salt.slice(0):sjcl.random.randomWords(2,0)};e=d.salt===undefined?h.firstSalt:d.salt;h[e]=h[e]||sjcl.misc.pbkdf2(b,e,d.iter);return{key:h[e].slice(0),salt:e.slice(0)}};if(!Array.prototype.map)Array.prototype.map=function(b,d){d=d||window;for(var e=[],h=0,n=this.length;h<n;++h)e.push(b.call(d,this[h],h,this));return e};function srp(b,d,e){this.mode=d;this.Tlen=e;this.store=jQuery.jStorage;this.block_size=16;this.ivoffset=0;this.async_decrypt_blocks=1E3;this.createCTRCipher(b)}
srp.prototype={saveKey:function(b){var d=jQuery.jStorage.get("falconStore.sessionKeys")||{};debugger;d[jQuery.cookie("GUID")]={bt_talon_tkt:jQuery.cookie("bt_talon_tkt"),name:jQuery.cookie("bt_user"),cid:jQuery.cookie("cid"),key:b};this.store.set("falconStore.sessionKeys",d)},fetchKey:function(){var b=null;if(b&&b.length==40){this.createCTRCipher(b);window.name=""}else{if(this.store.get("falconStore.sessionKeys"))if(this.store.get("falconStore.sessionKeys")[jQuery.cookie("GUID")])b=this.store.get("falconStore.sessionKeys")[jQuery.cookie("GUID")].key;
b||(b="");this.createCTRCipher(b);return b}},createCTRCipher:function(b){var d=[];if(b){var e=[];this.bytesToWords(this.hexToBytes(b),e);var h=e.splice(0,4);this.iv=[];this.wordsToBytes([e[0],e[0],e[0],e[0]],this.iv);this.wordsToBytes(h,d);this.cipher=new sjcl.cipher.aes(sjcl.codec.hex.toBits(b.slice(0,32)))}this.ready=true},inc_ctr:function(b){for(var d=sjcl.codec.hex.fromBits([this.ivoffset]),e=d.length,h=[],n=0,o=0;n<e;n+=2,o++)h[o]=parseInt(d.charAt(n)+d.charAt(n+1),16);h=h.reverse();e=h.length;
for(n=d=0;n<e;n++){h[n]+=d;b[n]+=h[n];d=b[n]>=256?1:0;b[n]%=256}return b},ctr_crypt_block:function(b){try{var d=this.iv.slice()}catch(e){alert("AES initialization vector is undefined");throw e;}this.inc_ctr(d);var h=new Array(16);h=[];h=this.bytesToHex(d);h=sjcl.codec.hex.toBits(h);h=this.hexToBytes(sjcl.codec.hex.fromBits(this.cipher.encrypt(h)));d=[];for(var n=0;n<b.length;n++)d[n]=b[n]^h[n];this.ivoffset++;return d},ctr_crypt:function(b){for(var d=[],e=0;e<b.length/16;e++)for(var h=this.ctr_crypt_block(b.slice(e*
16,(e+1)*16)),n=0;n<16;n++)d.push(h[n]);return d},removeTrailingNuls:function(b){for(var d=typeof b==="string",e=b.length-1;e>=0;e--)if(d&&b[e]=="\u0000")b=b.slice(0,e);else if(b[e]==0)b.pop();else break;return b},encrypt:function(b){if(!this.cipher)return b;var d=[],e=[];this.asciiToBytes(b,d);e=this.ctr_crypt(d);return this.bytesToHex(e)},decrypt_async:function(b,d,e){var h=this;b=this.hexToBytes(b);this.decrypt_async_helper(b,b.length/this.block_size,0,this.async_decrypt_blocks,[],function(n){n=
e&&e.encoding=="ascii"?h.bytesToAscii(n):h.bytesToUnicode(n);d(n)})},decrypt_async_helper:function(b,d,e,h,n,o){for(var v=this,u=0;u<=h;u++){var D=(e+u)*this.block_size;if(D>=b.length){o(n);return}D=this.ctr_crypt_block(b.slice(D,D+this.block_size));for(var L=0;L<D.length;L++){if(D[L]===0){o(n);return}n.push(D[L])}}setTimeout(function(){v.decrypt_async_helper(b,d,e+h+1,h,n,o)},1)},decrypt:function(b,d){if(!this.cipher||typeof b!="string")return b;b=this.ctr_crypt(this.hexToBytes(b));this.removeTrailingNuls(b);
return d&&d.encoding=="ascii"?this.bytesToAscii(b):this.bytesToUnicode(b)},ready:false,wordsToBytes:function(b,d){for(var e=1,h=0;h<7;h++)e=e<<1|1;for(h=0;h<b.length;h++)for(var n=h*4,o=0;o<4;o++)d[n+o]=(b[h]&e<<8*(3-o))>>>8*(3-o)},bytesToWords:function(b,d){for(b=b.slice();b.length%4!=0;)b.push(0);for(var e=Math.floor(b.length/4),h=0;h<e;h++)d[h]=b[(h<<2)+3]|b[(h<<2)+2]<<8|b[(h<<2)+1]<<16|b[h<<2]<<24},byteToHex:function(b){return"0123456789ABCDEF".charAt(b>>4)+"0123456789ABCDEF".charAt(b&15)},bytesToHex:function(b){for(var d=
"",e=0,h=b.length;e<h;e++)d+=this.byteToHex(b[e]);return d},hexToBytes:function(b){for(var d=[],e=0;e<b.length;e+=2)d.push(parseInt(b.charAt(e)+b.charAt(e+1),16));return d},asciiToBytes:function(b,d){for(var e=b.length,h=0;h<e;h++)d[h]=b.charCodeAt(h)},bytesToAscii:function(b){for(var d="",e=b.length,h=0;h<e;h++)d+=String.fromCharCode(b[h]);return d},bytesToUnicode:function(b){for(var d=[],e=0;e<b.length;){var h=b[e];if(h<128){d.push(String.fromCharCode(h));e+=1}else{var n="",o=h.toString(2);if(o[1]==
"0"){window.console&&console.log&&console.log("illegal utf8 encoding");d.push("\ufffd");e+=1}else{for(h=2;o[h]=="1";)h++;n+=o.slice(h,8);for(o=1;o<h;o++)if(b[e+o])n+=b[e+o].toString(2).slice(2,8);else window.console&&console.log&&console.log("illegal utf8 encoding");e+=h;d.push(String.fromCharCode(parseInt(n,2)))}}}return d.join("")},boundary:"AaB03x"};function Storage(){}Storage.prototype={set:function(b,d){StoreKey(b,d)},get:function(b){return RetrieveKey(b)}};
function Pairing(b,d){console.log("initialize pairing with options",b);this.i=0;this.options=b;this.api=d;this._cancel=false;this.curport=-1;this.foundport=b.foundport||null;this.scheme=(this.ssl=b.ssl||false)?"https":"http";this.local_url=b.foundport?this.scheme+"://127.0.0.1:"+this.foundport:null;this.active=b.foundport?true:false;this.resultImg=null;this.pairing_key=b.pairing_key||null;this.pairing_name=this.options&&this.options.pairing_name||"uT Toolbar Client";this.scan_start_time=new Date;
this.store=this.store=jQuery.jStorage;this.highest_port_possbile=5E4;this.realistic_give_up_after_port=11E3;b.dontscan||this.scan()}
Pairing.prototype={stop:function(){this._cancel=true},scan:function(){this.resultImg=new Image;var b=this;this.resultImg.onerror=function(){if(b.options._cancel||b.options.timeout&&new Date-b.scan_start_time>b.options.timeout)return b.options.error();if(b.curport>b.realistic_give_up_after_port){if(b.options.error)return b.options.error({port_scan_failed:true});b.i=0}else b.i++;b.pingimg()};this.resultImg.onload=function(){b.port_found(b.curport)};b.i=0;b.pingimg()},pingimg:function(){var b=this.i;
this.curport=7*Math.pow(b,3)+3*Math.pow(b,2)+5*b+1E4;b=this.scheme+"://127.0.0.1:"+this.curport+"/gui/pingimg";console.log("checking",b);this.resultImg.src=b},port_found:function(b){if(b>=0){console.log("found port",b);this.foundport=b;this.curport=-1;this.local_url="http://127.0.0.1:"+this.foundport;this.resultImg.onerror=function(){};this.resultImg.onload=function(){};this.resultImg.src="";this.resultImg=null;this.options&&this.options.port_found&&this.options.port_found(this)}},pair:function(b){function d(h,
n){myconsole.log("ajax pairing jsonp got error",h,n);debugger;if(e.options&&e.options.error)e.options.error("denied");else{console.log("denied pairing request");debugger}}myconsole.log("waiting for yes in client dialog");var e=this;if(b&&b.firefox_timeout&&navigator.userAgent.match(/firefox/i))window.ff_pairing_timeout=setTimeout(function(){return d({},"timeout")},1E4);jQuery.ajax({url:this.local_url+"/gui/pair?name="+encodeURIComponent(this.pairing_name),success:_.bind(this.got_pairing,this),dataType:"jsonp",
error:d})},test_pairing_key:function(b,d,e){b=this.local_url+"/gui/?list=1&"+this.create_qs(b);myconsole.log("testing auto pairing url",b);jQuery.ajax({url:b,dataType:"jsonp",success:function(h,n,o){h=="invalid request"?e(h,n,o):d(h,n,o)},error:e})},create_qs:function(b){return"token="+b+"&pairing="+b},got_pairing:function(b){window.ff_pairing_timeout&&clearTimeout(ff_pairing_timeout);myconsole.log("received pairing key",b);this.active=true;this.pairing_key=b;this.api.client.manager.register_paired_client(this.api.client);
this.options&&this.options.success&&this.options.success(this)}};function WrappedFileReader(){this._native=this.html5_supported()}WrappedFileReader.prototype={html5_supported:function(){if(!config.experimental)return false;return window.File&&window.FileReader&&window.FileList&&window.Blob},register:function(b,d){var e=new FileReader;e.readAsBinaryString(b);e.onload=function(h){d(h.target.result)}}};(function(b){function d(){if(!String.prototype.trim){rtrim=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;String.prototype.trim=function(){return this.replace(rtrim,"")}}if(document.cookie)for(var o={},v=document.cookie.split(";"),u=0;u<v.length;u++){var D=v[u],L=D.indexOf("=");if(L!=-1)o[D.slice(0,L).trim()]=D.slice(L+1,D.length).trim()}else o={};return o}function e(o){var v=this;v.pairing=null;v.token=null;if(config.webui||o==null)v.cipher={decrypt:function(u){return u},decrypt_async:function(u,D){return D(u)},
encrypt:function(u){return u},is_null_cipher:true};else if(window.srp)v.cipher=o||new srp;else{console.log("unrecognized initialization");debugger}v.boundary="AaB03x";this.jsonp=config.jsonp;this.url_base=config.jsonp|config.toolbar?config.srp_root:""}var h=b;if(window.jQuery){window.fjQuery=jQuery.noConflict();if(window.config.ipad_ui)window.$=jQuery}if(!String.prototype.trim)String.prototype.trim=function(){return jQuery.trim(this)};if(!n)var n={stringify:function(o){return jQuery.toJSON(o)},parse:function(o){return jQuery.parseJSON(o)}};
if(!window.console)window.console={};if(!window.console.log)window.console.log=function(){};window.ClientAPI=e;e.prototype={is_remote:function(){return!this.cipher.is_null_cipher},processResponse:function(o,v,u,D){v=this;u=u.getResponseHeader("x-bt-seq");if(o.encbody&&o.GUID&&o["x-bt-seq"]){v.cipher.ivoffset=parseInt(o["x-bt-seq"]);o=o.encbody}else v.cipher.ivoffset=parseInt(u?u:"0");return v.cipher.decrypt(o,D)},unrecoverable_error:function(o){this.client.remove_from_stored_sessions();if(config.utweb){console.error(o);
if(config.asserts)debugger;utweb.redirect_logout(o)}else throw Error(o);},processResponseAsync:function(o,v,u,D,L){v=this;u=u.getResponseHeader("x-bt-seq");if(o.encbody&&o.GUID&&o["x-bt-seq"]){v.cipher.ivoffset=parseInt(o["x-bt-seq"]);o=o.encbody}else v.cipher.ivoffset=parseInt(u?u:"0");v.cipher.decrypt_async(o,function(N){D(o,N)},L)},check_username:function(o,v){o={url:(this.url_base?this.url_base:"")+"/api/exists?username="+encodeURIComponent(o),dataType:this.jsonp?"jsonp":"json",success:function(u){v(u)},
error:function(){debugger;console.error("error fetching username status");v({})}};console.log("checking username",o);fjQuery.ajax(o)},get_info:function(o){var v=this,u={url:(this.url_base?this.url_base:"")+"/talon/getinfo?bt_talon_tkt="+encodeURIComponent(this.client.data.bt_talon_tkt),dataType:this.jsonp?"jsonp":"json",success:function(D){if(!D)debugger;D&&D.not_found&&console.log("client not currently attached! -- try again in a bit? ??");if((v.client.detailed_client_info=D)&&D.plus&&D.plus.proxy_files){console.log("PLUS file transfer ENABLED! :-)",
D);window.utweb&&utweb.notify_plus_active()}else console.log("PLUS file transfer not enabled :-(",D);o()},error:function(D,L){console.error("error fetching get_info (for determining plus status etc)");v.client.detailed_client_info={error:L,response_code:D.status,xhr:D};o()}};console.log("fetching plus/client info",u);fjQuery.ajax(u)},get_raptor:function(o,v,u){var D=this;if(!this.client.data.bt_talon_tkt){console.error("client not initialized correctly");debugger}var L=this.url_base?this.url_base:
"";if(u&&u.jsonp&&!L)L="https://"+config.logout_root;var N=config.ssl!==undefined&&!config.ssl?"&nossl=1":"",Q=this.jsonp||u&&u.jsonp;u={url:L+"/talon/getrapton?bt_talon_tkt="+encodeURIComponent(this.client.data.bt_talon_tkt)+N,dataType:Q?"jsonp":"json",cache:false,success:function(P,U,W){if(P.error){if(v)return v({xhr:W,status:U,data:P});return D.unrecoverable_error(P.error)}D.raptor=P.rapton;D.info=P;console.log("got rapton response",P,"current location",window.location.href);if(config.toolbar||
config.in_app||D.jsonp||config.jsonp||config.ipad_ui||Q){console.log("bypass rapton switch -- in an app url or jsonp");D.client.raptor_host=P.rapton;o()}else if(window.location.protocol+"//"+window.location.host==P.rapton||config.raptor_redirect===false){D.client.raptor_host=P.rapton;console.log("client is on same raptor! cool");o()}else if(config.raptor_rendezvouz){D.client.raptor_host=P.rapton;console.warn("client on different raptor -- will proxy");o()}else{console.warn("client is on different raptor... will need to redirect :-( frowney face");
if(config.asserts)debugger;clients.redirect(P.rapton+"/talon/gui")}},error:function(P,U){v&&v(P,U);if(P.status==403)D.unrecoverable_error("bt_talon_tkt corresponded to user with no database entry");else P.readyState!=0&&D.unrecoverable_error("error asking for raptor")}};fjQuery.ajax(u)},get_token:function(o,v){if(this.pairing)return o();var u=this;if(config.webui)return u.webui_get_token(o,v);if(!(config.webui||u.pairing)&&!u.client.raptor_host){console.log("get token deferred until fetching raptor");
var D=h.bind(this.get_token,this,o,v);return u.get_raptor(D)}if(config.utweb&&!u.client.detailed_client_info){D=h.bind(this.get_token,this,o,v);return u.get_info(D)}D=false;var L=clients.get_current_client().data.key;if(!L||L.length!=40){D=true;var N='You must re log in (invalid private key). Private key: "'+L+'"'}if(D)if(v)return v({err:Error(N)});else this.unrecoverable_error(N);var Q=u.cipher.ivoffset;D=(this.jsonp||config.toolbar?this.client.raptor_host:"")+"/client/gui/token.html?"+this.client.client_qs();
L={url:D,processData:false,dataType:this.jsonp?"jsonp":"text",beforeSend:function(P){P.setRequestHeader("x-bt-seq",Q)},success:function(P,U,W){var da=u.processResponse(P,U,W,{encoding:"ascii"}),fa=null;if(u.jsonp)fa=da;else{var ha=da.match(/\'\>(.*)\<\/d/);if(ha&&ha.length==2)fa=ha[1]}if(fa&&fa.length==64)console.log("Received token",fa);else{if(config.asserts)debugger;console.error("Could not parse token");if(P.length==0)err_data={xhr:W,status:U,message:"Raptor returned OK but decryption resulted in empty data.",
decrypted_data:da};else{err_data={xhr:W,status:U,message:"Got a garbled looking token.",decrypted_data:da};return u.client.token_decryption_failed()}if(v)return v(err_data);else{if(config.asserts)debugger;throw Error(err_data);}}u.token=fa;o&&o()},error:function(P,U){var W=u.jsonp&&P.statusText=="parsererror"?"no client jsonp support":"XHR status > 400 (your client probably bounced)";console.error(W);P.status==401&&console.error("client reports this GUID is no longer valid");if(config.asserts)debugger;
if(v){P.status==401&&u.client.remove_from_stored_sessions();return v({err:Error(W),xhr:P,status:U})}else return u.client.client_sent_error(P,U,W)}};console.log("Request token",D);fjQuery.ajax(L)},make_request_url:function(o){var v=[];h.each(o,function(u,D){if(u!==undefined)h.isArray(u)?h.each(u,function(L){v.push(D+"="+encodeURIComponent(L))}):v.push(D+"="+encodeURIComponent(u))});return v.join("&")},make_post_body:function(o){function v(N,Q){return'Content-Disposition: multipart/form-data; name="'+
Q+'"\r\n\r\n'+N+"\r\n"}var u=this;if(config.webui)return o;var D="--"+u.boundary+"\r\n",L=[];h.each(o,function(N,Q){h.isArray(N)?h.each(N,function(P){L.push(v(P,Q))}):L.push(v(N,Q))});D+=L.join("--"+u.boundary+"\r\n");D+="--"+u.boundary+"\r\n\r\n\r\n";return D},request:function(o,v,u,D,L,N,Q){var P=this;if(!(config.webui||this.pairing)&&!P.client.raptor_host){console.log("request deferred until raptor fetched");o=h.bind(this.request,this,o,v,u,D,L,N,Q);return P.get_raptor(o,N)}var U=config.verbose>
2&&u.list==null||config.verbose>3;if(U)h.keys(D).length>0?console.log("Request",u,D):console.log("Request",u);if(this.pairing)return P.pairing_get(u,D,L,N,Q);if(!P.token){o=h.bind(this.request,this,o,v,u,D,L,N,Q);return P.get_token(o)}if(config.webui)return P.webui_get(u,D,L,N,Q);v=h.isString(u)?v+"?"+u+"&"+P.client.client_qs():v+"?"+P.make_request_url(u)+"&"+P.client.client_qs();if(this.jsonp)v=this.client.raptor_host+v;D=h.extend({token:P.token,t:(new Date).getTime()},D);D=P.make_post_body(D);var W=
P.cipher.ivoffset;D=P.cipher.encrypt(D);u=Q&&Q.timeout?Q.timeout:4E4;if(this.jsonp){o="GET";v=v+"&encbody="+D;D=null}var da=true;if(Q&&!Q.async)da=false;return fjQuery.ajax({url:v,type:o,data:D,timeout:u,async:da,dataType:this.jsonp?"jsonp":"text",processData:false,contentType:"application/octet-stream; boundary="+P.boundary+"; charset=ascii",beforeSend:function(fa){fa.setRequestHeader("x-bt-seq",W)},success:function(fa,ha,oa){function I(va,x){if(x)if(L){try{var y=n.parse(x)}catch(z){console.error("utf-8 decoding failed -- falling back to ascii");
if(config.asserts)debugger;function q(s,B){if(L){try{y=n.parse(B)}catch(E){console.error("fallback ascii json parse failed too");if(config.asserts)debugger;return N({message:"JSON parse error",error:E,status:ha,xhr:oa})}L(y,ha,oa)}}return P.processResponseAsync(va,ha,oa,q,{encoding:"ascii"})}U&&console.log("Response",y);L&&L(y,ha,oa)}else{console.log("no callback specified for",this,x.slice(0,200)+"...");if(config.asserts)debugger}else{ka={msg:"No data was decrypted (cipher returned nothing)",xhr:oa,
data:fa,status:ha};console.log(ka.msg);if(N)return N(ka);else throw Error(ka);}}if(fa=="invalid request")if(N){var ka={msg:"Client thought request was invalid (no explicit reason returned)",xhr:oa,data:fa,status:ha};console.error(ka.msg);return N(ka)}else debugger;fa?P.processResponseAsync(fa,ha,oa,I):I(fa,fa)},error:function(fa,ha){console.error("XHR error",fa,ha);fa=ha=="timeout"?{xhr:fa,status:ha,msg:"Request timed out"}:fa.status==0?{xhr:fa,status:ha,msg:"Raptor host/port is refusing connections. Did raptor segfault?"}:
{msg:"Raptor is alive but wont proxy your request",xhr:fa,status:ha};if(N)return N(fa);else{console.log(fa.msg);console.error("the following error is uncaught... that is (probably) a problem.");if(config.asserts)debugger;throw Error(fa);}}})},create_pairing_url:function(o){return this.pairing.local_url+"/gui/?action="+o+"&"+this.pairing.create_qs(this.pairing.pairing_key)},pairing_get:function(o,v,u,D){function L(U,W){console.error("pairing request failure");if(D)return D({error:"400 bad request maybe",
info:"jsonp fail",extra_info:"jsonp does not give very many error codes",xhr:U,status:W})}function N(U,W,da){if(U=="invalid request"){console.error("pairing key invalid for client",Q.client);if(config.asserts)debugger;Q.client.remove_from_stored_sessions();if(D){U={error:"not authorized"};return D(U)}return L(W,da)}else if(h.isString(U)){if(D){U={error:"invalid json"};return D(U)}return L(W,da)}config.verbose>2&&console.log("Pairing Response:",U);return u(U)}var Q=this,P=[];if(h.isString(o)){P.push(o);
o={}}if(o.list){log_this=false;P.push("list="+o.list);delete o.list}if(o.action){P.push("action="+o.action);delete o.action}h.extend(o,v);h.each(o,function(U,W){h.isArray(U)?h.each(U,function(da){P.push(W+"="+encodeURIComponent(da))}):P.push(W+"="+encodeURIComponent(U))});if(!Q.pairing.local_url){console.error("pairing was not initialized yet");debugger}o=Q.pairing.local_url+"/gui/?"+P.join("&")+"&"+Q.pairing.create_qs(Q.pairing.pairing_key);v={url:o,timeout:1E4,type:"get",dataType:"jsonp",success:h.bind(N,
this),error:L};config.verbose>2&&console.log("Pairing Request:",o);return fjQuery.ajax(v)},webui_get:function(o,v,u,D,L){var N=this;if(!N.token)throw Error("Must call get_token first");var Q=true,P=[];if(h.isString(o)){P.push(o);o={}}if(o.list){Q=false;P.push("list="+o.list);delete o.list}if(o.action){P.push("action="+o.action);delete o.action}h.extend(o,v);h.each(o,function(U,W){h.isArray(U)?h.each(U,function(da){P.push(W+"="+encodeURIComponent(da))}):P.push(W+"="+encodeURIComponent(U))});o="/gui/?token="+
N.token+"&"+P.join("&");v=true;if(L&&!L.async)v=false;L={url:o,timeout:1E4,type:"get",async:v,success:function(U,W,da){try{var fa=n.parse(U)}catch(ha){U={msg:"JSON parse error",error:ha,data:U,status:W,xhr:da};if(D)D(U);else throw U;}if(u){if(Q||config.verbose>1||1)window.console&&console.log&&console.log("WebUI Response:",fa);u(fa,W,da)}},error:function(U,W){if(W=="timeout"){U={xhr:U,status:W,msg:"Request timed out"};window.console&&console.error&&console.error(U.msg)}else if(U.status==400&&U.responseText.match("invalid request"))U=
{xhr:U,status:W,msg:"Invalid token (30 minute expiry met)",code:"webui.invalid_token"};else{U={xhr:U,status:W,msg:"Other error"};window.console&&console.error&&console.error(U.msg)}if(D)return D(U);else{window.console&&console.error&&console.error(U.msg);throw Error(U);}}};if(Q||config.verbose>1||1)window.console&&console.log&&console.log("WebUI Request:",o);return fjQuery.ajax(L)},webui_get_token:function(o){console.log("webui: get token");if(!d().GUID){failed=true;if(config.asserts)debugger}var v=
this,u={url:"/gui/token.html",type:"get",success:function(D){if((D=D.match(/\'\>(.*)\<\/d/))&&D.length==2){D=D[1];v.token=D;console.log("Received token",D);o()}}};console.log("Request token");return fjQuery.ajax(u)},post:function(o,v,u,D,L){return this.request("post","/client/gui/",o,v,u,D,L)}}})(exports._);window.featured_apps=[{alias:"newtv",app_update_url:"http://apps.bittorrent.com/newtv/FourEyedMonsters.btapp",name:"FourEyedMonsters"},{alias:"ted",app_update_url:"http://apps.bittorrent.com/ted/ted.btapp",name:"TED"},{alias:"clearbits",app_update_url:"http://apps.bittorrent.com/clearbits/clearbits.btapp",name:"ClearBits Featured"},{alias:"khan",app_update_url:"http://apps.bittorrent.com/khanacademy/KhanAcademy.btapp",name:"Khan Academy"},{alias:"uMap",app_update_url:"http://apps.bittorrent.com/umap/umap.btapp",
name:"uMap",requires:"peers"},{alias:"vodo",app_update_url:"http://apps.bittorrent.com/vodo/vodo.btapp",name:"VODO"},{alias:"ubrowse",app_update_url:"http://apps.bittorrent.com/ubrowse/ubrowse.btapp",name:"uBrowse",requires:"files"},{alias:"share",app_update_url:"AOEUAOEU",name:"share",requires:"files"}];function sha1Hash(b){var d=[1518500249,1859775393,2400959708,3395469782];b+=String.fromCharCode(128);for(var e=Math.ceil((b.length/4+2)/16),h=new Array(e),n=0;n<e;n++){h[n]=new Array(16);for(var o=0;o<16;o++)h[n][o]=b.charCodeAt(n*64+o*4)<<24|b.charCodeAt(n*64+o*4+1)<<16|b.charCodeAt(n*64+o*4+2)<<8|b.charCodeAt(n*64+o*4+3)}h[e-1][14]=(b.length-1)*8/Math.pow(2,32);h[e-1][14]=Math.floor(h[e-1][14]);h[e-1][15]=(b.length-1)*8&4294967295;b=1732584193;o=4023233417;var v=2562383102,u=271733878,D=3285377520,
L=new Array(80),N,Q,P,U,W;for(n=0;n<e;n++){for(var da=0;da<16;da++)L[da]=h[n][da];for(da=16;da<80;da++)L[da]=ROTL(L[da-3]^L[da-8]^L[da-14]^L[da-16],1);N=b;Q=o;P=v;U=u;W=D;for(da=0;da<80;da++){var fa=Math.floor(da/20);fa=ROTL(N,5)+f(fa,Q,P,U)+W+d[fa]+L[da]&4294967295;W=U;U=P;P=ROTL(Q,30);Q=N;N=fa}b=b+N&4294967295;o=o+Q&4294967295;v=v+P&4294967295;u=u+U&4294967295;D=D+W&4294967295}return b.toHexStr()+o.toHexStr()+v.toHexStr()+u.toHexStr()+D.toHexStr()}
function f(b,d,e,h){switch(b){case 0:return d&e^~d&h;case 1:return d^e^h;case 2:return d&e^d&h^e&h;case 3:return d^e^h}}function ROTL(b,d){return b<<d|b>>>32-d}Number.prototype.toHexStr=function(){for(var b="",d,e=7;e>=0;e--){d=this>>>e*4&15;b+=d.toString(16)}return b};var Client,APISpecification,RaptorRequestManager;
(function(b){function d(x){parts=[];quanta=Math.floor(x.length/5);if(leftover=x%5){for(var y=0;y<5-leftover;y++)x+="\u0000";quanta+=1}for(y=0;y<quanta;y++){c1=(x.charCodeAt(y*5)<<8)+x.charCodeAt(y*5+1);c2=(x.charCodeAt(y*5+2)<<8)+x.charCodeAt(y*5+3);c3=x.charCodeAt(y*5+4);c2+=(c1&1)<<16;c3+=(c2&3)<<8;parts+="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charAt(c1>>11);parts+="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charAt(c1>>6&31);parts+="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charAt(c1>>1&31);parts+="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charAt(c2>>
12);parts+="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charAt(c2>>7&31);parts+="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charAt(c2>>2&31);parts+="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charAt(c3>>5);parts+="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charAt(c3&31)}if(leftover==1)parts=parts.slice(0,-6)+"======";else if(leftover==2)parts=parts.slice(0,-4)+"====";else if(leftover==3)parts=parts.slice(0,-3)+"===";else if(leftover==4)parts=parts.slice(0,-1)+"=";return parts}function e(x){for(var y="",z=0;z<x.length;z+=2)y+=String.fromCharCode(parseInt(x.charAt(z)+
x.charAt(z+1),16));return y}function h(x){return d(e(x))}function n(x){return"magnet:?xt=urn:btih:"+x.toUpperCase()}function o(x,y){this.manager=x;for(k in y)this[k]=y[k]}function v(x){this.client=x;this._sessions={}}if(window._&&window._.include)window._.contains=window._.include;b32infohash=h;Formatters={};APISpecification=new (function(){this.app=[{name:"name"},{name:"update_url"},{name:"version"}];this.torrent=[{name:"hash"},{name:"status",type:"int",bits:["started","checking","start after check",
"checked","error","paused","queued","loaded"]},{name:"name"},{name:"size",type:"int"},{name:"progress",type:"int"},{name:"downloaded",type:"int"},{name:"uploaded",type:"int"},{name:"ratio",type:"int"},{name:"up_speed",type:"int"},{name:"down_speed",type:"int"},{name:"eta",type:"int"},{name:"label"},{name:"peers_connected",type:"int"},{name:"peers_swarm",type:"int",alias:"peers_in_swarm"},{name:"seed_connected",type:"int",alias:"seeds_connected"},{name:"seed_swarm",type:"int",alias:"seeds_in_swarm"},
{name:"availability",type:"int"},{name:"queue_position",type:"int",alias:"queue_order"},{name:"remaining",type:"int"},{name:"download_url"},{name:"rss_feed_url"},{name:"message"},{name:"stream_id"},{name:"added_on",type:"int"},{name:"completed_on",type:"int"},{name:"app_update_url"},{name:"directory"},{name:"webseed_enabled"}];this.peer=[{name:"country"},{name:"ip"},{name:"hostname"},{name:"protocol",type:"int"},{name:"port",type:"int"},{name:"client"},{name:"flags"},{name:"complete",type:"int"},
{name:"down_speed",type:"int"},{name:"up_speed",type:"int"},{name:"pending",type:"int"},{name:"requests",type:"int"},{name:"waited",type:"int"},{name:"uploaded",type:"int"},{name:"downloaded",type:"int"},{name:"hasherr",type:"int"},{name:"peer_download_rate",type:"int"},{name:"maxup",type:"int"},{name:"maxdown",type:"int"},{name:"queued",type:"int"},{name:"inactive",type:"int"},{name:"relevance",type:"int"}];this.file=[{name:"name"},{name:"size",type:"int",unit:"bytes"},{name:"downloaded",type:"int",
unit:"bytes"},{name:"priority",type:"int"},{name:"first_piece",type:"int"},{name:"num_pieces",type:"int"},{name:"streamable",type:"bool"},{name:"encoded_rate",type:"int"},{name:"duration",type:"int"},{name:"width",type:"int"},{name:"height",type:"int"},{name:"stream_eta",type:"int"},{name:"streamability",type:"int"}];this.client_setting=[{name:"name"},{name:"type",type:"int",value_map:{0:"int",1:"bool",2:"str"}},{name:"value"},{name:"access",type:"object",value_map:{Y:"read/write",R:"readonly",W:"writeonly"}}];
this.torrent_setting=[{name:"hash"},{name:"trackers"},{name:"ulrate",type:"int"},{name:"dlrate",type:"int"},{name:"superseed",type:"bool"},{name:"dht",type:"bool"},{name:"pex",type:"bool"},{name:"seed_override",type:"bool"},{name:"seed_ratio",type:"int",unit:"per1000"},{name:"seed_time",type:"int",unit:"seconds"},{name:"seed_num",type:"int"},{name:"ulslots",type:"int"}];this.feed=[{name:"ident",type:"int"},{name:"enabled",type:"bool"},{name:"usefeedtitle",type:"bool"},{name:"user_selected",type:"bool"},
{name:"programmed",type:"bool"},{name:"download_state",type:"int"},{name:"url",type:"bool"},{name:"next_update",type:"int"},{name:"items",type:"object"}];this.feed_item=[{name:"name"},{name:"name_full"},{name:"url"},{name:"quality",type:"int"},{name:"codec",type:"int"},{name:"timestamp",type:"int"},{name:"season",type:"int"},{name:"episode",type:"int"},{name:"episode_to",type:"int"},{name:"feed_id",type:"int"},{name:"repack",type:"bool"},{name:"in_history",type:"bool"},{name:"torrent",type:"native-object"}];
this.feed_rule=[{name:"ident",type:"int"},{name:"flags",type:"int"},{name:"name"},{name:"filter"},{name:"not_filter"},{name:"directory"},{name:"feed",type:"int"},{name:"quality",type:"int"},{name:"label"},{name:"postpone_mode",type:"int"},{name:"last_match",type:"int"},{name:"smart_ep_filter",type:"int"},{name:"repack_ep_filter",type:"int"},{name:"episode_filter_str"},{name:"episode_filter",type:"bool"},{name:"resolving_candidate",type:"bool"}];this.label=[{name:"name"},{name:"contains",type:"int"}];
this.feed_encoding=["?","MPEG","MPEG-2","MPEG-4","Real","WMV","Xvid","DivX","X264","H264","WMV-HD","VC1"];this.feed_quality=["?","HDTV","TVRip","DVDRip","SVCD","DSRip","DVBRip","PDTV","HR.HDTV","HR.PDTV","DVDR","DVDScr","720p","1080i","1080p","WebRip","SatRip"];b.each(["torrent","peer","file","client_setting","torrent_setting","app","feed","feed_item","feed_rule","label"],function(x){this[x+"_lookup"]={};b.each(this[x],function(y,z){this[x+"_lookup"][y.name]=z},this)},this)});var u=function(x,y,z,
q){return function(){var s=this,B=arguments,E=B[z.length];if(s.fetched&&!q)return E?E(z.apply(s,B)):z.apply(s,B);else{x.apply(s,[E?function(S){y.apply(s,[S]);E(z.apply(s,B))}:function(S){y.apply(s,[S]);z.apply(s,B)}]);return{}}}};DataFreshnessManager=function(){};DataFreshnessManager.prototype={start:function(){},stop:function(){}};RaptorRequestManager=function(x,y){this.__name__="RaptorRequestManager";this.api=y;this.client=this.api.client=x;this.last_successful_request_time=null;this.request_queue=
[];this.current_request=null;this.request_count_failure=this.request_count_success=0;this.listResponses=[]};RaptorRequestManager.prototype={proxy_base_url:function(x,y){if(config.local_discovery)return"http://"+config.local_discovery+"/proxy";else if(x){if(y){x=x.split(":");y=parseInt(x[2],10)+config.port_delta;x="http://"+x[1].slice(2,x[1].length)+":"+y}return x+(config.proxy_prefix||"/client/proxy")}else return config.proxy_prefix||"/client/proxy"},request_returned:function(x){x.status!="timeout"&&
x.xhr&&x.xhr.status==200&&parseInt(x.xhr.getResponseHeader("content-length"),10);if(this.request_queue.length>0){x=this.request_queue[0];this.request_queue=this.request_queue.slice(1,this.request_queue.length);console.log("pushing request off queue");x()}},proxy:function(x,y,z){fjQuery.ajax({url:this.proxy_base_url()+"?"+jQuery.param(x),success:function(q,s,B){if(B.status==0){var E={status:s,xhr:B};if(z)z(E);else{console.log("proxy getfile failed. (xhr status 0) jquery ajax calls this success???");
throw Error(E);}}console.log("successfully downloaded file");y(q,s,B)},error:function(q,s){q={xhr:q,status:s};if(z)z(q);else{console.log("proxy getfile failed :-(");throw Error(q);}}})},post_raw:function(x,y,z,q,s){config.webui?this.api.webui_get(x,y||{},z,s):this.api.post(x,y||{},z,s)},post:function(x,y,z,q,s){function B(ba,V,La){Y.request_count_success+=1;Y.request_returned({json:ba,status:V,xhr:La});Y.last_successful_request_time=new Date;V=b.keys(ba);if(ba.build)Y.version=ba.build;ba.torrents&&
Y.client.torrent.eat(ba);if(ba.torrentm||ba.torrentc)Y.client.torrent.eat(ba);if(ba.label){Y.client.label.eat(ba);Y.client.label.correct_counts_for_primary(Y.client.torrent._torrents)}if(ba.apps!==undefined&&(config.client_apps||config.cookies&&config.cookies.client_apps)&&!config.webui&&!config.classic_iphone_interface)Y.client.app.eat(ba);ba.sessions&&Y.client.session.eat(ba);for(key in ba)if(key.match("rssfeed")){Y.client.feed.eat(ba);break}for(key in ba)if(key.match("rssfilter")){Y.client.feedrule.eat(ba);
break}ba.apps&&Y.client.app.eat(ba);if(ba.files)for(var Aa=0;Aa<ba.files.length/2;Aa++){var i=ba.files[Aa*2];i=Y.client.torrent.get(i);i.file.eat(ba)}if(ba.peers)for(Aa=0;Aa<ba.peers.length/2;Aa++){i=ba.peers[Aa*2];i=Y.client.torrent.get(i);i.peer.eat(ba)}if(ba.props){i=Y.client.torrent.get(ba.props[0].hash);i.setting.eat(ba)}z&&z(ba,La);config.build!="embedded"&&window.utWebUI&&window.utweb&&!window.utweb._logging_out&&utWebUI.loadList(ba);Y.client.call_update_listeners(V)}function E(ba){Y.request_count_failure+=
1;Y.request_returned(ba);var V=ba.xhr;if(q)return q(ba);Y.client.call_update_fail_listeners(V,ba.status,ba)}function S(){config.webui?Y.api.webui_get(x,y||{},B,E,s):Y.api.post(x,y||{},B,E,s)}var Y=this;if(Y.request_queue.length>0){console.log("queueing request");Y.request_queue.push(S)}else S()}};var D=function(x,y){var z=this;z.__name__="Peer";z.manager=x;z._data=y;b.map(APISpecification.peer,function(q,s){z[q.name]=y[s]});z.properties={all:function(){return z},keys:function(){return b.keys(z)},
set:function(){},get:function(q){return z[q]!==undefined?z[q]:null}};z.uid=z.ip+":"+z.port};D.prototype={get_progress_text:function(){return""},get_progress_color:function(){return this.complete==1E3?"blue":"green"}};var L=function(x){var y=this;y.__name__="PeerManager";y.torrent=x;y.fetched=false;y._peers={}};L.prototype=new (function(){var x=function(z){var q=this;this._peers={};for(var s=0,B=0;B<z.peers.length/2;B++)if(z.peers[B*2]==this.torrent.hash){z=z.peers[B*2+1];this.fetched=true;this.fetch_time=
new Date;this._peers={};b.each(z,function(E){E=new D(q,E);E.uid+=s;s++;q._peers[E.uid]=E});this._data=b.values(this._peers);return this._peers}},y=function(z){_this.client.raptor.post({action:"getpeers"},{hash:this.torrent.hash},z)};this.all=u(y,x,function(){return this._peers});this.update=u(y,x,function(){return this._peers},true);this.keys=u(y,x,function(){return b.keys(this._peers)});this.get=u(y,x,function(z){return this._peers[z]});this.data=function(){return this._data};this.eat=function(z){return x.apply(this,
[z])}});var N=function(x,y){var z=this;z.__name__="File";z.manager=x;z.torrent=x.torrent;z._data=y;b.map(APISpecification.file,function(q,s){z[q.name]=y[s]});z.properties={all:function(){return z},keys:function(){return b.keys(z)},set:function(){},get:function(q){return z[q]!==undefined?z[q]:null}};z.uid=z.name;z.progress=Math.floor(z.downloaded/z.size*1E3);z.extension=this.get_extension()};N.prototype={__render:function(){return'<span style="font-size:120%">'+this.name+"</span>"},isImage:function(){if(b.contains(["png",
"jpg","gif","jpeg","bmp","ico"],this.extension))return this},vestel_play:function(){var x=this;console.log("vestel play on",x);var y=document.createElement("object");console.log("vid object obj",y);y.setAttribute("type","video/mp4");var z={nonssl:true};if(config.webui)z.include_host=true;x=x.get_link("inline","DOWNLOAD",z);y.setAttribute("data",x);y.setAttribute("id","player_object");y.setAttribute("width",1280);y.setAttribute("height",720);y.setAttribute("style","z-index:99");jQuery("#app_container").hide();
console.log("player container",jQuery("#player_container")[0]);jQuery("#player_container")[0].appendChild(y);console.log("setup object with url",x);var q=this;setTimeout(function(){console.log("telling it to play now");q.play_obj=document.getElementById("player_object");q.play_obj.play(1)},1E3);jQuery(document).keydown(function(s){if(s.keyCode==413){if(s=document.getElementById("player_object")){jQuery("#app_container").show();jQuery("#player_container").hide();s.stop();this.playing=false;s.parentNode.removeChild(s)}}else if(s.keyCode==
19)if(s=document.getElementById("player_object")){console.log("player speed",s.speed);s.speed=0}})},sling:function(){console.log("sling called");return this.vestel_play()},open:function(){console.log("file",this,this.name,"open");config.utweb&&window.utweb&&this.playable();window.open(this.get_link())},determine_profile:function(){if(this._avdata){var x=this._avdata.audioCodecName.split("_"),y=x[x.length-1];x=this._avdata.videoCodecName.split("_");x=x[x.length-1];var z=this._avdata.videoBitrate/1024,
q=this._avdata.audioBitrate/1024,s=this._avdata.frameWidth,B=this._avdata.frameHeight,E={};if(y=="AAC"){if(q<=1152)E.audio="HD"}else if(y=="MP3"){if(q<=320)E.audio="SD"}else if(y=="AC3")if(q<=640)E.audio="SD";if(x=="H264"){if(z<=2E4)if(s<=1920&&B<=1080)E.video="HD"}else if(x=="MPEG4")if(z<=2E3)if(s<=720&&B<=576)E.video="SD";return E}},get_av_codecs:function(){var x=this._avdata.audioCodecName.split("_"),y=x[x.length-1];x=this._avdata.videoCodecName.split("_");return{audio:y,video:x[x.length-1]}},
get_transcode_options:function(x){var y={fileExtension:"mpeg avi mp4 wav mpg mov mp3 ts asf wma wmv mkv mka ogg vob webm aiff".split(" "),videoCodec:"default mpeg1 mpeg2 mpeg4_p2 h264 copy".split(" "),audioCodec:"default ac3 mp3 copy".split(" "),frameSize:"default vga svga hd480 hd720 hd1080".split(" ")},z={},q=this.get_av_codecs();if(x.preset=="HD"){videoCodec=q.video=="H264"?"copy":"h264";audioCodec=q.audio=="MP3"||q.audio=="AC3"?"copy":"mp3";if(this._avdata.videoBitrate==0)this._avdata.videoBitrate=
2048E4;b.extend(z,{fileExtension:y.fileExtension.indexOf("mkv"),videoCodec:y.videoCodec.indexOf(videoCodec),audioCodec:y.audioCodec.indexOf(audioCodec),preserveQuality:1,videoBitrate:Math.floor(parseInt(this._avdata.videoBitrate)/1024),audioBitrate:Math.floor(parseInt(this._avdata.audioBitrate)/1024),frameSize:y.frameSize.indexOf("default"),fileName:this.get_local_path(),targetFile:this.get_local_path()+".__conv_HD"})}if(x.preset=="SD"){if(this._avdata.videoBitrate==0)this._avdata.videoBitrate=2048E3;
videoCodec=q.video=="MPEG4"?"copy":"mpeg4_p2";audioCodec=q.audio=="MP3"||q.audio=="AC3"?"copy":"mp3";b.extend(z,{fileExtension:y.fileExtension.indexOf("avi"),videoCodec:y.videoCodec.indexOf(videoCodec),audioCodec:y.audioCodec.indexOf(audioCodec),preserveQuality:0,videoBitrate:Math.floor(parseInt(this._avdata.videoBitrate)/1024),audioBitrate:Math.floor(parseInt(this._avdata.audioBitrate)/1024),frameSize:y.frameSize.indexOf("svga"),fileName:this.get_local_path(),targetFile:this.get_local_path()+".__conv_SD"})}return z},
getavdata:function(x){function y(B){x({error:B})}function z(B){if(B.html)try{var E=JSON.parse(B.html);console.log("got av data",E);if(window.ffmpeg_meta){E.audioCodecName=ffmpeg_meta.codecs[E.audioCodec];E.videoCodecName=ffmpeg_meta.codecs[E.videoCodec]}q._avdata=E;x(E)}catch(S){y(B)}else y(B)}var q=this,s="http://127.0.0.1:8080/formatquery?type=avdata&file="+escape(this.get_local_path());console.log("query av data",s);q.manager.torrent.manager.client.raptor.post({action:"get-url"},{url:s},z,y)},
get_local_path:function(){return this.manager.torrent.directory+"\\"+this.name},playable:function(){return b.contains("mp3 m4v flv wmv avi ogg mp4 mkv mov mp4 mpg mpeg flac 3gp".split(" "),this.extension.toLowerCase())||this.encoded_rate},html5_playable:function(){return b.contains("mp4 mp3 wav webm ogg 3gp".split(" "),this.extension.toLowerCase())},demo_playable:function(){return b.contains("avi mp4 mkv mp4 3gp".split(" "),this.extension.toLowerCase())||this.encoded_rate>0},get_link:function(x,y,
z){var q=z&&z.include_host;z=z&&z.nonssl;y={sid:this.manager.torrent.stream_id,file:this.id,service:y||"DOWNLOAD",qos:0,disposition:x||"inline"};x=this.manager.torrent.manager.client;var s=!x.raptor.api.pairing&&config.utweb&&!config.local_discovery?"/"+this.get_filename():"";z=x.raptor.api.pairing?x.raptor.api.pairing.local_url+"/proxy"+s+"?"+jQuery.param(y):x.raptor.proxy_base_url(x.raptor_host,z)+s+"?"+jQuery.param(y);if(x.raptor_host)z=z+"&"+x.client_qs();if(q)z="http://"+document.location.hostname+
":"+document.location.port+z;return z},get_webui_stream_link:function(){if(window.location.protocol=="https:")throw Error("VLC cant handle https streams :-( sorry!");return"http://"+document.location.hostname+":"+document.location.port+this.get_link("inline","STREAMING")},get_nonssl_link:function(x){x={sid:this.manager.torrent.stream_id,file:this.id,service:"DOWNLOAD",qos:0,t:(new Date).getTime(),disposition:x||"inline"};return"http://"+document.location.hostname+":"+(parseInt(document.location.port,
10)+config.port_delta)+this.manager.torrent.manager.client.raptor.proxy_base_url()+"?"+jQuery.param(x)},get_forward_nonssl_link:function(){var x={sid:this.manager.torrent.stream_id,file:this.id,service:"STREAMING",qos:0,GUID:jQuery.cookie("GUID"),username:jQuery.cookie("bt_user")};return"http://"+document.location.hostname+":"+(parseInt(document.location.port,10)+config.port_delta)+"/talon/streamfile?"+jQuery.param(x)},get_web_seed_link:function(){return config.utweb?"http://"+document.location.hostname+
":"+(parseInt(document.location.port,10)+1E3)+"/talon/seed/"+this.manager.torrent.manager.client.data.cid+"/content/"+this.manager.torrent.stream_id+"/"+escape(this.name):this.manager.torrent.file.length==1?"/seed/0/content/"+this.manager.torrent.stream_id+"/"+escape(this.name.replacebacks()):"/seed/0/content/"+this.manager.torrent.stream_id+"/"+escape(this.manager.torrent.name)+"/"+escape(this.name.replacebacks())},get_talon_stream:function(x,y){x={sid:this.manager.torrent.stream_id,file:this.id,
qos:0,disposition:x||"inline",service:y||"DOWNLOAD",GUID:jQuery.cookie("GUID"),username:jQuery.cookie("bt_user")};return"http://"+document.location.hostname+":"+(parseInt(document.location.port,10)-1E3)+"/talon/proxystreamfile?"+jQuery.param(x)},get_progress_text:function(){return this.progress==1E3?locale("OV_FL_FINISHED"):this.progress/10+locale("FI_COL_PCNT")},get_progress_color:function(){return this.progress==1E3?"white":"green"},get_filename:function(){var x=this.name.split("\\");return x[x.length-
1]},get_extension:function(){var x=this.name.split(".");return x.length==1?"":x[x.length-1].toLowerCase()},isCompleted:function(){return this.downloaded==this.size},setPriority:function(x){var y=this.manager.torrent;y.manager.client.raptor.post({action:"setprio",p:x,f:this.id},{hash:y.hash})}};var Q=function(x){var y=this;y.__name__="FileManager";y.torrent=x;y.files={};y.fetched=false;y.length=0};Q.prototype=new (function(){var x=function(z){var q=this;this.length=z.files.length/2;for(var s=0;s<z.files.length/
2;s++)if(z.files[s*2]==this.torrent.hash){z=z.files[s*2+1];this.fetched=true;this.fetch_time=new Date;b.each(z,function(B,E){B=new N(q,B);B.id=E;q.files[B.uid]=B});this._data=b.values(this.files);b.defer(function(){q.torrent.manager._trigger_event("fileStatus",{message:"Files Updated",manager:q})});return this.files}},y=function(z){this.torrent.manager.client.raptor.post({action:"getfiles"},{hash:this.torrent.hash},z)};this.all=u(y,x,function(){return this.files});this.update=u(y,x,function(){return this.files},
true);this.keys=u(y,x,function(){return b.keys(this.files)});this.get=u(y,x,function(z){return this.files[z]});this.eat=function(z){return x.apply(this,[z])};this.data=function(){return this._data}});var P=function(x,y,z){var q=this;q.__name__="TorrentSetting";q.manager=x;q.name=y;x=APISpecification.torrent_setting_lookup[y];if(APISpecification.torrent_setting[x])q.type="string";else{x=APISpecification.torrent_setting[x];q.type=x?x.type||"string":"string"}q.value=q.type=="bool"?!!z:z};P.prototype=
{set:function(x,y){var z=this;this.manager.client.raptor.post({action:"setprops",s:this.name,v:x},{hash:this.manager.torrent.hash},y?function(q){z.value=x;y.apply(z,[q])}:function(){z.value=x})}};var U=function(x){var y=this;y.__name__="TorrentSettingManager";y.torrent=x;y.settings={};y.fetched=false};window.TorrentSettingManager=U;U.prototype=new (function(){var x=function(z){this.fetched=true;this.fetch_time=new Date;b.map(z.props[0],function(q,s){q=new P(this,s,q);this.settings[s]=q},this);return this},
y=function(z){this.client.raptor.post({action:"getprops"},{hash:this.torrent.hash},z)};this.eat=function(z){x.apply(this,[z])};this.keys=function(){return b.map(APISpecification.torrent_setting,function(z){return z.name})};this.all=u(y,x,function(){return this.settings});this.get=u(y,x,function(z){return this.settings[z]})});var W=function(x){var y=this;this.__name__="TorrentManager";y.client=x;this.status_categories=["Downloading","Completed","Active","Inactive","Seeding","Not Alone","All"];y.cacheid=
null;y.fetched=false;y.hashindex={};y._removed=[];y._changed=[];y._torrents={};y._rawtorrents={};y._event_listeners={}};window.TorrentManager=W;W.prototype=new (function(){this.data=function(){return b.map(this._torrents,function(s){return s})};var x=function(s){var B=this;this.fetched&&b.each(b.keys(B._torrents),function(E){delete B._torrents[E]});this.cacheid=s.torrentc;b.map(s.torrents,function(E){var S=E[APISpecification.torrent_lookup.hash];B._rawtorrents[S]=E;B._torrents[S]=new oa(B,E)});this.update_category_counts();
return this},y=function(s){var B=this;this.cacheid=s.torrentc;this._changed=b.map(s.torrentp,function(E){return new oa(B,E)});this._removed=b.map(s.torrentm,function(E){return B.get(E)});b.each(this._removed,function(E){var S={hash:E.hash,state:-1,url:E.download_url,message:"Torrent File Removed",status:200};b.defer(function(){B._trigger_event("torrentStatus",S)});delete B._torrents[E.hash];delete B._rawtorrents[E.hash]});b.each(this._changed,function(E){var S=E.hash,Y=B._torrents[S];if(Y){if(Y.progress!=
1E3&&E.progress==1E3){var ba={hash:Y.hash,state:1,url:Y.download_url,message:"Torrent File Completed",status:200};b.defer(function(){B._trigger_event("torrentStatus",ba)})}Y.data(E.data());Y.status_array=Y.get_status()}else{if(B._new_torrent_listeners.length)for(Y=0;Y<B._new_torrent_listeners.length;Y++){var V=B._new_torrent_listeners[Y];b.defer(function(){V(E)})}ba={hash:E.hash,state:1,url:E.download_url,message:"Torrent File Added",status:200};if(E.size==0)ba.url=n(E.hash);b.defer(function(){B._trigger_event("torrentStatus",
ba)});B._torrents[S]=E;B._rawtorrents[S]=E.data()}});this._changed=b.map(this._changed,function(E){return B.get(E.hash)});this.update_category_counts();return this},z=function(s){this.cacheid&&this.cacheid!=null&&typeof this.cacheid!="undefined"?this.client.raptor.post({list:1,cid:this.cacheid},{},s):this.client.raptor.post({list:1},{},s)},q=function(s){this.fetched=true;this.fetch_time=new Date;return s.torrentp||s.torrentm?y.apply(this,[s]):x.apply(this,[s])};this.calculate_totals=function(){var s=
b.reduce(this._torrents,function(E,S){return E+S.up_speed},0),B=b.reduce(this._torrents,function(E,S){return E+S.down_speed},0);return{total_up_speed:s,total_down_speed:B}};this.countInCategory=function(s){var B=0;b.each(this.all(),function(E){if(E.matchesCategory(s))B+=1});return B};this._new_torrent_listeners=[];this.add_new_torrent_listener=function(s){this._new_torrent_listeners.push(s)};this.update_category_counts=function(){var s=this;this.category_counts={};b.each(this.status_categories,function(B){s.category_counts[B]=
s.countInCategory({status:B})})};this.add_event_listener=function(s,B){this._event_listeners[s]||(this._event_listeners[s]=[]);this._event_listeners[s].push(B)};this._trigger_event=function(s,B){var E=null;if(window.btapp)E=window.btapp;else if(window.frames.length==2)E=window.frames[1].btapp;E&&b.defer(function(){E._trigger_event(s,B)});var S=this._event_listeners[s];S&&b.each(S,function(Y){b.defer(function(){Y(B)})})};this.add=function(s,B){this.client.raptor.post({action:"add-url"},{s:s},B)};this.add_from_app=
function(s,B,E){this.client.raptor.post({action:"add-url"},{s:s,app_update_url:B.update_url},E)};this.addfile=function(s,B){console.log("addfile called");this.client.raptor.post({action:"add-file",p:1,uu:1},{torrent_file:s},B);console.log("addfile call success")};this.eat=function(s){return q.apply(this,[s])};this.keys=u(z,q,function(){return b.keys(this._torrents)});this.all=u(z,q,function(){return this._torrents});this.update=u(z,q,function(){return this._torrents},true);this.get=u(z,q,function(s){return this._torrents[s.toUpperCase()]});
this.command_many=function(s,B,E,S){if(E===undefined)E={};E.hash=s;this.client.raptor.post(B,E,S)};this.getwith=function(s){for(hash in this._torrents){var B=true;for(key in s)if(this._torrents[hash][key]!=s[key])B=false;if(B)return this._torrents[hash]}};this.search=function(s){if(this.fetched)for(hash in this._torrents)if(this._torrents[hash].name.toLowerCase().match(s.toLowerCase()))return this._torrents[hash]};this.getallwith=function(s){var B=[];for(uid in this._torrents){for(key in s);B.push(this._torrents[uid])}return B}});
W=function(x){var y=this;y.__name__="FeedManager";y.client=x;y.feeds=null;y.fetched=false};window.FeedManager=W;W.prototype=new (function(){var x=function(s){this.cacheid=s.torrentc;this.feeds={};b.map(s.rssfeeds,function(B){B=new da(this,B);this.feeds[B.ident]=B},this);return this},y=function(s){var B=this;this.cacheid=s.torrentc;var E=s.rssfeedp;b.map(s.rssfeedm,function(S){delete B.feeds[S]});b.map(E,function(S){S=new da(B,S);B.feeds[S.ident]=S})},z=function(s){this.fetched=true;this.fetch_time=
new Date;return s.rssfeedm||s.rssfeedp?y.apply(this,[s]):x.apply(this,[s])},q=function(s){this.client.raptor.post({list:1},{},s)};this.eat=function(s){return z.apply(this,[s])};this.keys=u(q,z,function(){return b.keys(this.feeds)});this.update=u(q,z,function(){return this.feeds},true);this.all=u(q,z,function(){return this.feeds});this.get=u(q,z,function(s){return this.feeds[s]});this.getwith=function(s){for(feedid in this.feeds){var B=true;for(key in s)if((key=="url"?this.feeds[feedid][key].split("|")[1]:
this.feeds[feedid][key])!=s[key])B=false;if(B)return this.feeds[feedid]}};this.add=function(s,B){this.client.raptor.post({action:"rss-update"},{url:s},B)};this.getByIdent=u(q,x,function(s){for(var B in this.feeds)if(this.feeds[B].ident==s)return this.feeds[B]})});var da=function(x,y){var z=this;z.__name__="Feed";z.manager=x;z._items={};z._data=y;b.map(APISpecification.feed,function(q,s){if(q.name=="items")b.each(y[s],function(B){var E=new fa(z,B);E.torrent&&B.push(E.torrent);z._items[E.uid]=E});else z[q.name]=
y[s]},this)};da.prototype={get_name:function(){return this.url.split("|")[0]},get_url:function(){return this.url.split("|")[1]},update:function(x,y){this.manager.client.raptor.post({action:"rss-update",feedid:this.ident},{alias:x,url:y})},tryadd:function(x,y,z){function q(){if(new Date-E>B){console.log((B/1E3).round(0),"seconds after attempted add feed",x,"as torrent");x.url_contains_hash()&&x.add_magnet();z&&z()}else if(x.get_torrent()){console.log("successfully turned rss feed item into torrent");
y&&y()}else setTimeout(q,s)}var s=200,B=1E4,E=new Date;setTimeout(q,s)},isSubscribed:function(){var x=this.manager.client.feedrule.all();for(var y in x){var z=x[y];if(z.filter=="*"&&z.feed==this.ident)if(z.flags==1)return true}return false},remove:function(){console.log("feed remove please");this.manager.client.raptor.post({action:"rss-remove",feedid:this.ident})},enable:function(){console.log("enable feed...");this.manager.client.raptor.post({action:"rss-update",feedid:this.ident,enabled:true})},
disable:function(){console.log("disable feed...");this.manager.client.raptor.post({action:"rss-update",feedid:this.ident,enabled:false})},data:function(x){if(x){var y=this;x=b.filter(this.manager.client.torrent.all(),function(q){return q.rss_feed_url==y.get_url()});var z={};b.each(this._items,function(q){z[q.url]=true});x=b.filter(x,function(q){return z[q.download_url]==undefined});return x.concat(b.values(this._items))}else return b.values(this._items)}};var fa=function(x,y){var z=this;z.__name__=
"FeedItem";z.feed=x;b.map(APISpecification.feed_item,function(q,s){z[q.name]=y[s]});z.uid=z.url;if(x=this.get_torrent())this.torrent=x};fa.prototype={__html__:function(){var x='Feed item: "'+this.name_full+'" with url <a target="_new" href="'+this.url+'">'+this.url+"</a>";if(this.url_contains_hash()){x+="<p>The URL contains what appears to be an infohash. We'll try to add using a magnet link (using the distributed hash table to find the torrent file)</p>";x+='<a href="'+this.magnet_url()+'">magnet link</a>'}return x},
url_contains_hash:function(){var x=this.url.match("[0-9a-fA-F]{40}");if(x)return x[0]},magnet_url:function(){var x=this.url_contains_hash();if(x)return n(x)+"&dn="+escape(this.name_full)+"&tr"+escape("http://denis.stalker.h3q.com:6969/announce")},add_magnet:function(){var x=this.magnet_url();if(x){console.log("adding feed",this,"via magnet link");this.feed.manager.client.raptor.post({action:"add-url",feedid:this.feed.ident},{s:x})}},add:function(){var x={action:"add-url",feedid:this.feed.ident},y=
{s:this.url};console.log("feeditem add",x,y);this.feed.manager.client.raptor.post(x,y);var z=this;this.url_contains_hash()&&setTimeout(function(){z.add_magnet()},200)},mutator_add_rss_url:function(){return this.url+(this.url[this.url.length-1]=="/"?"":"/")+"download.torrent"},get_torrent:function(){var x=this.feed.manager.client.torrent.getwith({download_url:this.url,rss_feed_url:this.feed.get_url()});if(x)return x;else if(x=this.url.match("[0-9a-fA-F]{40}"))if(x=this.feed.manager.client.torrent.get(x[0].toUpperCase()))return x}};
var ha=function(x,y){var z=this;z.manager=x;b.map(APISpecification.feed_rule,function(q,s){z[q.name]=y[s]})};ha.prototype={getfeed:function(){return this.manager.client.feed.getByIdent(this.feed)}};W=function(x){var y=this;y.__name__="FeedRuleManager";y.client=x;y.rules=null;y.fetched=false};window.FeedRuleManager=W;W.prototype=new (function(){var x=function(s){var B=this;this.rules={};s.rssfilters&&b.each(s.rssfilters,function(E){E=new ha(B,E);B.rules[E.ident]=E});return this},y=function(s){var B=
this;this.cacheid=s.torrentc;var E=s.rssfilterp;(s=s.rssfilterm)&&b.each(s,function(S){delete B.rules[S]});E&&b.each(E,function(S){S=new ha(B,S);B.rules[S.ident]=S})},z=function(s){this.fetched=true;this.fetch_time=new Date;return s.rssfilterm||s.rssfilterp?y.apply(this,[s]):x.apply(this,[s])},q=function(s){this.client.raptor.post({list:1},{},s)};this.keys=u(q,z,function(){return b.keys(this.rules)});this.all=u(q,z,function(){return this.rules});this.get=u(q,z,function(s){return this.rules[s]});this.eat=
function(s){return z.apply(this,[s])}});var oa=function(x,y){var z=this;z.__name__="Torrent";z.manager=x;b.map(APISpecification.torrent,function(q,s){z[q.name]=y[s];if(q.alias)z[q.alias]=y[s]});z.uid=z.hash.toUpperCase();z.data(y);z.properties={all:function(){return z},keys:function(){return b.keys(z)},set:function(){},get:function(q,s){return z[q]!==undefined?z[q]:s?s:null}};z.file=new Q(z);z.setting=new U(z);z.peer=new L(z);z.status_array=this.get_status()};oa.prototype=new (function(){var x=APISpecification.torrent[APISpecification.torrent_lookup.status].bits;
b.extend(this,{__html__:function(){return this.name+"oooooieee!"},should_be_hidden:function(){return this.label==="uChat"},magnet_link:function(){return"magnet:?xt=urn:btih:"+this.hash},coverart:function(){var y=this.file.keys();if(this.file.get("coverart.jpg"))return this.file.get("coverart.jpg");for(var z=0;z<y.length;z++){var q=this.file.get(y[z]);if(q.isImage())return q}},get_web_seed_link:function(){return"http://"+document.location.hostname+":"+(parseInt(document.location.port,10)-1E3)+"/talon/seed/"+
this.manager.client.data.cid+"/content/"+this.stream_id},get_web_seed_torrent_link:function(){return"http://"+document.location.hostname+":"+(parseInt(document.location.port,10)-1E3)+"/talon/seed/"+this.manager.client.data.cid+"/torrent/"+this.stream_id},get_setting:function(y){if(this.setting.fetched)return this.setting.settings[y]},started:function(){return b.contains(this.status_array,"started")},context_menu_items:function(){var y=this,z=[];b.contains(this.status_array,"error")&&z.push({label:"Force Check",
callback:function(){y.callapi("recheck")}});return z},get_progress_text:function(){var y=this.progress,z=this.progress==1E3;if(b.contains(this.status_array,"paused"))return locale("OV_FL_PAUSED");if(b.contains(this.status_array,"checking"))return locale("OV_FL_CHECKED").replace(/%:\.1d%/,(y/10).toFixedNR(1));return z?b.contains(this.status_array,"queued")?b.contains(this.status_array,"started")?(this.forcestart?"[F] ":"")+locale("OV_FL_SEEDING"):locale("OV_FL_QUEUED_SEED"):b.contains(this.status_array,
"started")?(this.forcestart?"[F] ":"")+locale("OV_FL_SEEDING"):locale("OV_FL_FINISHED"):b.contains(this.status_array,"queued")&&!b.contains(this.status_array,"started")?locale("OV_FL_QUEUED"):!b.contains(this.status_array,"queued")&&!b.contains(this.status_array,"started")?locale("OV_FL_STOPPED")+" "+y/10+locale("FI_COL_PCNT"):this.forcestart?"[F] "+locale("OV_CAT_DL")+" "+y/10+locale("FI_COL_PCNT"):locale("OV_CAT_DL")+" "+y/10+locale("FI_COL_PCNT")},get_progress_color:function(){var y=this.progress==
1E3,z="grey";if(b.contains(this.status_array,"paused"))z="grey";else if(b.contains(this.status_array,"error"))z="red";else if(b.contains(this.status_array,"started"))z=y?"ltgreen":"blue";else if(y)z="green";else if(b.contains(this.status_array,"queued"))z="blue";return z},matchesCategory:function(y){if(y===undefined)return true;else if(y.__name__=="Label")return y.name=="No Label"?this.label=="":this.label==y.name;else if(y.status){if(this.should_be_hidden())return false;switch(y.status){case "All":return true;
case "Not Alone":return this.peers_connected>0||this.seed_connected>0;case "Downloading":return this.isDownloading();case "Completed":return this.isCompleted();case "Active":return this.isActive();case "Seeding":return this.isSeeding();case "Inactive":return!this.isActive()}}else return false},isDownloading:function(){return this.progress<1E3&&b.contains(this.status_array,"started")},isCompleted:function(){return this.progress==1E3},isActive:function(){return this.peers_connected>0||this.seed_connected>
0},isSeeding:function(){return this.isCompleted()&&b.contains(this.status_array,"started")&&!b.contains(this.status_array,"paused")},hasLabel:function(y){return this.label==y},data:function(y){var z=this;if(y===undefined)return this._data;else{this._data=y;b.map(APISpecification.torrent,function(q,s){z[q.name]=y[s];if(q.alias)z[q.alias]=y[s]})}},get_status:function(){var y=this,z=[];b.map(x,function(q,s){Math.pow(2,s)&y.status&&z.push(q)});this.forcestart=!b.contains(z,"queued")&&b.contains(z,"started")?
true:false;return y._statuses=z},callapi:function(y,z){var q={action:y};if(z)y=="add-url"?b.extend(q,{s:z}):b.extend(q,{p:z});this.manager.client.raptor.post(q,{hash:this.hash})},single_file_playable:function(){var y=b.filter(b.values(this.file.all()),function(z){return z.playable()});if(y.length>0)return y[0]},start:function(y){y?this.callapi("forcestart"):this.callapi("start")},stop:function(){this.callapi("stop")},pause:function(){this.callapi("pause")},unpause:function(){this.callapi("unpause")},
forcestart:function(){this.callapi("forcestart")},recheck:function(){this.callapi("recheck")},remove:function(){this.callapi("remove")},removedata:function(){this.callapi("removedata")},setprio:function(y){this.callapi("setprio",y)},set_property:function(y,z){this.manager.client.raptor.post({action:"setprops"},{hash:this.hash,s:y,v:z})},set_priority:function(y){this.setprio(y)},queuebottom:function(){this.callapi("queuebottom")},queuedown:function(){this.callapi("queuedown")},queuetop:function(){this.callapi("queuetop")},
queueup:function(){this.callapi("queueup")},update:function(y){this.manager.update(y)},get_label:function(){return this.manager.client.label.get(this.label)},get_feed:function(){return this.manager.client.feed.getwith({url:this.rss_feed_url})},get_app:function(){if(this.app_update_url)return this.manager.client.app.getwith({update_url:this.app_update_url})}})});var I=function(x,y){var z=this;z.manager=x;z.__name__="ClientSetting";x=APISpecification.client_setting_lookup.type;var q=APISpecification.client_setting[x].value_map[y[x]];
b.map(APISpecification.client_setting,function(s,B){if(s.name=="access")z.access=s.value_map[y[B].access];else z[s.name]=s.value_map?s.value_map[y[B]]:s.name=="value"?q=="int"?parseInt(y[B],10):q=="bool"?y[B]=="true":y[B]:y[B]})};I.prototype=new (function(){this.set=function(x){this.manager.client.raptor.post({action:"setsetting",s:this.name,v:x})}});W=function(x){this.__name__="AppManager";this.client=x;this.fetched=false;this._apps={};this.featured_apps_lookup={};if(!(config.client_apps||config.cookies&&
config.cookies.client_apps))if(!config.classic_iphone_interface){if(config.webui)this.featured_apps=[{app_update_url:"http://apps.bittorrent.com/ubrowse/ubrowse.btapp",name:"uBrowse",alias:"ubrowse"}];else{this.featured_apps=window.featured_apps?window.featured_apps:[];if(config&&config.dev_mode)this.featured_apps=this.featured_apps.concat([{app_update_url:"http://10.0.3.3/static/apps/transcode/transcode.btapp",name:"Transcode",hidden:true,alias:"transcode"}])}if(window.sha1Hash&&!config.webui){var y=
this;b.each(this.featured_apps,function(z){y.featured_apps_lookup[z.app_update_url]=z.alias;var q=new ka(y,[z.name,z.app_update_url,"featured"]);q._featured=true;if(z.requires)q.requires=z.requires;y._apps[z.app_update_url]=q})}this.fetched=true}};window.AppManager=W;W.prototype=new (function(){function x(s){this.fetched=true;this.fetch_time=new Date;var B=this;s.apps&&b.map(s.apps,function(E){E=new ka(B,E);var S=E.uid();B._apps[S]||(B._apps[S]=E);if(E.is_store_app())this._store_app=E})}function y(){}
var z={eat:function(s){x.apply(this,[s])},keys:u(y,x,function(){return b.keys(this._apps)}),all:u(y,x,function(){return this._apps}),installed_apps:u(y,x,function(){return b.filter(this._apps,function(s){return!s.is_store_app()})}),update:u(y,x,function(){return this._apps},true),get:u(y,x,function(s){return this._apps[s]}),get_installed_count:function(){return b.filter(this._apps,function(s){return!s.is_store_app()}).length},get_store_app:function(){return this._store_app},getwith:function(s){for(uid in this._apps){var B=
this._apps[uid],E=true;for(key in s)if(B[key]!=s[key])E=false;if(E)return B}}},q=this;b.each(z,function(s,B){q[B]=s})});var ka=function(x,y){this.__name__="App";this.manager=x;this._data=y;var z=this;b.map(APISpecification.app,function(q,s){z[q.name]=y[s]});if(window.sha1Hash){this.update_url_hash=null;console.warn("sha1 hash not defined")}else this.update_url_hash=sha1Hash(this.update_url).toUpperCase()};ka.prototype={uid:function(){return this.update_url},is_store_app:function(){return this.update_url==
"http://apps.bittorrent.com/store/store.btapp"},get_url_name:function(){var x=this.update_url.split("/");return x[x.length-2]},get_content_path:function(x){if(this.update_url in this.manager.featured_apps_lookup)return(x?"":config.static_prefix?config.static_prefix:"")+(config.webui?"/gui":"")+"/static/apps/"+this.manager.featured_apps_lookup[this.update_url]+"/";return"/client/gui/apps/"+this.update_url_hash+".btapp/"},get_icon:function(){return this.get_content_path()+"icon.png?"+this.manager.client.client_qs()},
get_icon_html:function(){return'<img src="'+this.get_icon()+'" title="'+this.name+'" alt="'+this.name+'" />'}};o.prototype={uid:function(){return this.guid},looks_local:function(){var x=this.sock_ip.split(".");if(x.length==4)if(x[0]=="10")return true;else if(x[0]=="172"&&parseInt(x[1])>=16&&parseInt(x[1]<32))return true;else if(x.slice(0,2).join(".")=="192.168")return true},local_gui_url:function(){return config.path_gui+"?local="+escape(this.sock_ip+":"+this.manager.client.setting.get("bind_port").value)}};
window.SessionManager=v;v.prototype={eat:function(x){for(var y=0;y<x.sessions.length;y++){var z=new o(this,x.sessions[y]);this._sessions[z.uid()]=z}},current:function(){for(var x in this._sessions)if(this._sessions[x].guid==jQuery.cookie("GUID"))return this._sessions[x]}};W=function(x){var y=this;y.fetched=false;y.labels=null;y.nolabel=new va(this,["No Label",0]);y.__name__="LabelManager";y.client=x};window.LabelManager=W;W.prototype=new (function(){var x=function(){this.fetched=true;this.fetch_time=
new Date;this.labels={};return this};this.correct_counts_for_primary=function(z){var q={};b.each(z,function(s){if(s=jQuery.trim(s.label))if(q[s])q[s]+=1;else q[s]=1});b.each(b.keys(q),function(s){this.labels[s]=new va(this,[s,q[s]])},this);return this};var y=function(z){this.client.raptor.post({list:1},{},z)};this.eat=function(z){return x.apply(this,[z])};this.keys=u(y,x,function(){return b.keys(this.labels)});this.all=u(y,x,function(){return this.labels});this.update=u(y,x,function(){return this.labels},
true);this.get=u(y,x,function(z){return this.labels[z]})});var va=function(x,y){var z=this;z.__name__="Label";z.manager=x;b.map(APISpecification.label,function(q,s){z[q.name]=y[s]})};va.prototype={torrents:function(){var x=this;return b.filter(this.manager.client.torrent.all(),function(y){return y.label==x.name})}};W=function(x){var y=this;y.__name__="ClientSettingManager";y.client=x;y.settings=null;y.fetched=false};window.ClientSettingManager=W;W.prototype=new (function(){var x=function(z){this.fetched=
true;this.fetch_time=new Date;this.settings={};b.map(z.settings,function(q){q=new I(this,q);this.settings[q.name]=q},this);return this},y=function(z){this.client.raptor.post({action:"getsettings"},{},z)};this.keys=u(y,x,function(){return b.keys(this.settings)});this.all=u(y,x,function(){return this.settings});this.get=u(y,x,function(z){return this.settings[z]});this.update=u(y,x,function(){return this.settings},true);this.set=function(z,q,s,B){this.client.raptor.post({action:"setsetting",s:z,v:q},
{},s,B)}})})(exports._,jQuery);String.prototype.replacebacks=function(){return this.replace(/\\/g,"/")};(function(b){function d(e){this._clients={};this._store=fjQuery.jStorage;this._app=this._current=null;if(e)this.do_autologin(e);else window.autologin_data&&this.do_autologin(window.autologin_data)}window.ClientManager=d;d.prototype={do_autologin:function(e){if(config.asserts)debugger;this._called_autologin=true;e=e||window.autologin_data;window.clients=this;clients.sync(window.autologin_data.sessions,window.autologin_data.enc_keys);e=e.current_client;e.type=="remote"?clients.set_current_client(e.key):
clients.set_current_client(null);if(e=clients.get_current_client())e.go_to_gui_page();else{console.error("autologin setup client failed (should not happen) -- redirect to basic login page?");debugger}},redirect:function(e){if(config.asserts)debugger;var h=this.serialize({window_name:true});window.name=jQuery.toJSON(h);window.location=e},login_remote:function(e,h,n){(new Client(null,this,null,n)).negotiate_session_key(e,h,n)},create_paired_client:function(e){var h=new ClientAPI;h.pairing=new Pairing(e,
h);e=new Client(null,clients,{api:h});clients.add(e);clients.set_current_client()},add_to_sessions_cookie:function(e){var h=jQuery.cookie("sessions")||"{}";h=jQuery.parseJSON(h);var n=[];for(var o in h)e.data.bt_user==h[o].u&&n.push(o);b.each(n,function(v){delete h[v]});if(b.keys(h).length>10)h={};b.extend(h,e.serialize({cookie:true}));this.save_sessions_cookie(h)},save_sessions_cookie:function(e){var h={expires:14,path:"/",domain:config.cookie_domain};jQuery.cookie("sessions",jQuery.toJSON(e),h)},
add:function(e){this._clients[e.guid]=e},sync:function(e,h){if(e){e=e;h=h||null}else{e=this._store.get("falconStore.sessionKeys")||{};var n={};try{n=jQuery.parseJSON(window.name)}catch(o){}window.name="";h=h||{};b.extend(h,e,n);if(window_urlparams.sessions)e=jQuery.parseJSON(window_urlparams.sessions);else{e={};if(jQuery.cookie("sessions"))try{e=jQuery.parseJSON(jQuery.cookie("sessions"))}catch(v){console.error("error loading cookies from sessions cookie")}}console.log("url/cookie sessions",e,"domain",
window.location.href);n={};for(var u in h){var D=u.length==40;if(e[u]===undefined&&!D)n[u]=true}for(var L in n){console.log("deleting unused encryption key for guid",L);delete h[L]}this._store.set("falconStore.sessionKeys",h)}L=false;if(e.current!==undefined){L=e.current;delete e.current}for(u in e){n=e[u];if(n.pairing_port){n=n.pairing_port;D=u;var N=new ClientAPI;N.pairing=new Pairing({foundport:n,pairing_key:D,dontscan:true},N);n=new Client(null,clients,{api:N});console.log("client resuming from stored pairing key",
n);this._clients[null]=n}else{if(h&&h[u])n.key=h[u];else if(n.k)n.key=n.k;D={cid:n.c,bt_talon_tkt:n.t,bt_user:n.u,key:n.key};if(u===null){n=new Client(u,this,D);console.log("initializing paired client",n);this._clients[u]=n}else if(n.key){n=new Client(u,this,D);console.log("initializing remote client",n);this._clients[u]=n}else{console.error("cookie session without corresponding encryption key -- remove");if(config.asserts)debugger;n=new Client(u,this,D);n.remove_from_stored_sessions()}}}h={expires:14,
path:"/",domain:config.cookie_domain};jQuery.cookie("sessions",jQuery.toJSON(this.serialize({cookie:true})),h);if(L!==false)if(L===null)this._clients[null]&&this.set_current_client(null);else this._clients[L]&&this.set_current_client(L)},register_paired_client:function(e){console.log("register paired client",e);this.onready&&this.onready()},set_current:function(e){debugger;this.active_guid=e;jQuery.cookie("GUID",e,{expires:14,path:"/",domain:config.cookie_domain})},set_current_client:function(e){if(!(e===
undefined&&this.get_current_client()))if(e&&e.__name__=="Client")this._current=e;else{var h=null;if(e===undefined){h=this._clients[jQuery.cookie("GUID")];if(!h&&config.cookies&&config.cookies.GUID){h=this._clients[config.cookies.GUID];console.error("DANG! cookie was set on rapton-i-* domain -- trying using document.cookie instead. found",h)}if(!h){console.error("no GUID cookie set :-( -- picking the 0th client");h=this._clients[b.keys(this._clients)[0]]}this._current=h}else this._current=this._clients[e];
if(this._current)console.log("set current client to",this._current.data);else{console.log("set current client failed -- no clients");if(config.asserts&&!config.toolbar)debugger}}},disable:function(){this._current=null},get_paired_client:function(){if(this._clients[null]&&this._clients[null].raptor.api.pairing)return this._clients[null]},get_remote_client:function(){for(var e in this._clients)if(e!="null")return this._clients[e]},get_current_client:function(){return this._current},set_app:function(e){this._app=
e;b.each(this._clients,function(h){h.view=e})},serialize:function(e){var h={};for(var n in this._clients){var o=this._clients[n].serialize(e);b.extend(h,o)}return h}};Client=function(e,h,n,o){client=this;client.__name__="Client";client.guid=e;client.raptor_host=null;client.manager=h;client.data=o&&o.for_srp_only?{}:!n&&h&&h._clients[e]?h._clients[e].data:n;if(!client.data&&config.webui)client.data={};if(window.RaptorRequestManager===undefined)console.log("client.js: models.js not loaded. key negotiation only mode.");
else{if(!client.data){console.log("data was not specified for client -- looking in local storage");client.manager._store.get("falconStore.sessionKeys")}if(!client.data)throw new Error("unable to fetch key for this client");e=config.webui?null:client.data.key?new srp(client.data.key):client.data.api?client.data.api.srp:new srp;e=client.data.api||new ClientAPI(e);client.raptor=new RaptorRequestManager(client,e);client.setting=new ClientSettingManager(client);client.torrent=new TorrentManager(client);
client.feed=new FeedManager(client);client.feedrule=new FeedRuleManager(client);client.label=new LabelManager(client);client.app=new AppManager(client);client.session=new SessionManager(client);client._update_listeners=[];client._update_fail_listeners=[];client._updating=false;client._update_timeout=null;client._outbound_update_request=null;client._stop_updating=null;client.everything_fetched=false}};Client.prototype={go_to_gui_page:function(){var e=this;if(this.connection_type()=="remote")this.raptor.api.get_raptor(function(){e.go_to_gui_page_ready(e.raptor.api.info.rapton)},
null,{jsonp:true});else{var h=navigator.userAgent.match("MSIE")?{nossl:true}:{};this.go_to_gui_page_ready(config.logout_root,h)}},go_to_gui_page_ready:function(e,h){debugger;var n=this.manager.serialize({cookie:true});n.current=this.guid;window.name=jQuery.toJSON(this.manager.serialize({window_name:true}));var o=document.location.protocol;if(h&&h.nossl)o="http:";e=e+"/talon/gui/?sessions="+encodeURIComponent(jQuery.toJSON(n));if(e.slice(0,8)!="https://")e=o+"//"+e;window.location=e},get_name:function(){return this.connection_type()==
"local"?this.setting.get("webui.uconnect_username").value+" <em>(local)</em>":"<strong>"+this.data.bt_user+"</strong> <em>(remote)</em>"},ready:function(){return this.raptor.api.pairing?this.raptor.api.pairing.pairing_key:true},plus_features:function(e){if(this.detailed_client_info)if(this.detailed_client_info.error)console.error("plus status error!",this.detailed_client_info);else return e?this.detailed_client_info.plus[e]:this.detailed_client_info.plus;else return null},add_update_listener:function(e){this._update_listeners.push(e)},
add_update_fail_listener:function(e){this._update_fail_listeners.push(e)},call_update_listeners:function(){for(var e=0;e<this._update_listeners.length;e++)try{this._update_listeners[e]()}catch(h){console.error("error in client update listener callback")}},call_update_fail_listeners:function(e,h,n){console.log("calling update fail listeners");for(var o=0;o<this._update_fail_listeners.length;o++)try{this._update_fail_listeners[o](e,h,n)}catch(v){console.error("error in client update listener fail callback")}},
get_torrents_that_can_fetch_files:function(){return b.filter(this.torrent.keys(),function(e){e=client.torrent.get(e);if(e.size!=0&&!e.file.fetched)return true})},stop_updating:function(e){this._stop_updating=true;if(this._outbound_update_request){console.error("stop updating called but already an outbound request (and we dont have direct access to the xhr object");this._stop_updating_callback=e}else{this._stop_updating=this._updating=false;e&&b.defer(e);if(this._update_timeout){console.log("stop updating -- cleared scheduled update");
clearTimeout(this._update_timeout)}}},start_updating:function(e){var h=this;if(this._stop_updating)console.error("cannot start updating because stop updating has not been processed completely");else if(this._updating)console.error("cannot start updating -- already updating!");else{this._updating=true;this._update_opts=e||{};this._update_opts.delay=this._update_opts.interval||2E3;if(this._update_opts.fetch_files)if(this.get_torrents_that_can_fetch_files().length>0)debugger;if(this._update_opts.fetch_settings){this._outbound_update_request=
true;this.setting.all(function(){h._really_start_updating()});return true}else h._really_start_updating()}},_really_start_updating:function(){var e=this.torrent.cacheid;this._outbound_update_request=true;this.raptor.post({list:1,cid:e},{},b.bind(this.do_update,this),b.bind(this.do_update_failed,this));return true},destroy:function(){delete this.manager._clients[this.guid];this.data=this.setting=this.session=this.label=this.feed=this.torrent=this.raptor=this.raptor.api=null},do_update_failed:function(e,
h,n){this._outbound_update_request=false;if(this._stop_updating_callback){b.defer(this._stop_updating_callback);this._stop_updating_callback=null}if(this._stop_updating)this._updating=this._stop_updating=false;else this.call_update_fail_listeners(e,h,n)},do_update:function(){this._outbound_update_request=false;if(this._update_opts.first_update){var e=this._update_opts.first_update;delete this._update_opts.first_update;e()}if(this._stop_updating_callback){b.defer(this._stop_updating_callback);this._stop_updating_callback=
null}if(this._stop_updating)this._updating=this._stop_updating=false;else if(this._updating){var h=this,n={};if(this._update_opts.fetch_files){e=this.get_torrents_that_can_fetch_files();if(e.length>0)n.hash=e}this._update_timeout=setTimeout(function(){var o={list:1,cid:h.torrent.cacheid};if(n.hash)o.action="getfiles";h.raptor.post(o,n,b.bind(h.do_update,h),b.bind(h.do_update_failed,h))},this._update_opts.delay)}},negotiate_session_key:function(e,h,n){this.negotiate_srp=new srp;var o={callback:b.bind(this.negotiated_session_key,
this,n&&n.success),domain:config.srp_root,jsonp:config.toolbar};if(n&&n.error)o.error=n.error;this.negotiate_srp.negotiate(n&&n.stay_signed_in,e,h,o)},negotiated_session_key:function(e,h,n){var o=new srp(h);o=new ClientAPI(o);o.client=this;this.raptor.api=o;if(n){h={key:h,bt_talon_tkt:n.bt_talon_tkt,bt_user:n.bt_user,cid:n.cid};this.guid=n.GUID}else{h={key:h,bt_talon_tkt:jQuery.cookie("bt_talon_tkt"),bt_user:jQuery.cookie("bt_user"),cid:jQuery.cookie("cid")};this.guid=jQuery.cookie("GUID")}client.type=
"remote";this.data=h;clients.add(this);this.manager.set_current_client(this.guid);if(e){console.log("finished negotiating session key and client initialized. calling extra callback");e(this)}},connection_type:function(){if(this.type=="remote"||this.guid||this.data&&this.data.guid)return"remote";else if(this.raptor&&this.raptor.api.pairing)return"local";else if(this.raptor){debugger;return null}else return"direct"},add_unknown:function(e,h,n){if(raptor.version>23217)this.raptor.post({action:"add-unknown-url"},
{s:e},h,n);else{if(!e.match(".rss$")){var o=parseUri(e).host;n=fjQuery.jStorage.get("cookies",{});b.each(n,function(v,u){if(o.match(u+"$")==u){e+=":COOKIE:"+v;b.breakLoop()}});this.torrent.add(e,h)}!e.match(".torrent$")&&!e.match("^magnet:")&&this.feed.add(e,h)}},get_everything:function(e){var h=this;if(this.everything_fetched)e();else{var n={timeout:3E4};console.log("fetching all torrents");this.torrent.all(function(){var o=b.filter(h.torrent.keys(),function(v){return!h.torrent.get(v).file.fetched});
console.log("getting all (unfetched) files");h.raptor.post({action:"getfiles"},{hash:o},function(){console.log("getting all peers");h.raptor.post({action:"getpeers"},{hash:h.torrent.keys()},function(){console.log("getting all settings");h.setting.all(function(){h.everything_fetched=true;e&&e()})},n)},n)})}},get_all_files:function(e){var h={timeout:3E4},n=this;this.torrent.all(function(){b.filter(n.torrent.keys(),function(o){return!n.torrent.get(o).file.fetched});console.log("getting all files");n.raptor.post({action:"getfiles"},
{hash:n.torrent.keys()},function(){e&&e()},h)})},get_all_peers:function(e){var h={timeout:3E4},n=this;this.torrent.all(function(){b.filter(n.torrent.keys(),function(o){return!n.torrent.get(o).file.fetched});console.log("getting all peers");n.raptor.post({action:"getpeers"},{hash:n.torrent.keys()},function(){e&&e()},h)})},log:function(){typeof console=="undefined"||typeof console.log=="undefined"||(console.log.apply?console.log.apply(console,arguments):console.log(arguments[0],arguments[1],arguments[2],
arguments[3]))},client_qs:function(){var e="GUID="+encodeURIComponent(this.guid)+"&bt_talon_tkt="+encodeURIComponent(this.data.bt_talon_tkt);if(this.raptor_host){if(window.location.protocol+"//"+window.location.host!=this.raptor_host&&config.raptor_redirect!==false)e=e+"&_rrendezvouz="+encodeURIComponent(this.raptor_host);if(this.raptor.api.cipher.ivoffset&&this.raptor.api.jsonp)e=e+"&x_bt_seq="+this.raptor.api.cipher.ivoffset}return e},info:function(){var e={GUID:this.guid};b.extend(e,this.data);
return jQuery.toJSON(e)},remove_from_stored_sessions:function(){var e=this.manager._store.get("falconStore.sessionKeys")||{};if(e[this.guid]){delete e[this.guid];this.manager._store.set("falconStore.sessionKeys",e)}e=jQuery.parseJSON(jQuery.cookie("sessions")||"{}");e[this.guid]&&delete e[this.guid];this.manager.save_sessions_cookie(e)},set_on_error:function(e){this._on_error=e},client_sent_error:function(e,h,n){n=="no client jsonp support"&&console.error("your client version has no jsonp support");
if(config.asserts)debugger;this.remove_from_stored_sessions();this.cleanup();if(this._on_error)this._on_error(e,h,n);else window.utweb&&utweb.redirect_logout("Client sent error: "+e.status)},client_sent_unauthorized:function(){console.log("client sent 401 -- removing from stored sessions");this.remove_from_stored_sessions();this.cleanup()},token_decryption_failed:function(){console.log("token decryption failed -- :-( -- remove from stored sessions");this.remove_from_stored_sessions();this.cleanup()},
serialize:function(e){var h={};if(this.connection_type()=="remote"){var n=e.window_name||e.local_pairing?this.data.key:{u:this.data.bt_user,c:this.data.cid,t:this.data.bt_talon_tkt};if(e.all)n.k=this.data.key;h[this.guid]=n}else if(this.connection_type()=="local"){if(this.raptor.api.pairing.foundport)h[this.raptor.api.pairing.pairing_key]={pairing_port:this.raptor.api.pairing.foundport}}else{this.connection_type();debugger}return h},cleanup:function(){}}})(exports._);var dbits,canary=244837814094590,j_lm=(canary&16777215)==15715070;function BigInteger(b,d,e){if(b!=null)if("number"==typeof b)this.fromNumber(b,d,e);else d==null&&"string"!=typeof b?this.fromString(b,256):this.fromString(b,d)}function nbi(){return new BigInteger(null)}function am1(b,d,e,h,n,o){for(;--o>=0;){var v=d*this[b++]+e[h]+n;n=Math.floor(v/67108864);e[h++]=v&67108863}return n}
function am2(b,d,e,h,n,o){var v=d&32767;for(d=d>>15;--o>=0;){var u=this[b]&32767,D=this[b++]>>15,L=d*u+D*v;u=v*u+((L&32767)<<15)+e[h]+(n&1073741823);n=(u>>>30)+(L>>>15)+d*D+(n>>>30);e[h++]=u&1073741823}return n}function am3(b,d,e,h,n,o){var v=d&16383;for(d=d>>14;--o>=0;){var u=this[b]&16383,D=this[b++]>>14,L=d*u+D*v;u=v*u+((L&16383)<<14)+e[h]+n;n=(u>>28)+(L>>14)+d*D;e[h++]=u&268435455}return n}
if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30}else if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;
var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=[],rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(b){return BI_RM.charAt(b)}function intAt(b,d){b=BI_RC[b.charCodeAt(d)];return b==null?-1:b}function bnpCopyTo(b){for(var d=this.t-1;d>=0;--d)b[d]=this[d];b.t=this.t;b.s=this.s}
function bnpFromInt(b){this.t=1;this.s=b<0?-1:0;if(b>0)this[0]=b;else if(b<-1)this[0]=b+DV;else this.t=0}function nbv(b){var d=nbi();d.fromInt(b);return d}
function bnpFromString(b,d){if(d==16)d=4;else if(d==8)d=3;else if(d==256)d=8;else if(d==2)d=1;else if(d==32)d=5;else if(d==4)d=2;else{this.fromRadix(b,d);return}this.s=this.t=0;for(var e=b.length,h=false,n=0;--e>=0;){var o=d==8?b[e]&255:intAt(b,e);if(o<0){if(b.charAt(e)=="-")h=true}else{h=false;if(n==0)this[this.t++]=o;else if(n+d>this.DB){this[this.t-1]|=(o&(1<<this.DB-n)-1)<<n;this[this.t++]=o>>this.DB-n}else this[this.t-1]|=o<<n;n+=d;if(n>=this.DB)n-=this.DB}}if(d==8&&(b[0]&128)!=0){this.s=-1;
if(n>0)this[this.t-1]|=(1<<this.DB-n)-1<<n}this.clamp();h&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var b=this.s&this.DM;this.t>0&&this[this.t-1]==b;)--this.t}
function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);if(b==16)b=4;else if(b==8)b=3;else if(b==2)b=1;else if(b==32)b=5;else if(b==4)b=2;else return this.toRadix(b);var d=(1<<b)-1,e,h=false,n="",o=this.t,v=this.DB-o*this.DB%b;if(o-- >0){if(v<this.DB&&(e=this[o]>>v)>0){h=true;n=int2char(e)}for(;o>=0;){if(v<b){e=(this[o]&(1<<v)-1)<<b-v;e|=this[--o]>>(v+=this.DB-b)}else{e=this[o]>>(v-=b)&d;if(v<=0){v+=this.DB;--o}}if(e>0)h=true;if(h)n+=int2char(e)}}return h?n:"0"}
function bnNegate(){var b=nbi();BigInteger.ZERO.subTo(this,b);return b}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(b){var d=this.s-b.s;if(d!=0)return d;var e=this.t;d=e-b.t;if(d!=0)return d;for(;--e>=0;)if((d=this[e]-b[e])!=0)return d;return 0}function nbits(b){var d=1,e;if((e=b>>>16)!=0){b=e;d+=16}if((e=b>>8)!=0){b=e;d+=8}if((e=b>>4)!=0){b=e;d+=4}if((e=b>>2)!=0){b=e;d+=2}if(b>>1!=0)d+=1;return d}
function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(b,d){var e;for(e=this.t-1;e>=0;--e)d[e+b]=this[e];for(e=b-1;e>=0;--e)d[e]=0;d.t=this.t+b;d.s=this.s}function bnpDRShiftTo(b,d){for(var e=b;e<this.t;++e)d[e-b]=this[e];d.t=Math.max(this.t-b,0);d.s=this.s}
function bnpLShiftTo(b,d){var e=b%this.DB,h=this.DB-e,n=(1<<h)-1;b=Math.floor(b/this.DB);var o=this.s<<e&this.DM,v;for(v=this.t-1;v>=0;--v){d[v+b+1]=this[v]>>h|o;o=(this[v]&n)<<e}for(v=b-1;v>=0;--v)d[v]=0;d[b]=o;d.t=this.t+b+1;d.s=this.s;d.clamp()}
function bnpRShiftTo(b,d){d.s=this.s;var e=Math.floor(b/this.DB);if(e>=this.t)d.t=0;else{b=b%this.DB;var h=this.DB-b,n=(1<<b)-1;d[0]=this[e]>>b;for(var o=e+1;o<this.t;++o){d[o-e-1]|=(this[o]&n)<<h;d[o-e]=this[o]>>b}if(b>0)d[this.t-e-1]|=(this.s&n)<<h;d.t=this.t-e;d.clamp()}}
function bnpSubTo(b,d){for(var e=0,h=0,n=Math.min(b.t,this.t);e<n;){h+=this[e]-b[e];d[e++]=h&this.DM;h>>=this.DB}if(b.t<this.t){for(h-=b.s;e<this.t;){h+=this[e];d[e++]=h&this.DM;h>>=this.DB}h+=this.s}else{for(h+=this.s;e<b.t;){h-=b[e];d[e++]=h&this.DM;h>>=this.DB}h-=b.s}d.s=h<0?-1:0;if(h<-1)d[e++]=this.DV+h;else if(h>0)d[e++]=h;d.t=e;d.clamp()}
function bnpMultiplyTo(b,d){var e=this.abs(),h=b.abs(),n=e.t;for(d.t=n+h.t;--n>=0;)d[n]=0;for(n=0;n<h.t;++n)d[n+e.t]=e.am(0,h[n],d,n,0,e.t);d.s=0;d.clamp();this.s!=b.s&&BigInteger.ZERO.subTo(d,d)}function bnpSquareTo(b){for(var d=this.abs(),e=b.t=2*d.t;--e>=0;)b[e]=0;for(e=0;e<d.t-1;++e){var h=d.am(e,d[e],b,2*e,0,1);if((b[e+d.t]+=d.am(e+1,2*d[e],b,2*e+1,h,d.t-e-1))>=d.DV){b[e+d.t]-=d.DV;b[e+d.t+1]=1}}if(b.t>0)b[b.t-1]+=d.am(e,d[e],b,2*e,0,1);b.s=0;b.clamp()}
function bnpDivRemTo(b,d,e){var h=b.abs();if(!(h.t<=0)){var n=this.abs();if(n.t<h.t){d!=null&&d.fromInt(0);e!=null&&this.copyTo(e)}else{if(e==null)e=nbi();var o=nbi(),v=this.s;b=b.s;var u=this.DB-nbits(h[h.t-1]);if(u>0){h.lShiftTo(u,o);n.lShiftTo(u,e)}else{h.copyTo(o);n.copyTo(e)}h=o.t;n=o[h-1];if(n!=0){var D=n*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0),L=this.FV/D;D=(1<<this.F1)/D;var N=1<<this.F2,Q=e.t,P=Q-h,U=d==null?nbi():d;o.dlShiftTo(P,U);if(e.compareTo(U)>=0){e[e.t++]=1;e.subTo(U,e)}BigInteger.ONE.dlShiftTo(h,
U);for(U.subTo(o,o);o.t<h;)o[o.t++]=0;for(;--P>=0;){var W=e[--Q]==n?this.DM:Math.floor(e[Q]*L+(e[Q-1]+N)*D);if((e[Q]+=o.am(0,W,e,P,0,h))<W){o.dlShiftTo(P,U);for(e.subTo(U,e);e[Q]<--W;)e.subTo(U,e)}}if(d!=null){e.drShiftTo(h,d);v!=b&&BigInteger.ZERO.subTo(d,d)}e.t=h;e.clamp();u>0&&e.rShiftTo(u,e);v<0&&BigInteger.ZERO.subTo(e,e)}}}}function bnMod(b){var d=nbi();this.abs().divRemTo(b,null,d);this.s<0&&d.compareTo(BigInteger.ZERO)>0&&b.subTo(d,d);return d}function Classic(b){this.m=b}
function cConvert(b){return b.s<0||b.compareTo(this.m)>=0?b.mod(this.m):b}function cRevert(b){return b}function cReduce(b){b.divRemTo(this.m,null,b)}function cMulTo(b,d,e){b.multiplyTo(d,e);this.reduce(e)}function cSqrTo(b,d){b.squareTo(d);this.reduce(d)}a=Classic.prototype;a.convert=cConvert;a.revert=cRevert;a.reduce=cReduce;a.mulTo=cMulTo;a.sqrTo=cSqrTo;
function bnpInvDigit(){if(this.t<1)return 0;var b=this[0];if((b&1)==0)return 0;var d=b&3;d=d*(2-(b&15)*d)&15;d=d*(2-(b&255)*d)&255;d=d*(2-((b&65535)*d&65535))&65535;d=d*(2-b*d%this.DV)%this.DV;return d>0?this.DV-d:-d}function Montgomery(b){this.m=b;this.mp=b.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<b.DB-15)-1;this.mt2=2*b.t}
function montConvert(b){var d=nbi();b.abs().dlShiftTo(this.m.t,d);d.divRemTo(this.m,null,d);b.s<0&&d.compareTo(BigInteger.ZERO)>0&&this.m.subTo(d,d);return d}function montRevert(b){var d=nbi();b.copyTo(d);this.reduce(d);return d}
function montReduce(b){for(;b.t<=this.mt2;)b[b.t++]=0;for(var d=0;d<this.m.t;++d){var e=b[d]&32767,h=e*this.mpl+((e*this.mph+(b[d]>>15)*this.mpl&this.um)<<15)&b.DM;e=d+this.m.t;for(b[e]+=this.m.am(0,h,b,d,0,this.m.t);b[e]>=b.DV;){b[e]-=b.DV;b[++e]++}}b.clamp();b.drShiftTo(this.m.t,b);b.compareTo(this.m)>=0&&b.subTo(this.m,b)}function montSqrTo(b,d){b.squareTo(d);this.reduce(d)}function montMulTo(b,d,e){b.multiplyTo(d,e);this.reduce(e)}a=Montgomery.prototype;a.convert=montConvert;a.revert=montRevert;
a.reduce=montReduce;a.mulTo=montMulTo;a.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(b,d){if(b>4294967295||b<1)return BigInteger.ONE;var e=nbi(),h=nbi(),n=d.convert(this),o=nbits(b)-1;for(n.copyTo(e);--o>=0;){d.sqrTo(e,h);if((b&1<<o)>0)d.mulTo(h,n,e);else{var v=e;e=h;h=v}}return d.revert(e)}function bnModPowInt(b,d){d=b<256||d.isEven()?new Classic(d):new Montgomery(d);return this.exp(b,d)}a=BigInteger.prototype;a.copyTo=bnpCopyTo;a.fromInt=bnpFromInt;
a.fromString=bnpFromString;a.clamp=bnpClamp;a.dlShiftTo=bnpDLShiftTo;a.drShiftTo=bnpDRShiftTo;a.lShiftTo=bnpLShiftTo;a.rShiftTo=bnpRShiftTo;a.subTo=bnpSubTo;a.multiplyTo=bnpMultiplyTo;a.squareTo=bnpSquareTo;a.divRemTo=bnpDivRemTo;a.invDigit=bnpInvDigit;a.isEven=bnpIsEven;a.exp=bnpExp;a.toString=bnToString;a.negate=bnNegate;a.abs=bnAbs;a.compareTo=bnCompareTo;a.bitLength=bnBitLength;a.mod=bnMod;a.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var b=nbi();this.copyTo(b);return b}function bnIntValue(){if(this.s<0)if(this.t==1)return this[0]-this.DV;else{if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(b){return Math.floor(Math.LN2*this.DB/Math.log(b))}
function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var d=this.chunkSize(b);d=Math.pow(b,d);var e=nbv(d),h=nbi(),n=nbi(),o="";for(this.divRemTo(e,h,n);h.signum()>0;){o=(d+n.intValue()).toString(b).substr(1)+o;h.divRemTo(e,h,n)}return n.intValue().toString(b)+o}
function bnpFromRadix(b,d){this.fromInt(0);if(d==null)d=10;for(var e=this.chunkSize(d),h=Math.pow(d,e),n=false,o=0,v=0,u=0;u<b.length;++u){var D=intAt(b,u);if(D<0){if(b.charAt(u)=="-"&&this.signum()==0)n=true}else{v=d*v+D;if(++o>=e){this.dMultiply(h);this.dAddOffset(v,0);v=o=0}}}if(o>0){this.dMultiply(Math.pow(d,o));this.dAddOffset(v,0)}n&&BigInteger.ZERO.subTo(this,this)}
function bnpFromNumber(b,d,e){if("number"==typeof d)if(b<2)this.fromInt(1);else{this.fromNumber(b,e);this.testBit(b-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(b-1),op_or,this);for(this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(d);){this.dAddOffset(2,0);this.bitLength()>b&&this.subTo(BigInteger.ONE.shiftLeft(b-1),this)}}else{e=[];var h=b&7;e.length=(b>>3)+1;d.nextBytes(e);if(h>0)e[0]&=(1<<h)-1;else e[0]=0;this.fromString(e,256)}}
function bnToByteArray(){var b=this.t,d=[];d[0]=this.s;var e=this.DB-b*this.DB%8,h,n=0;if(b-- >0){if(e<this.DB&&(h=this[b]>>e)!=(this.s&this.DM)>>e)d[n++]=h|this.s<<this.DB-e;for(;b>=0;){if(e<8){h=(this[b]&(1<<e)-1)<<8-e;h|=this[--b]>>(e+=this.DB-8)}else{h=this[b]>>(e-=8)&255;if(e<=0){e+=this.DB;--b}}if((h&128)!=0)h|=-256;n==0&&(this.s&128)!=(h&128)&&++n;if(n>0||h!=this.s)d[n++]=h}}return d}function bnEquals(b){return this.compareTo(b)==0}function bnMin(b){return this.compareTo(b)<0?this:b}
function bnMax(b){return this.compareTo(b)>0?this:b}function bnpBitwiseTo(b,d,e){var h,n,o=Math.min(b.t,this.t);for(h=0;h<o;++h)e[h]=d(this[h],b[h]);if(b.t<this.t){n=b.s&this.DM;for(h=o;h<this.t;++h)e[h]=d(this[h],n);e.t=this.t}else{n=this.s&this.DM;for(h=o;h<b.t;++h)e[h]=d(n,b[h]);e.t=b.t}e.s=d(this.s,b.s);e.clamp()}function op_and(b,d){return b&d}function bnAnd(b){var d=nbi();this.bitwiseTo(b,op_and,d);return d}function op_or(b,d){return b|d}
function bnOr(b){var d=nbi();this.bitwiseTo(b,op_or,d);return d}function op_xor(b,d){return b^d}function bnXor(b){var d=nbi();this.bitwiseTo(b,op_xor,d);return d}function op_andnot(b,d){return b&~d}function bnAndNot(b){var d=nbi();this.bitwiseTo(b,op_andnot,d);return d}function bnNot(){for(var b=nbi(),d=0;d<this.t;++d)b[d]=this.DM&~this[d];b.t=this.t;b.s=~this.s;return b}function bnShiftLeft(b){var d=nbi();b<0?this.rShiftTo(-b,d):this.lShiftTo(b,d);return d}
function bnShiftRight(b){var d=nbi();b<0?this.lShiftTo(-b,d):this.rShiftTo(b,d);return d}function lbit(b){if(b==0)return-1;var d=0;if((b&65535)==0){b>>=16;d+=16}if((b&255)==0){b>>=8;d+=8}if((b&15)==0){b>>=4;d+=4}if((b&3)==0){b>>=2;d+=2}(b&1)==0&&++d;return d}function bnGetLowestSetBit(){for(var b=0;b<this.t;++b)if(this[b]!=0)return b*this.DB+lbit(this[b]);if(this.s<0)return this.t*this.DB;return-1}function cbit(b){for(var d=0;b!=0;){b&=b-1;++d}return d}
function bnBitCount(){for(var b=0,d=this.s&this.DM,e=0;e<this.t;++e)b+=cbit(this[e]^d);return b}function bnTestBit(b){var d=Math.floor(b/this.DB);if(d>=this.t)return this.s!=0;return(this[d]&1<<b%this.DB)!=0}function bnpChangeBit(b,d){b=BigInteger.ONE.shiftLeft(b);this.bitwiseTo(b,d,b);return b}function bnSetBit(b){return this.changeBit(b,op_or)}function bnClearBit(b){return this.changeBit(b,op_andnot)}function bnFlipBit(b){return this.changeBit(b,op_xor)}
function bnpAddTo(b,d){for(var e=0,h=0,n=Math.min(b.t,this.t);e<n;){h+=this[e]+b[e];d[e++]=h&this.DM;h>>=this.DB}if(b.t<this.t){for(h+=b.s;e<this.t;){h+=this[e];d[e++]=h&this.DM;h>>=this.DB}h+=this.s}else{for(h+=this.s;e<b.t;){h+=b[e];d[e++]=h&this.DM;h>>=this.DB}h+=b.s}d.s=h<0?-1:0;if(h>0)d[e++]=h;else if(h<-1)d[e++]=this.DV+h;d.t=e;d.clamp()}function bnAdd(b){var d=nbi();this.addTo(b,d);return d}function bnSubtract(b){var d=nbi();this.subTo(b,d);return d}
function bnMultiply(b){var d=nbi();this.multiplyTo(b,d);return d}function bnDivide(b){var d=nbi();this.divRemTo(b,d,null);return d}function bnRemainder(b){var d=nbi();this.divRemTo(b,null,d);return d}function bnDivideAndRemainder(b){var d=nbi(),e=nbi();this.divRemTo(b,d,e);return new Array(d,e)}function bnpDMultiply(b){this[this.t]=this.am(0,b-1,this,0,0,this.t);++this.t;this.clamp()}
function bnpDAddOffset(b,d){if(b!=0){for(;this.t<=d;)this[this.t++]=0;for(this[d]+=b;this[d]>=this.DV;){this[d]-=this.DV;if(++d>=this.t)this[this.t++]=0;++this[d]}}}function NullExp(){}function nNop(b){return b}function nMulTo(b,d,e){b.multiplyTo(d,e)}function nSqrTo(b,d){b.squareTo(d)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(b){return this.exp(b,new NullExp)}
function bnpMultiplyLowerTo(b,d,e){var h=Math.min(this.t+b.t,d);e.s=0;for(e.t=h;h>0;)e[--h]=0;var n;for(n=e.t-this.t;h<n;++h)e[h+this.t]=this.am(0,b[h],e,h,0,this.t);for(n=Math.min(b.t,d);h<n;++h)this.am(0,b[h],e,h,0,d-h);e.clamp()}function bnpMultiplyUpperTo(b,d,e){--d;var h=e.t=this.t+b.t-d;for(e.s=0;--h>=0;)e[h]=0;for(h=Math.max(d-this.t,0);h<b.t;++h)e[this.t+h-d]=this.am(d-h,b[h],e,0,0,this.t+h-d);e.clamp();e.drShiftTo(1,e)}
function Barrett(b){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*b.t,this.r2);this.mu=this.r2.divide(b);this.m=b}function barrettConvert(b){if(b.s<0||b.t>2*this.m.t)return b.mod(this.m);else if(b.compareTo(this.m)<0)return b;else{var d=nbi();b.copyTo(d);this.reduce(d);return d}}function barrettRevert(b){return b}
function barrettReduce(b){b.drShiftTo(this.m.t-1,this.r2);if(b.t>this.m.t+1){b.t=this.m.t+1;b.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);b.compareTo(this.r2)<0;)b.dAddOffset(1,this.m.t+1);for(b.subTo(this.r2,b);b.compareTo(this.m)>=0;)b.subTo(this.m,b)}function barrettSqrTo(b,d){b.squareTo(d);this.reduce(d)}function barrettMulTo(b,d,e){b.multiplyTo(d,e);this.reduce(e)}a=Barrett.prototype;a.convert=barrettConvert;a.revert=barrettRevert;
a.reduce=barrettReduce;a.mulTo=barrettMulTo;a.sqrTo=barrettSqrTo;
function bnModPow(b,d,e,h){var n=true;if(!e){n=false;e=function(va){return va}}var o=b.bitLength(),v,u=nbv(1),D,L=o/6;if(o<=0)return u;else v=o<18?1:o<48?3:o<144?4:o<768?5:6;D=o<8?new Classic(d):d.isEven()?new Barrett(d):new Montgomery(d);var N=[],Q=3,P=v-1,U=(1<<v)-1;N[1]=D.convert(this);if(v>1){d=nbi();for(D.sqrTo(N[1],d);Q<=U;){N[Q]=nbi();D.mulTo(d,N[Q-2],N[Q]);Q+=2}}var W=b.t-1,da,fa=true,ha=nbi(),oa;o=nbits(b[W])-1;var I=this;this.itercount=0;var ka=function(){h&&h(Math.min(I.itercount/L,1));
if(o>=P)da=b[W]>>o-P&U;else{da=(b[W]&(1<<o+1)-1)<<P-o;if(W>0)da|=b[W-1]>>this.DB+o-P}for(Q=v;(da&1)==0;){da>>=1;--Q}if((o-=Q)<0){o+=this.DB;--W}if(fa){N[da].copyTo(u);fa=false}else{for(;Q>1;){D.sqrTo(u,ha);D.sqrTo(ha,u);Q-=2}if(Q>0)D.sqrTo(u,ha);else{oa=u;u=ha;ha=oa}D.mulTo(ha,N[da],u)}for(;W>=0&&(b[W]&1<<o)==0;){D.sqrTo(u,ha);oa=u;u=ha;ha=oa;if(--o<0){o=this.DB-1;--W}}if(W<0)return e(D.revert(u));I.itercount+=1;if(n)setTimeout(function(){ka.apply(I)},1);else return ka.apply(I)};return ka.apply(this)}
function bnGCD(b){var d=this.s<0?this.negate():this.clone();b=b.s<0?b.negate():b.clone();if(d.compareTo(b)<0){var e=d;d=b;b=e}e=d.getLowestSetBit();var h=b.getLowestSetBit();if(h<0)return d;if(e<h)h=e;if(h>0){d.rShiftTo(h,d);b.rShiftTo(h,b)}for(;d.signum()>0;){if((e=d.getLowestSetBit())>0)d.rShiftTo(e,d);if((e=b.getLowestSetBit())>0)b.rShiftTo(e,b);if(d.compareTo(b)>=0){d.subTo(b,d);d.rShiftTo(1,d)}else{b.subTo(d,b);b.rShiftTo(1,b)}}h>0&&b.lShiftTo(h,b);return b}
function bnpModInt(b){if(b<=0)return 0;var d=this.DV%b,e=this.s<0?b-1:0;if(this.t>0)if(d==0)e=this[0]%b;else for(var h=this.t-1;h>=0;--h)e=(d*e+this[h])%b;return e}
function bnModInverse(b){var d=b.isEven();if(this.isEven()&&d||b.signum()==0)return BigInteger.ZERO;for(var e=b.clone(),h=this.clone(),n=nbv(1),o=nbv(0),v=nbv(0),u=nbv(1);e.signum()!=0;){for(;e.isEven();){e.rShiftTo(1,e);if(d){if(!n.isEven()||!o.isEven()){n.addTo(this,n);o.subTo(b,o)}n.rShiftTo(1,n)}else o.isEven()||o.subTo(b,o);o.rShiftTo(1,o)}for(;h.isEven();){h.rShiftTo(1,h);if(d){if(!v.isEven()||!u.isEven()){v.addTo(this,v);u.subTo(b,u)}v.rShiftTo(1,v)}else u.isEven()||u.subTo(b,u);u.rShiftTo(1,
u)}if(e.compareTo(h)>=0){e.subTo(h,e);d&&n.subTo(v,n);o.subTo(u,o)}else{h.subTo(e,h);d&&v.subTo(n,v);u.subTo(o,u)}}if(h.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(u.compareTo(b)>=0)return u.subtract(b);if(u.signum()<0)u.addTo(b,u);else return u;return u.signum()<0?u.add(b):u}
var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=67108864/lowprimes[lowprimes.length-1];
function bnIsProbablePrime(b){var d,e=this.abs();if(e.t==1&&e[0]<=lowprimes[lowprimes.length-1]){for(d=0;d<lowprimes.length;++d)if(e[0]==lowprimes[d])return true;return false}if(e.isEven())return false;for(d=1;d<lowprimes.length;){for(var h=lowprimes[d],n=d+1;n<lowprimes.length&&h<lplim;)h*=lowprimes[n++];for(h=e.modInt(h);d<n;)if(h%lowprimes[d++]==0)return false}return e.millerRabin(b)}
function bnpMillerRabin(b){var d=this.subtract(BigInteger.ONE),e=d.getLowestSetBit();if(e<=0)return false;var h=d.shiftRight(e);b=b+1>>1;if(b>lowprimes.length)b=lowprimes.length;for(var n=nbi(),o=0;o<b;++o){n.fromInt(lowprimes[o]);var v=n.modPow(h,this);if(v.compareTo(BigInteger.ONE)!=0&&v.compareTo(d)!=0){for(var u=1;u++<e&&v.compareTo(d)!=0;){v=v.modPowInt(2,this);if(v.compareTo(BigInteger.ONE)==0)return false}if(v.compareTo(d)!=0)return false}}return true}a=BigInteger.prototype;a.chunkSize=bnpChunkSize;
a.toRadix=bnpToRadix;a.fromRadix=bnpFromRadix;a.fromNumber=bnpFromNumber;a.bitwiseTo=bnpBitwiseTo;a.changeBit=bnpChangeBit;a.addTo=bnpAddTo;a.dMultiply=bnpDMultiply;a.dAddOffset=bnpDAddOffset;a.multiplyLowerTo=bnpMultiplyLowerTo;a.multiplyUpperTo=bnpMultiplyUpperTo;a.modInt=bnpModInt;a.millerRabin=bnpMillerRabin;a.clone=bnClone;a.intValue=bnIntValue;a.byteValue=bnByteValue;a.shortValue=bnShortValue;a.signum=bnSigNum;a.toByteArray=bnToByteArray;a.equals=bnEquals;a.min=bnMin;a.max=bnMax;a.and=bnAnd;
a.or=bnOr;a.xor=bnXor;a.andNot=bnAndNot;a.not=bnNot;a.shiftLeft=bnShiftLeft;a.shiftRight=bnShiftRight;a.getLowestSetBit=bnGetLowestSetBit;a.bitCount=bnBitCount;a.testBit=bnTestBit;a.setBit=bnSetBit;a.clearBit=bnClearBit;a.flipBit=bnFlipBit;a.add=bnAdd;a.subtract=bnSubtract;a.multiply=bnMultiply;a.divide=bnDivide;a.remainder=bnRemainder;a.divideAndRemainder=bnDivideAndRemainder;a.modPow=bnModPow;a.modInverse=bnModInverse;a.pow=bnPow;a.gcd=bnGCD;a.isProbablePrime=bnIsProbablePrime;Function.prototype.curry=function(){var b=this,d=Array.prototype.slice.call(arguments);return function(){return b.apply(this,d.concat(Array.prototype.slice.call(arguments)))}};Function.prototype.bind=function(b,d){return function(e){var h=this,n=b.call(arguments,1);if(n.length)return function(){return arguments.length?h.apply(e,d.apply(n,arguments)):h.apply(e,n)};return function(){return arguments.length?h.apply(e,arguments):h.call(e)}}}(Array.prototype.slice,Array.prototype.concat);
function get_domain(){parts=document.domain.split(".");if(parts.length<2)return document.domain;return isNaN(parseInt(parts[0]))?parts[parts.length-2]+"."+parts[parts.length-1]:document.domain};function clean_tkt(b){return b[0]=='"'&&b[b.length-1]=='"'?b.slice(1,b.length-1):b}
function parse_cookies_from_xhr(b){if(b=b.getAllResponseHeaders()){function d(v,u){return v.slice(0,u.length).toLowerCase()==u.toLowerCase()}b=b.split("\n");for(var e={},h=0;h<b.length;h++){var n=b[h];if(d(n,"set-cookie:")){console.log("found set cookie line",n);var o=jQuery.trim(n.slice(11,n.length)).split("=");n=jQuery.trim(o[0]);o=o[1].slice(0,o[1].indexOf(";"));if(n=="bt_talon_tkt")o=clean_tkt(o);console.log("updating xhr cookies with",n,"equal to",o);e[n]=o}}return e}else console.error("ERROR PARSING bt_talon_tkt out of response headers")}
BigInteger.prototype.toPaddedHex=function(b){for(var d=this.toString(16);d.length<b;)d="0"+d;return d};BigInteger.prototype.toAscii=function(b){var d="";b=this.toPaddedHex(b);for(var e=0,h=b.length;e<h;e+=2)d+=String.fromCharCode(parseInt(b.charAt(e)+b.charAt(e+1),16));return d};
function login(b,d,e){if(b===undefined&&d===undefined){credentials=jQuery.jStorage.get("debug_login");b=credentials[0];d=credentials[1]}else{jQuery.jStorage.set("debug_login",[b,d]);jQuery.jStorage._save()}(new srp).negotiate(true,b,d,e)}
_.extend(srp.prototype,{set_progress:function(b){jQuery("#loginProgressBar").width(Math.round(100*b,0)+"%")},set_label:function(b){jQuery("#loginProgressBarLabel").html(b)},set_progress_range:function(b,d,e){b=Math.min((d-b)*e+b,d);jQuery("#loginProgressBar").width(Math.round(100*b,1)+"%")},get_srp_url:function(b,d){var e=this.options&&this.options.from_raptor?"/client/gui/srp/":"/talon/gui/srp/";if(d)e+="?newguid=1";else if(navigator.userAgent.match("Opera")){console.warn("no way to get what set-cookie set on an xhr within javascript :-(");
e+="?operacantgetcookies=1"}else if(this._stored_guid)e=e+"?GUID="+encodeURIComponent(this._stored_guid);else this.error_out("error creating srp url -- no guid to put in it!");for(var h in b)e=e+"&"+h+"="+encodeURIComponent(b[h]);if(this.options&&this.options.jsonp)e+="&callback=?";if(this.options&&this.options.domain)e=this.options.domain+e;return e},negotiate:function(b,d,e,h){var n=this;this.options=h;n.credentials={username:d,password:e};this.set_progress(0.15);this.set_label("Sending username");
jQuery("#loginProgressBarLabel").show();jQuery("#loginProgressBarContainer").show();jQuery("#submit").hide();n.username=d||jQuery("#username").val();d={user:n.username,time:(new Date).getTime()};if(b)d.stay_signed_in=true;window.eventTracker&&eventTracker.track("Login","SendUser");jQuery.ajax(this.get_srp_url(d,true),{dataType:this.options&&this.options.jsonp?"jsonp":"json",cached:false,error:this.options&&this.options.error,success:n.create_public_key.bind(n)})},create_public_key:function(b,d,e){function h(D){return v.set_progress_range(0.3,
0.45,D)}d=null;if(this.options.jsonp){if(b.data&&b.cookies)d=b;else{b=e.responseText;d=-1;for(var n=b.length-1;n>0;n--)if(b[n]==")"){d=n;break}d=jQuery.parseJSON(b.slice(b.indexOf("(")+1,d+1));console.log("manually parsed out jsonp response:"+d)}if(d.data&&d.cookies){this.srp_cookies=d.cookies;try{resp=jQuery.parseJSON(d.data);d=resp==null?d.data:resp}catch(o){debugger;console.error("error parsing response.data",d);this.error_out(d,e)}this._stored_guid=this.srp_cookies.GUID}else{console.error("jsonp unexpected response",
d);this.error_out(d,e)}this.srp_cookies||this.error_out("jsonp but to srp_cookies parsed!")}else{if((d=parse_cookies_from_xhr(e))&&d.GUID){d=d.GUID;console.log("got guid from xhr manually parsed cookies")}else{d=jQuery.cookie("GUID");console.log("got guid from jquery.cookie")}this._stored_guid=d;console.log("setting stored guid",d);d=b}if(!d)return this.error_out("error parsing response data",e);if(d.status=="/status/error")return this.error_out(d);else if(!d.length||d.length!=3){console.error("public key response makes no sense",
d);return this.error_out(d)}var v=this;this.set_progress(0.3);this.set_label("Creating public key...");v.modulus=new BigInteger(d[0],10);v.generator=new BigInteger(d[1],10);v.salt=new BigInteger(d[2],10);var u=new BigInteger(sjcl.codec.hex.fromBits(sjcl.random.randomWords(5)),16);jQuery.jStorage.set("entropySeed",sjcl.random.randomWords(9));v.generator.modPow(u,v.modulus,function(D){v.public_key=D;window.eventTracker&&eventTracker.track("Login","SendPub");D={username:v.username,pub:D.toString(10),
time:(new Date).getTime()};jQuery.ajax(v.get_srp_url(D),{dataType:v.options&&v.options.jsonp?"jsonp":"json",cached:false,success:function(L,N,Q){N=null;if(v.options&&v.options.jsonp){if(L.data&&L.cookies){_.extend(v.srp_cookies,L.cookies);N=L.data}else try{var P=jQuery.parseJSON(L);N=P==null?L:P}catch(U){v.error_out("unexpected response",L);return}if(_.isString(N.data))N.data=jQuery.parseJSON(N);if(N.data=="/status/error"){v.error_out(N);return}}else N=L;v.create_session_key(Q,new BigInteger(N[0],
10),v.modulus,v.generator,v.salt,u)}.bind(v)})},h)},error_out:function(b,d){console.error("error in key negotiation");if(config.asserts)debugger;if(this.options&&this.options.error)return this.options.error(b,d);else alert(b)},create_session_key:function(b,d,e,h,n,o){function v(P){return D.set_progress_range(0.45,0.7,P)}function u(P){return D.set_progress_range(0.7,0.95,P)}var D=this;this.set_progress(0.45);this.set_label("Creating session key...");D.server_key=d;if(0==D.server_key.modPow(new BigInteger("1",
10),D.modulus))if(this.options.jsonp)this.error_out("The "+config.name+" client provided an invalid public key. "+d+"Please try again.");else{alert("The "+config.name+" client provided an invalid public key. Please try again.");throw"Server key was = 0 mod N. Aborting SRP process.";}var L=new BigInteger("3",10),N=new BigInteger(sha1Hash(this.public_key.toAscii(320)+D.server_key.toAscii(320)),16);N.modPow(new BigInteger("1",10),D.modulus,function(P){if(0==P){alert("The "+config.name+' client provided an invalid exponent ("u"). Please try again.');
throw'Server provided a "u" parameter which was = 0 mod N. Aborting SRP process.';}});b=jQuery("#username").val()||D.credentials.username;var Q=jQuery("#password").val()||D.credentials.password;D.credentials=null;b=sha1Hash(b+":"+Q);d=new BigInteger(b,16);Q=new BigInteger(sha1Hash(n.toAscii(20)+d.toAscii(b.length)),16);h.modPow(Q,e,function(P){negative_g_to_the_x=e.subtract(P);negative_g_to_the_x_times_k=negative_g_to_the_x.multiply(L);D.server_key.add(negative_g_to_the_x_times_k).modPow(new BigInteger("1",
10),e,function(U){key_exponent=o.add(N.multiply(Q));U.modPow(key_exponent,e,function(W){client_hash=sha1Hash(W.toAscii(320));D.client_key=new BigInteger(client_hash,16);D.verify_key(D.client_key.toPaddedHex(40).slice(0,40))},u)})},v)},compute_verify_key_one:function(b){this.set_label("Sending key verifier to "+config.name+"...");var d=(new BigInteger(sha1Hash(this.modulus.toAscii(320)),16)).xor(new BigInteger(sha1Hash(this.generator.toAscii(2)),16)),e=this.public_key,h=this.server_key;this.client_key=
b;b=d.toAscii(40)+(new BigInteger(sha1Hash(this.username),16)).toAscii(40)+this.salt.toAscii(20)+e.toAscii(320)+h.toAscii(320)+this.client_key.toAscii(40);b=sha1Hash(b);this.M1=new BigInteger(b,16);return this.M1.toString(10)},compute_verify_key_two:function(b){var d=this.public_key;this.set_label("Verifying key from "+config.name+"...");b=sha1Hash(d.toAscii(320)+this.M1.toAscii(40)+b.toAscii(40));return(new BigInteger(b,16)).toString(10)},verify_key:function(b){if(!b)if(config.asserts)debugger;var d=
this;window.eventTracker&&eventTracker.track("Login","SendVerify");var e={username:d.username,verify:d.compute_verify_key_one(d.client_key),time:(new Date).getTime()};jQuery.ajax(d.get_srp_url(e),{dataType:this.options&&this.options.jsonp?"jsonp":"json",cached:false,success:function(h,n,o){n=o.getResponseHeader("X-Bt-Agent")&&o.getResponseHeader("X-Bt-Agent").match("Client/3")||h.agent&&h.agent.match("Client/3")?true:false;if(h.data&&h.cookies){_.extend(d.srp_cookies,h.cookies);h=h.data}if(h[0]==
d.compute_verify_key_two(d.client_key)){d.set_progress(1);d.set_label("Verification complete. Redirecting...");if(d.options&&d.options.success)return d.options.success("/talon/gui/srp/?verified=1&noredirect=1&utorrent="+(n?"1":"0"));window.eventTracker&&eventTracker.track("Login","Redirect");if(d.options&&d.options.callback)d.options.callback(b,d.srp_cookies);else{if(d.srp_cookies){o=d._stored_guid;h={key:b,bt_talon_tkt:d.srp_cookies.bt_talon_tkt,bt_user:d.srp_cookies.bt_user,cid:d.srp_cookies.cid}}else if(h=
jQuery.cookie("bt_talon_tkt")){o=d._stored_guid;h={key:b,bt_talon_tkt:clean_tkt(h),bt_user:jQuery.cookie("bt_user"),cid:jQuery.cookie("cid")}}else{console.warn("bt_talon_tkt not found in cookies -- looking in xhr response headers",o.getAllResponseHeaders());h=parse_cookies_from_xhr(o);o=d._stored_guid;h={key:b,bt_talon_tkt:h.bt_talon_tkt,bt_user:h.bt_user,cid:h.cid}}var v=new ClientManager,u=new Client(o,v,h);u.type="remote";var D=jQuery.jStorage.get("falconStore.sessionKeys")||{};D[o]=b;jQuery.jStorage.set("falconStore.sessionKeys",
D);v.sync();v.add(u);v.add_to_sessions_cookie(u);u=v.serialize({window_name:true});jQuery.jStorage.set("falconStore.sessionKeys",u);window.name=jQuery.toJSON(u);v=v.serialize({cookie:true});v.current=o;window.location=document.location.protocol+"//"+document.location.host+"/talon/gui/srp/?verified=1&noredirect=1&utorrent="+(n?"1":"0")+"&bt_talon_tkt="+encodeURIComponent(h.bt_talon_tkt)+"&sessions="+encodeURIComponent(jQuery.toJSON(v))}}else d.error_out("Verification response from the remote "+config.name+
" client was invalid. This could be due to an intermittent connection problem or a username or password mismatch. Please check them and try again.")}})}});function remotelog(b,d){console.log("foobar");b={event:b,data:d};if(config.verbose>1){d=(config.remotelog_server?config.remotelog_server:"http://192.168.56.1:9090")+"/remotelog?data="+encodeURIComponent(jQuery.toJSON(b));jQuery.ajax({url:d,jsonp:true,success:function(){},error:function(){}})}if(window.console){try{b=jQuery.toJSON(b)}catch(e){b=b}console.log("remotelog: "+b)}}function on_execute_result(b,d,e){console.log("got execute result",b,d,e)}
function setup_remote_execute(){console.log("setup remote execute called",(new Date).getTime(),jQuery);jQuery.ajax({url:"http://10.10.90.24:9090/remote_execute_listener",success:function(b){setTimeout(function(){setup_remote_execute()},1)},error:function(b,d,e){console.log("jsonp got fail result",b,d,e);setTimeout(function(){setup_remote_execute()},1E3)},crossDomain:true,processData:false,dataType:"jsonp"})};function looks_like_guid(b){return b&&b.length==20}function main_window_navigate(b){window.open(b)}function to_file_size(b){var d=["b","kb","Mb","Gb","Tb","Pb","Eb"],e=d.length-1,h=1;for(b/=1024;b>=1024&&h<e;){b/=1024;h++}return b.toFixed(1)+" "+d[h]}
if(navigator.userAgent.match(/firefox/i)||navigator.userAgent.match(/MSIE/i)||!window.console){window.console&&console.log("setting up window.myconsole");function logger(b,d,e,h,n){b=[b,d,e,h,n];d="";for(e=0;e<b.length;e++)if(b[e]!==undefined)d=d+" "+b[e];remotelog(d)}window.myconsole={log:logger,error:logger,warn:logger}}else window.myconsole=window.console;var is_firefox=navigator.userAgent.match(/firefox/i),is_msie=navigator.userAgent.match(/MSIE/i),ff_fudge=is_firefox?-39:0;
function sendmsg(b){SendMessage("ut_toolbar_gadget",jQuery.toJSON({command:b}))}function make_disabled(b){jQuery(b).css({background:"#cecece",color:"#999"})}function Storage(){}Storage.prototype={set:function(b,d){StoreGlobalKey(b,d)},get:function(b){return RetrieveGlobalKey(b)}};function Prefs(){this.store=new Storage;var b=this.load_prefs();myconsole.log("loaded prefs",b);this.prefs=b}
Prefs.prototype={add_pref:function(b,d){this.prefs[b]=d;myconsole.log("adding pref",b,d,this.prefs);this.store.set("toolbar_prefs",jQuery.toJSON(this.prefs))},get_pref:function(b){return this.prefs[b]},load_prefs:function(){var b={};try{var d=this.store.get("toolbar_prefs");if(d!=null)b=jQuery.parseJSON(d)}catch(e){}return b}};window.preferences=new Prefs;var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-28784910-1"]);_gaq.push(["_trackPageview"]);
(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)})();
function custom_track(b,d){var e=[];for(var h in d)e.push(encodeURIComponent(h)+"="+encodeURIComponent(d[h]));d=config.stats_url+"?name="+encodeURIComponent(b)+"&"+e.join("&");jQuery.ajax({url:d,jsonp:true,callback:function(){}});_gaq.push(["_trackEvent",b,"Init","Event Triggered"])};function decode_location_hash_arguments(){var b=window.location.hash;b=b.slice(1,b.length).split("&");for(var d={},e=0;e<b.length;e++){var h=b[e].split("=");d[h[0]]=decodeURIComponent(h[1])}return d}
function Gadget(b){this.type=b;if(this.type=="none")debugger;navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/chromium/i)||(this.type=="main"?RegisterForMessaging("ut_toolbar_main"):RegisterForMessaging("ut_toolbar_gadget"));var d=this;if(window.EBMessageReceived){myconsole.error("message received already defined!");debugger}window.EBMessageReceived=function(v,u){myconsole.log([b],"gadget received toolbarapi message",v,u);try{var D=jQuery.parseJSON(u)}catch(L){myconsole.error("error parsing gadget message",
u);debugger}d.handle_gadget_message(D)};this._templates={};if(b=="upload"){this.filereader=new WrappedFileReader;if(this.filereader._native){myconsole.log("can use native file upload! yay");debugger}else if(window.swfobject){myconsole.log("embedding flash object");swfobject.embedSWF(config.static_prefix+"/static/flash/BTUploader.swf","upload_btn","24","24","10,0,0,0",null,{},{allowScriptAccess:"always",play:"true",wmode:"transparent"},{id:"btuploader"})}else myconsole.log("swfobject not found");jQuery("#button_upload").click(function(){d.click_upload()})}else if(b==
"torrent_list"){this.load_client();this.client?this.start_updating():myconsole.error("error syncing client from toolbar");var e=jQuery.ajax({url:config.static_root+"torrent_template.html?v="+window.UTORRENT_CONTROL_VERSION,async:false,processData:false});if(e.status==200||e.readyState==4)this.template=jQuery(e.responseText);else{e="errOAR fetching torrent_template.html";myconsole.error(e);this.template=jQuery("<div>"+e+"</div>")}}else if(b=="computerselect"){this.load_client();function h(){for(var v in clients._clients){var u=
jQuery('<div class="indie_computer_wrapper"><div class="remove_computer">Remove</div><div class="computer_name">'+clients._clients[v].get_name()+"</div></div>");jQuery("#global_container").append(u);jQuery(".computer_name",u).click(_.bind(d.click_switch_to_computer,this,v));jQuery(".remote_computer",u).click(_.bind(d.click_login_to_computer,this,v));jQuery(".remove_computer",u).click(_.bind(d.click_remove_computer,this,u,v))}}e=false;for(var n in clients._clients){var o=clients._clients[n];if(o.connection_type()==
"local"){o.setting.all(h);e=true;break}}e||h()}else if(b=="main"){myconsole.log("sync fetch torrent template at url "+(config.static_root+"torrent_template.html"));e=jQuery.ajax({url:config.static_root+"torrent_template.html?v="+window.UTORRENT_CONTROL_VERSION,async:false,processData:false});if(e.status==200||e.readyState==4)this.template=jQuery(e.responseText);else{e="errROAR!! fetching torrent_template.html";myconsole.error(e);debugger;this.template=jQuery("<div>"+e+"</div>")}jQuery("#torrent_template_container").append(this.template)}else if(b==
"connection"){jQuery("#dialog_container").show();myconsole.log("connection gadget instantiation");this.load_client();if(this.client){jQuery("#connection_type_wrapper").show();this.client.connection_type()=="local"?document.getElementById("conn_local").setAttribute("checked","checked"):document.getElementById("conn_remote").setAttribute("checked","checked")}else document.getElementById("conn_remote").setAttribute("checked","checked")}else b!="setup_instructions"&&b!="alert_instructions"&&b!="alert_instructions_username_taken"&&
b!="alert_signin"&&myconsole.error("unrecognized gadget type");this.update_interval=2E3;this._info_states=["hidden","percent","speed"];this._info_state_index=0}
Gadget.prototype={click_login_to_computer:function(b,d){console.log("click login to computer",b);SendMessage("ut_toolbar_main",JSON.stringify({command:"autologin",id:b}));d.preventDefault()},click_remove_computer:function(b,d,e){b[0].parentNode.removeChild(b[0]);console.log("click remove computer",d);SendMessage("ut_toolbar_main",JSON.stringify({command:"remove_computer",id:d}));e.preventDefault()},click_switch_to_computer:function(b,d){console.log("click switch to computer",b);SendMessage("ut_toolbar_main",
JSON.stringify({command:"change_connection",id:b}));d.preventDefault()},load_client:function(){myconsole.log("load_client");if(RetrieveGlobalKey("saved_clients")){var b=RetrieveGlobalKey("saved_clients");myconsole.log("saved_clients key is",b);b=jQuery.parseJSON(RetrieveGlobalKey("saved_clients"));myconsole.log("parsed credentials",b)}else{b={};myconsole.log("global credentials key not set");debugger}window.clients=new ClientManager;clients.sync(b);b=(b=preferences.get_pref("conn_type"))?b=="local"?
clients.get_paired_client():clients.get_remote_client():undefined;myconsole.log("client is",b,b.guid);clients.set_current_client(b);this.client=clients.get_current_client()},changeconn:function(b){SendMessage("ut_toolbar_main",JSON.stringify({command:"change_connection",id:b.id}))},conn_sendmsg:function(b){if(b=="connect"){b={command:"connect"};SendMessage("ut_toolbar_main",jQuery.toJSON(b));b=document.getElementById("connect_extension");b.style.display="none";b=document.getElementById("disconnect_extension");
b.style.display="block"}else if(b=="disconnect"){b={command:"disconnect"};SendMessage("ut_toolbar_main",jQuery.toJSON(b));b=document.getElementById("connect_extension");b.style.display="block";b=document.getElementById("disconnect_extension");b.style.display="none"}else if(b=="reset"){myconsole.log("theyve been greyed out");b={command:"reset"};SendMessage("ut_toolbar_main",jQuery.toJSON(b));make_disabled("#reset_extension")}},handle_gadget_message:function(b){if(this.parent)return this.parent.handle_gadget_message(b);
if(b.command=="close_gadgets"){myconsole.log("close floating window "+window.location.href);CloseFloatingWindow()}else b.command=="change_info_state"?myconsole.log("gadget",this.type,"got command change info state"):myconsole.error("gadget could not handle message",b)},toggle_info_state:function(b){if(b!=undefined)this._info_state_index=b;else{this._redraw_lock&&myconsole.error("cannot toggle info state .. already rendering transition");this._info_state_index=(this._info_state_index+1)%this._info_states.length}},
get_client:function(){return clients.get_current_client()},start_updating:function(){this.updating=true;this.req_update()},req_update:function(){myconsole.log("getting cid");var b=clients.get_current_client().torrent.cacheid;myconsole.log("requesting update w cid",b);this.client.raptor.post({list:1,cid:b},{},_.bind(this.got_update,this));myconsole.log("requested update")},got_update:function(){myconsole.log("got update");this.update_torrent_display();myconsole.log("updated torrent display");if(this.updating)this.next_update=
setTimeout(_.bind(this.req_update,this),this.update_interval)},update_torrent_display:function(){myconsole.log("udpate torrent display");this.client=this.get_client();var b=this.client.torrent.keys();myconsole.log("got hashes",b.length);var d=this;b.sort(function(u,D){return d.client.torrent.get(u).date_added<d.client.torrent.get(D).date_added});var e=jQuery("#global_container");e.html("");for(var h=0;h<b.length;h++)try{var n=this.client.torrent.get(b[h]),o=this.render_torrent_to_template(n,this.template.clone());
myconsole.log("rendering torrent to template",e.length,n.hash,o);e.append(o);myconsole.log("rendered torrent to template",n.hash)}catch(v){myconsole.log("failed rendering torrent",n.hash)}myconsole.log("rendered all torrents");e.append(jQuery('<div style="border: 1px solid black; padding: 1px;"></div>'))},update_info_display:function(b,d){if(!this.client)this.client=clients.get_current_client();var e=b?[b.hash]:this.client.torrent.keys();if(d&&d.redrawn){b=this._templates[b.hash];if(this._info_state_index!=
0)if(this._info_state_index==1){jQuery(".bt_button_info",b).css({display:"none"});jQuery(".bt_button_info_2",b).css({display:"block"});jQuery(".bt_info_container",b).css({width:"58px"});jQuery(".torrent_name",b).css({width:"240px"});jQuery(".bt_state_container",b).css({display:"block"})}else if(this._info_state_index==2){jQuery(".bt_button_info_2",b).css({display:"none"});jQuery(".bt_button_info",b).css({display:"block"});jQuery(".bt_state_container",b).css({display:"none"});jQuery(".bt_info_container",
b).css({width:"88px"});jQuery(".torrent_name",b).css({width:"210px"});jQuery(".bt_state-dl_container",b).css({display:"block"})}}else if(this._redraw_lock)myconsole.error("cant redraw -- already animating transition");else if(this._info_state_index_drawn!=this._info_state_index){this._redraw_lock=true;myconsole.log("drawing",e.length,"torrents");for(d=0;d<e.length;d++){b=e[d];b=this._templates[b.hash];if(this._info_state_index==0){jQuery(".bt_state-dl_container",b).fadeOut(300);jQuery(".bt_info_container",
b).delay(300).animate({width:"0px"},500);jQuery(".torrent_name",b).delay(300).animate({width:"290px"},500)}else if(this._info_state_index==1){jQuery(".bt_button_info",b).css({display:"none"});jQuery(".bt_button_info_2",b).css({display:"block"});jQuery(".bt_info_container",b).animate({width:"58px"},500);jQuery(".torrent_name",b).animate({width:"240px"},500);jQuery(".bt_state_container",b).delay(500).fadeIn(300)}else if(this._info_state_index==2){jQuery(".bt_button_info_2",b).css({display:"none"});
jQuery(".bt_button_info",b).css({display:"block"});jQuery(".bt_state_container",b).fadeOut(200);jQuery(".bt_info_container",b).animate({width:"88px"},200);jQuery(".torrent_name",b).animate({width:"210px"},200);jQuery(".bt_state-dl_container",b).delay(300).fadeIn(300)}}var h=this;if(this._redraw_lock_timeout)clearTimeout(this._redraw_lock_timeout);else this._redraw_lock_timeout=setTimeout(function(){h._redraw_lock=false;h._redraw_lock_timeout=null},500);this._info_state_index_drawn=this._info_state_index}},
render_torrent_to_template:function(b,d){var e=this;if(b){var h=Math.floor(b.progress/10)+"%";jQuery(".torrent_info",d).html(b.name);jQuery(".torrent_info_percent_complete",d).html(h);jQuery(".torrent_info_speed",d).html(to_file_size(b.down_speed)+"/s");jQuery(".color_calc",d).css("width",h);if(b.started()){jQuery(".bt_button_play",d).css("display","none");jQuery(".bt_button_pause",d).css("display","block")}else{jQuery(".bt_button_pause",d).css("display","none");jQuery(".bt_button_play",d).css("display",
"block")}if(b.started())b.isCompleted()?jQuery(".torrent_dl_color",d).css("background-color","#86c440"):jQuery(".torrent_dl_color",d).css("background-color","#3499ff");else jQuery(".torrent_dl_color",d).css("background-color","#cecece");this.bind_events_to_template(b,d);this._templates[b.hash]=d;this.update_info_display(b,{redrawn:true})}else{jQuery(".torrent_info",d).html("No torrents yet!");function n(o){if(o&&o.content){var v=o.content[0].name,u=o.content[0].torrent;jQuery(".torrent_info",d).html('No torrents yet -- would you like to add <a href="#">'+
v+"</a>?");jQuery(".torrent_info a",d).click(function(D){clients.get_current_client().torrent.add(u);D.preventDefault()})}}this.featured_data?n(this.featured_data):jQuery.ajax({url:config.srp_root.replace("https://","http://")+"/content/latest",dataType:"jsonp",success:function(o){e.featured_data=o;n(o)}})}return d},bind_events_to_template:function(b,d){jQuery(".bt_button_x",d).click(function(){b.remove()});jQuery(".bt_button_play",d).click(function(){b.start()});jQuery(".bt_button_pause",d).click(function(){b.stop()});
var e=this;jQuery(".button_info, .button_info_2",d).click(function(){e.toggle_info_state();myconsole.log("toggling info state!");e.update_info_display(null)});jQuery(".button_info, .button_info_2",d).mouseenter(function(){jQuery(".bt_info_container",d).css("background","url(../images/info_background_hover.png) no-repeat 0 0")});jQuery(".button_info, .button_info_2",d).mouseleave(function(){jQuery(".bt_info_container",d).css("background","url(../images/info_background.png) no-repeat 0 0")});jQuery(".torrent_name",
d).click(function(){SendMessage("ut_toolbar_main",jQuery.toJSON({command:"select_torrent",hash:b.hash}))})},upload_file:function(){},click_upload:function(){myconsole.log("clicked upload button");var b={command:"add_by_url",url:jQuery("#url_input").val()};SendMessage("ut_toolbar_main",jQuery.toJSON(b));jQuery("#url_input").val("")},ondata:function(b){myconsole.log("gadget got data",this,b);SendMessage("ut_toolbar",jQuery.toJSON({command:"upload_torrent",data:b.data}))}};jQuery("#onboard_1_a").click(function(b){b.preventDefault()});function fadeout_signup(){jQuery(".bt_torrent_container").css("display","none");jQuery(".bt_onboard_2").css("display","none");jQuery(".bt_onboard_3").css("display","none");jQuery(".bt_onboard_1").fadeOut(300)}function fadeout_signin(){jQuery(".bt_torrent_container").css("display","none");jQuery(".bt_onboard_1").css("display","none");jQuery(".bt_onboard_2").fadeOut(300)}
function show_remote_login(b){if(b&&b.instant){jQuery(".bt_login_container").show();myconsole.log("showing remote login",jQuery(".bt_onboard_3"));jQuery(".bt_onboard_3").show()}else{jQuery(".bt_login_container").show();jQuery(".bt_onboard_3").delay(300).fadeIn(500)}if(b&&b.toolbar){jQuery(".bt_submit").unbind();jQuery(".bt_submit").click(_.bind(b.toolbar.do_remote_login,b.toolbar))}jQuery(".form_instructions_title").text("Sign In To Remote Account");jQuery(".bt_submit").attr("value","Sign In")}
jQuery("#disconnect_extension").click(function(){jQuery("#disconnect_extension").css("display","none");jQuery("#connect_extension").css("display","block")});function EBCallBackMessageReceived(b){myconsole.log("js injection successful",b)}
function do_autologin_injection(){var b=clients.get_current_client();if(b){var d=clients.serialize({cookie:true});d.current=b.guid;var e=clients.serialize({window_name:true});b={current_client:{type:b.connection_type(),key:b.guid},type:"autologin",sessions:d,enc_keys:e};myconsole.log("injecting autologin script");JSInjection("debugger; window.autologin_data = "+jQuery.toJSON(b)+'; if (window.clients && ! window.clients._called_autologin) { clients.do_autologin(); }; EBCallBackMessageReceived("didautologin");')}}
var track_all_urls=false;function EBDocumentComplete(){var b=GetMainFrameUrl(),d=GetMainFrameTitle();myconsole.log("a new web page loaded",b,d);d=config.autologin_url.replace("utorrent.com","bittorrent.com");var e=config.autologin_url;myconsole.log("checking if should inject autologin",e,b.slice(0,d.length));if(b.slice(0,d.length)==d||b.slice(0,e.length)==e)do_autologin_injection()}
function Toolbar(){navigator.userAgent.match(/chrome/i)||jQuery(".ut_icon_link").attr("href",config.autologin_url);this._start_paired=true;var b=null;if(RetrieveGlobalKey("PairingKey"))b=RetrieveGlobalKey("PairingKey");this._ever_got_update=false;this._store_paired_key=true;this._set_username_for_demo=false;this._connection_state=null;this._query_gadget_open_timeouts={};this._query_gadget_open_callbacks={};window.clients=new ClientManager;this.store=new Storage;this.updating=false;this.update_interval=
8E3;this.gadget=new Gadget("main");this.gadget.parent=this;var d=this;jQuery(document).ready(function(){window.ChangeWidth(600)});if(d._start_paired){jQuery(".bt_onboard_1").css("display","block");jQuery(".bt_onboard_2").css("display","none")}else{jQuery(".bt_onboard_1").css("display","none");jQuery(".bt_onboard_2").css("display","block")}jQuery("#onboard_1").click(_.bind(this.setup_paired_utorrent,this));jQuery(".button_start_ut, .create_user").click(function(){});jQuery(".button_login_utr, .existing_user").click(function(){myconsole.log("set up utorrent clicked");
d.setup_utorrent();fadeout_signin();show_remote_login({toolbar:d})});jQuery("#green_button").click(function(){d.click_gadget("green")});jQuery("#blue_button").click(function(){d.click_gadget("connection",{openposition:"offset:(550;30)"})});jQuery("#blue_button2").click(function(){d.click_gadget("connection",{openposition:"offset:(422;30)"})});jQuery("#blue_button3").click(function(){d.click_gadget("connection",{openposition:"offset:(222;30)"})});jQuery("#computerselect").click(function(){d.click_gadget("computerselect",
{openposition:"offset:(422;30)"})});jQuery("#red_button").click(function(){d.click_gadget("add")});jQuery("#torrent_list").click(function(){d.click_gadget("torrent_list")});jQuery(".bt_button_play").click(function(){d.show_pause_controls();var n=d.current_torrent();n&&n.start()});jQuery(".bt_button_pause").click(function(){d.show_play_controls();var n=d.current_torrent();n&&n.stop()});jQuery(".bt_button_x").click(function(){h.torrent.get(this.get_current_hash()).remove()});jQuery("#torrent_next").click(_.bind(this.switch_current_torrent,
this,1));jQuery("#torrent_prev").click(_.bind(this.switch_current_torrent,this,-1));jQuery("#username").val();jQuery("#password").val();if(this.store.get("pairing_failed"))if(new Date-this.store.get("pairing_failed")<5E3){myconsole.error("pairing failed recently -- wont try to pair");return}var e=this.store.get("saved_clients");if(b){myconsole.log("initializing auto pair client with key",b);e=new ClientAPI;b={port_found:_.bind(this.auto_pair_port_found,this),pairing_key:b};b=new Pairing(b,e);e.pairing=
b;var h=new Client(null,clients,{api:e});b.scan();this.auto_pair_client=h}else if(e){myconsole.log("got saved clients data",e);clients.sync(jQuery.parseJSON(e));this.set_current_client();preferences.get_pref("conn_type")=="local"&&this.set_current_client(null)}if(this.client=clients.get_current_client()){myconsole.log("have a saved client!",this.client,this.client.connection_type());this.client.set_on_error(_.bind(this.on_client_error,this));if(preferences.get_pref("dont_auto_load_client",true))debugger;
if(this.client.connection_type()=="remote")this.remote_login_success();else this.client.connection_type()=="local"&&this.paired_login_success()}else console.warn("no clients!")}
Toolbar.prototype={auto_pair_port_found:function(b){b.test_pairing_key(b.pairing_key,_.bind(this.auto_pair_success,this),_.bind(this.auto_pair_error,this))},auto_pair_success:function(){myconsole.log("auto pair success!");clients.add(this.auto_pair_client);this.set_current_client(null);this.show_setup_username_dialog()},auto_pair_error:function(){myconsole.log("auto pair error");debugger},track_init:function(){var b={t:(new Date).getTime()-__global_init};if(navigator.userAgent.match(/chrome/i))custom_track("toolbar.init_chrome",
b);else if(navigator.userAgent.match(/msie/i))custom_track("toolbar.init_msie",b);else navigator.userAgent.match(/firefox/i)?custom_track("toolbar.init_firefox",b):custom_track("toolbar.init_other",b)},setup_paired_utorrent:function(){var b=this;jQuery("iframe.appView_embedded_iframe",window.parent.document).height(40);jQuery("#onboard_1").addClass("greenie").html("Scanning for &micro;Torrent...");myconsole.log("set up utorrent clicked -- start port scanning");b.setup_utorrent({port_found:function(){b.click_gadget("setup_instructions");
myconsole.log("show dialog here for pairing");jQuery("#onboard_1").html("Found &micro;Torrent...");clients.get_paired_client().raptor.api.pairing.pair({firefox_timeout:20})},success:function(){b.set_current_client(null);b.show_setup_username_dialog()},error:function(d){if(d.port_scan_failed){b.hide_onboarding();b.hideTorrentControls();show_remote_login({instant:true,toolbar:b})}else{debugger;myconsole.error("did not authorize paired request!",d);b.reset_to_onboard_step1()}}})},show_setup_username_dialog:function(){var b=
this;fadeout_signup();myconsole.log("please setup account");jQuery(".bt_onboard_3").delay(300).fadeIn(500);jQuery(".bt_login_container").delay(300).fadeIn(500);jQuery(".bt_submit").attr("value","Sign Up");jQuery(".bt_submit").unbind();jQuery(".bt_submit").click(_.bind(b.sign_up_clicked,b));clients.get_current_client().setting.all(function(){if(clients.get_current_client().setting.get("webui.uconnect_username").value&&!b._set_username_for_demo){myconsole.log("uconnect username already set!");b.hide_gadgets();
b.paired_login_success()}else myconsole.log("need to set username and password for remote")})},do_remote_login:function(){jQuery("#username").attr("disabled",true);jQuery("#password").attr("disabled",true);for(var b=jQuery("#username").val(),d=jQuery("#password").val(),e={stay_signed_in:true,success:_.bind(this.remote_login_success,this),error:_.bind(this.remote_login_error,this)},h=0;h<1E3;h++)sjcl.random.addEntropy(Math.random(),2);clients.login_remote(b,d,e);return false},sign_up_clicked:function(){var b=
jQuery("#username").val();myconsole.log("clicked on sign up... with",b);clients.get_current_client().raptor.api.check_username(b,_.bind(this.sign_up_clicked_got_username_response,this));return false},sign_up_clicked_got_username_response:function(b){var d=jQuery("#username").val(),e=jQuery("#password").val();if(!d||!e)this.click_gadget("alert_instructions_username_taken");else{if(b&&b.code=="/ok")if(b.exists){console.error("this username already exists!");this.click_gadget("alert_instructions_username_taken");
return}var h=this,n=clients.get_current_client();n.setting.set("webui.uconnect_username",d,function(){n.setting.set("webui.uconnect_password",e,function(){n.setting.set("webui.uconnect_enable",1,function(){h.paired_login_success();h.hide_gadgets();myconsole.log("set remote username and password -- all ready to go!");custom_track("toolbar.setup_username",{username:d})})})})}},show_pause_controls:function(){jQuery(".bt_button_play").css("display","none");jQuery(".bt_button_pause").css("display","block");
jQuery(".torrent_dl_color").css("background-color","#3499ff")},show_play_controls:function(){jQuery(".bt_button_pause").css("display","none");jQuery(".bt_button_play").css("display","block");jQuery(".torrent_dl_color").css("background-color","#cecece")},hideTorrentControls:function(){jQuery(".bt_torrent_container").hide()},remote_login_success:function(){jQuery("#username").val("");jQuery("#username").attr("disabled",false);jQuery("#password").val("");jQuery("#password").attr("disabled",false);preferences.add_pref("conn_type",
"remote");myconsole.log("yay logged in to remote!");var b=clients.get_paired_client();b&&b.stop_updating();this.stop_updating();this.client=clients.get_current_client();if(!this.client)debugger;this.hide_onboarding();this.showTorrentControls();this.start_updating({getrapton_fail:this.getrapton_fail});this.save_client(this.client)},paired_login_success:function(){preferences.add_pref("conn_type","local");myconsole.log("yay logged in to pairing and all ready!");this.client=clients.get_current_client();
if(!this.client)debugger;this.stop_updating();this.hide_onboarding();this.start_updating({fetch_settings:true,first_update:_.bind(this.showTorrentControls,this)});this.save_client(this.client)},update_computer_name:function(){this.client&&jQuery(".computer_name").html(this.client.get_name())},showTorrentControls:function(){this.update_computer_name();jQuery(".bt_login_container").fadeOut(300);jQuery(".bt_torrent_container").delay(300).fadeIn(500)},save_client:function(){if(this._store_paired_key){myconsole.log("saving clients!",
clients.serialize({all:true}));this.store.set("saved_clients",jQuery.toJSON(clients.serialize({all:true})))}},remove_saved_client:function(){this.store.set("saved_clients","{}")},start_updating:function(b){this.client.torrent._new_torrent_listeners.length==0&&this.client.torrent.add_new_torrent_listener(_.bind(this.new_torrent,this));if(this.client._update_listeners.length==0){this.client.add_update_listener(_.bind(this.got_update,this));this.client.add_update_fail_listener(_.bind(this.got_update_failed,
this))}this.client.start_updating(b)},set_current_client:function(b){clients.set_current_client(b);(b=clients.get_current_client())&&b.setting&&b.setting._fetched&&jQuery(".computer_name").html(b.get_name())},get_current_hash:function(){return this._current_hash},set_current_hash:function(b){this._current_hash=b},switch_current_torrent:function(b){var d=this.client.torrent.keys(),e=this;d.sort(function(n,o){return e.client.torrent.get(n).date_added<e.client.torrent.get(o).date_added});if(this.get_current_hash())var h=
_.indexOf(d,this.get_current_hash());if(h==-1)b=0;else{b=h+b;if(b==d.length)b=0;else if(b==-1)b=d.length-1}this.set_current_hash(d[b]);this.update_current_torrent_display()},new_torrent:function(b){myconsole.log("a new torrent was added",b);SendMessage("ut_toolbar_gadget",jQuery.toJSON({command:"close_gadgets"}));this.set_current_hash(b.hash);this.update_current_torrent_display()},current_torrent:function(){if(!this.get_current_hash()||!this.client.torrent.get(this.get_current_hash())){if(this.client.torrent.keys().length==
0)return;this.set_current_hash(this.client.torrent.keys()[0])}return this.client.torrent.get(this.get_current_hash())},on_client_error:function(b,d,e){if(b.isRejected()){this.remove_saved_client();this.reset_to_onboard_step1()}else{e&&myconsole.error(e);if(config.asserts)debugger}},give_torrent_upload_data:function(b){myconsole.log("give torrent upload data");window.upload_data=b},got_upload_response:function(){debugger},handle_torrent_upload:function(b){if(this.client)if(this.client.connection_type()==
"local"){b=this.client.raptor.api.make_post_body({torrent_file:b});var d=[new Header("Content-Type","application/octet-stream; boundary="+this.client.raptor.api.boundary+"; charset=ascii"),new Header("Content-Length",b.length)];CrossDomainHttpRequest(this.got_upload_response,"POST","http://conduit.toolbar.dev/debug?action=add-file",b,null,null,d)}else this.client.torrent.addfile(b,this.torrent_uploaded)},torrent_uploaded:function(){debugger},update_current_torrent_display:function(){if(this.client.torrent.fetched){var b=
this.gadget.render_torrent_to_template(this.current_torrent(),this.gadget.template.clone());jQuery("#torrent_template_container").html(b)}else myconsole.error("should not try to show current torrent display before fetch -- possibly old update before client switch triggered this")},got_update:function(){preferences.get_pref("dont_auto_load_client")&&preferences.add_pref("dont_auto_load_client",false);this._ever_got_update=true;var b=this.client.torrent.calculate_totals();jQuery("#seed_speed").html(to_file_size(b.total_up_speed)+
"/s");jQuery("#dl_speed").html(to_file_size(b.total_down_speed)+"/s");this.update_current_torrent_display();if(this.updating)this.next_update=setTimeout(_.bind(this.req_update,this),this.update_interval)},got_update_failed:function(b,d,e){if(config.asserts)debugger;if(e&&e.info=="jsonp fail"){console.error("unfortunate jsonp request failure. either uT is not running or perhaps invalid pairing key?");this.remove_computer(null);return this.reset_to_onboard_step1()}else if(e&&e.error){console.error(e.error);
this.remove_computer(null);return this.reset_to_onboard_step1()}else if(b&&b.data&&b.data.error){console.log("toolbar got error",b.data.error);preferences.add_pref("dont_auto_load_client",true);this.remove_saved_client();return this.reset_to_onboard_step1()}else if(b&&b.status=="timeout"&&!this._ever_got_update){myconsole.error("never got an update and the first try timed out -- likely uT is not running!");preferences.add_pref("dont_auto_load_client",true);this.remove_saved_client();return this.reset_to_onboard_step1()}else if(b&&
b.status==403){this.remove_saved_client();this.reset_to_onboard_step1()}else this.do_update()},remote_login_error:function(b){var d=this;myconsole.log("error logging in",b,b.message);jQuery(".auth_msg").css("display","none");jQuery("#username").attr("disabled",false);jQuery("#password").attr("disabled",false);jQuery(".bt_submit").show();d.click_gadget("alert_signin");show_remote_login({instant:true,toolbar:d})},reset_to_onboard_step1:function(){jQuery("#onboard_1").html("Set up &mu;Torrent Control");
myconsole.log("reset to onboard step1");SendMessage("ut_toolbar_gadget",jQuery.toJSON({command:"close_gadgets"}));_.delay(function(){window.location.reload()},1E3)},setup_utorrent:function(b){var d=this,e=preferences.get_pref("conn_type");e&&myconsole.log("got stored conn_type setting",e);if(clients.get_paired_client()){d.set_current_client(null);this.change_connection("conn_local");clients.get_current_client().onready=function(){myconsole.log("client already setup",client);debugger}}else{myconsole.log("no paired client found -- creating one from scratch");
clients.create_paired_client({port_found:function(h){myconsole.log("client created and portscan found port");b&&b.port_found&&b.port_found(h)},success:function(h){myconsole.log("paired client all setup! yay");b&&b.success&&b.success(h)},error:function(h){myconsole.error("error pairing -- ",h);if(h.port_scan_failed){if(clients.get_remote_client())return d.change_connection("conn_remote");myconsole.log("uT is not running -- do you want to connect to remote instead?");b&&b.error&&b.error(h)}else b&&
b.error&&b.error(client)}})}},hide_onboarding:function(){jQuery(".bt_onboard_1").css("display","none");jQuery(".bt_onboard_2").css("display","none");jQuery(".bt_onboard_3").css("display","none")},hide_gadgets:function(){SendMessage("ut_toolbar_gadget",jQuery.toJSON({command:"close_gadgets"}))},click_gadget:function(b,d){myconsole.log("clicked gadget "+b);var e={resizable:0,saveresizedsize:0,titlebar:0,closeonexternalclick:1,savelocation:0,openposition:"click"};d&&_.extend(e,d);if(b=="green")this.open_gadget(b+
".html",400,200,e);else if(b=="connection"){(b=clients.get_current_client())&&b.connection_type();this.open_gadget("connection.html",280,295,_.extend(e,{openposition:"offset:(320;30)"}))}else if(b=="add")this.open_gadget("add.html",395,118,_.extend(e,{openposition:"offset:(200;30)"}));else if(b=="torrent_list")this.open_gadget("torrent_list.html",400,344,_.extend(e,{openposition:"offset:(175;30)"}));else if(b=="alert_signin")this.open_gadget("alert_signin.html",294,152,_.extend(e,{openposition:"offset:(2;30)"}));
else if(b=="alert_instructions")this.open_gadget("alert_instructions.html",360,145,_.extend(e,{openposition:"offset:(2;30)"}));else if(b=="alert_instructions_username_taken")this.open_gadget("alert_instructions_username_taken.html",360,145,_.extend(e,{openposition:"offset:(2;30)"}));else if(b=="setup_instructions")this.open_gadget("setup_instructions.html",286,265,_.extend(e,{openposition:"offset:(0;30)"}));else b=="computerselect"&&this.open_gadget("computerselect.html",286,130,_.extend(e,{openposition:"offset:(25;30)"}))},
stop_updating:function(b){if(this.client)this.client.stop_updating(b);else b&&b()},handle_gadget_message:function(b){myconsole.log(this,"handling gadget message",b);if(b.command=="change_connection")this.change_connection(b.id);else if(b.command=="autologin")this.do_autologin(b.id);else if(b.command=="remove_computer")this.remove_computer(b.id);else if(b.command=="query_gadget_open_response")debugger;else if(b.command=="change_info_state"){myconsole.log("toggling info state to",b.state);this.gadget.toggle_info_state(b.state)}else if(b.command==
"select_torrent"){this.set_current_hash(b.hash);this.update_current_torrent_display()}else if(b.command=="upload_torrent")this.handle_torrent_upload(b.data);else if(b.command=="add_by_url")b.url?this.client.torrent.add(b.url,this.torrent_added):myconsole.error("cannot add by url invalid url",b.url);else if(b.command!="add_file")if(b.command=="stop_updating")this.stop_updating();else if(b.command!="connect")if(b.command=="disconnect"){jQuery("#username").attr("disabled",false);jQuery("#password").attr("disabled",
false);this.stop_updating();this.remove_saved_client();this.reset_to_onboard_step1();this.hide_gadgets()}else if(b.command=="reset"){var d=clients.get_paired_client();d?d.setting.set("webui.uconnect_username","",function(){d.setting.set("webui.uconnect_password","",function(){d.setting.set("webui.uconnect_enable",0,function(){debugger;myconsole.log("disabled uconnect finally")})})}):myconsole.log("no paired client! reset will do nothing")}else b.command!="close_gadgets"&&myconsole.error("unrecognized message",
b)},remove_computer:function(b){var d=clients._clients[b];if(d){console.log("remove client",d);var e=jQuery.parseJSON(this.store.get("saved_clients"));b=d.connection_type()=="local"?d.raptor.api.pairing.pairing_key:b;d.stop_updating();d.destroy();delete e[b];this.store.set("saved_clients",jQuery.toJSON(e))}d=_.keys(clients._clients);if(d.length>0){d=d[0];console.log("client deleted... switching to",d);this.change_connection(d)}else{console.log("client deleted... no others, reset to onboarding");this.reset_to_onboard_step1()}},
do_autologin:function(b){if(clients._clients[b])main_window_navigate(config.autologin_url);else{console.log("cannot autologin -- could not locate client with id",b);debugger}},torrent_added:function(b){myconsole.log("torrent file added by url with resp",b)},torrent_file_uploaded:function(b){myconsole.log("torrent file uploaded with resp",b)},current_credentials:function(){if(this.client)return this.client.serialize({all:true})},change_connection:function(b){function d(){myconsole.log("changing connection -- stopped updating callback");
var n=null;if(b=="conn_remote")n=clients.get_remote_client();else if(b=="conn_local")n=clients.get_paired_client();if(b===null||b=="null"||looks_like_guid(b))n=clients._clients[b];if(n)if(n.connection_type()=="remote"){myconsole.log("remote client found",n);preferences.add_pref("conn_type","remote");h.set_current_client(n.guid);h.client=n;h.showTorrentControls();h.start_updating();h.hide_onboarding()}else{myconsole.log("found paired client");preferences.add_pref("conn_type","local");jQuery("#torrent_container").show();
jQuery("#remote_login").hide();h.set_current_client(null);if(clients.get_current_client()!=clients.get_paired_client())debugger;h.client=clients.get_paired_client();h.hide_onboarding();h.start_updating({fetch_settings:true,first_update:_.bind(h.update_computer_name,h)})}else if(b=="conn_remote"){myconsole.log("no remote client found");h.client.stop_updating();h.hideTorrentControls();show_remote_login({instant:true,toolbar:h})}else if(b=="conn_local"){myconsole.log("could not find paired client");
preferences.add_pref("conn_type","local");h.hideTorrentControls();h.reset_to_onboard_step1();h.client=null}else{myconsole.error("could not set client with id",b);if(config.asserts)debugger}}var e=clients.get_current_client(),h=this;myconsole.log("changing connection from "+(e?e.connection_type():"(no client)")+" to",b);e?e.stop_updating(d):d()},disable_connection:function(){clients.disable();jQuery("#remote_login").show();jQuery("#torrent_container").hide()},open_gadget:function(b,d,e,h){var n=_.map(h,
function(o,v){return v+"="+o}).join(",");myconsole.log("open gadget with url",b);h=function(){OpenGadget(config.static_root+b+"?v="+UTORRENT_CONTROL_VERSION,d,e+ff_fudge,n)};if(is_firefox){SendMessage("ut_toolbar_gadget",jQuery.toJSON({command:"close_gadgets"}));setTimeout(h,100)}else h()},update:function(){var b=this.client.torrent.calculate_totals();jQuery("#summary_info").html("U: "+b.total_up_speed+" D: "+b.total_down_speed)},already_setup_remote:function(){myconsole.log("remote was already setup -- hide the username/password");
this.hide_onboarding();jQuery("#remote_login").hide();jQuery("#torrent_container").show()},reset:function(){}};
